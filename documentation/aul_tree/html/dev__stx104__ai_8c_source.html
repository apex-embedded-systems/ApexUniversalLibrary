<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Apex Universal Library: /home/mike/aes_eclipse/aul_tree/devices/stx104/dev_stx104_ai.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Apex Universal Library
   </div>
   <div id="projectbrief">AUL Library and Driver APIs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dev__stx104__ai_8c_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">dev_stx104_ai.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="dev__stx104__ai_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/********************************************************************************</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">_____________________________________________________________________________  </span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">Description:</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">_____________________________________________________________________________</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">Purpose:</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">_____________________________________________________________________________</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">Remark:</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">_____________________________________________________________________________</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">Example:</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">_____________________________________________________________________________</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">Copyright Notice:</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">    </span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">        COPYRIGHT NOTICE Copyright (c) 2014 by Apex Embedded Systems. All rights </span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">        reserved. This document is the confidential property of Apex Embedded </span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">        Systems Any reproduction or dissemination is prohibited unless specifically </span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">        authorized in writing.</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">_____________________________________________________________________________</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">License:</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">_____________________________________________________________________________</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">TODO:</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">1. Everywhere there is a AUL_Error_Log() replace with Debug_Log()</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">*********************************************************************************/</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dev__stx104_8h.html">dev_stx104.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;../../shared/status.h&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;../../shared/mem.h&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;../../shared/error.h&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;../../shared/compiler.h&quot;</span>  <span class="comment">/* inline */</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;../../shared/callconv.h&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;../../aul/aul_shared.h&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;../../io/io.h&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dev__stx104__index_8h.html">dev_stx104_index.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;../../str_safe/str_safe.h&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">/*TODO: cannot have in kernel!*/</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span>  <span class="comment">/* _fcvt() */</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">/*#include &lt;math.h&gt;  */</span>  <span class="comment">/* pow(), log() */</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">/*********************************************************************************/</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">/* if DEBUG then allow IO_DEBUG */</span></div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="dev__stx104__ai_8c.html#ace1bae65dd5cf85bddfa6ab28563ffde">   52</a></span>&#160;<span class="preprocessor">#define STX104_AI_DEBUG                 _DEBUG</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">/*********************************************************************************/</span></div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="dev__stx104__ai_8c.html#a6e06a7994dc8e665cea39fa9350d9c87">   54</a></span>&#160;<span class="preprocessor">#define STX104_AI_DEBUG_LOG     DEBUG_OUT</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#if (0)</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">typedef</span> void ( * ANALOG_INPUT_BUFFER_HANDLER )( <span class="keyword">struct </span>ANALOG_INPUT_BUFFER_TYPE * buffer, ANALOG_INPUT_ERROR_ENUM error );</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword">typedef</span> ANALOG_INPUT_BUFFER_HANDLER AI_BUFFER_FUNCTION;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                        </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>ANALOG_INPUT_BUFFER_TYPE</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">/*TEMPORARY:    MUTEX  mutex;  */</span>       <span class="comment">/* negotiation between driver and user application */</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        WORD*  buffer;          <span class="comment">/* pointer to data buffer */</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        WORD   buffer_size; <span class="comment">/* total buffer size */</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        WORD   threshold;       <span class="comment">/* number of samples in the buffer for the callback to be called */</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        WORD   samples;         <span class="comment">/* actual quantity of samples in the buffer */</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        AI_BUFFER_FUNCTION  callback_function;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;} ANALOG_INPUT_BUFFER_TYPE;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">/**********************************************************************************************************</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="keyword">static</span> <span class="keywordtype">double</span> STX104_AI_Time_Settling( <span class="keywordtype">double</span> capacitance_pf, <span class="keywordtype">double</span> resistance_ohms )</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;{</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordtype">double</span> settle_time_ns;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">/*      settle_time = ai_resistance_ohms * ai_capacitance_pf * pow10(-12) * 16 * ln(2) * pow10(9)   */</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        settle_time_ns = ai_resistance_ohms * ai_capacitance_pf * pow10(-3) * 16 * log(2);              </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">/*printf( &quot;  R=%f, C=%f\n&quot;, ai_resistance_ohms, ai_capacitance_pf ); */</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">return</span>( settle_time_ns );</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">/********************************************************************************************************/</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">/********************************************************************************************************/</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">/* the following functions and macro used by STX104_AI_CFG_Set(). */</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#if defined( STX104_AI_DEBUG )</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">/********************************************************************************************************/</span></div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="dev__stx104__ai_8c.html#a248f85e2dfe291490d7635c4cec3fc75">   92</a></span>&#160;<span class="preprocessor">#define STX104_AI_DEBUG_STRING_SIZE  32</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">/********************************************************************************************************/</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> * Float_To_String_Convert( <span class="keywordtype">double</span> value,      <span class="comment">/* input value                          */</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                                       <span class="keywordtype">int</span>    right,      <span class="comment">/* number of digits to right of decimal */</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                                       <span class="keywordtype">char</span> * out_string, <span class="comment">/* resulting output */</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                                       <span class="keywordtype">int</span>    out_size    <span class="comment">/* max length of string */</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                                     )</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;{</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordtype">int</span>    osi, bi, i;  <span class="comment">/* osi = output_string index,  bi = buf index */</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordtype">int</span>    dec, sign;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordtype">char</span> * buf;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        buf = fcvt( value, right, &amp;dec, &amp;sign );</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keywordflow">if</span> ( (right + dec + 1) &gt; out_size ) <span class="keywordflow">return</span> out_string;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        bi = 0;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">for</span> ( osi = 0; osi &lt; dec; osi++ )</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                out_string[osi] = buf[bi];</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                bi++;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        }</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        out_string[osi] = <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">if</span> ( right &gt; 0 )</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                osi++;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                <span class="keywordflow">for</span> ( i = 0; i &lt; right; i++ )</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                        out_string[osi] = buf[bi];</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                        <span class="keywordflow">if</span> ( 0 == out_string[osi] )</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                        {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                        }</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                        {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                                osi++; bi++;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                        }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        out_string[osi] = 0;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordflow">return</span> out_string;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;}</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">/**********************************************************************************************************</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">   1.0e-2 ms   --&gt; 10 uS</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">   1,000 ms    --&gt;  1 sec</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> * Float_To_String_Multiplier_Suffix(  <span class="keywordtype">double</span> time_seconds,</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                                                                                                  <span class="keywordtype">char</span> * output_string,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                                                                                                  <span class="keywordtype">size_t</span> output_string_size,</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                                                                                                  <span class="keywordtype">int</span> *  error_code</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                                               )</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;{</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="keywordtype">double</span> time;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <span class="keywordflow">if</span> ( error_code ) *error_code = 0;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="keywordflow">if</span> ( output_string_size &lt; 11 )</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;         <span class="keywordflow">if</span> ( error_code ) *error_code = -1;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;         <span class="keywordflow">return</span> output_string;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( time_seconds &lt; 0.0 )</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;         <span class="keywordflow">if</span> ( error_code ) *error_code = -2;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;         <span class="keywordflow">return</span> output_string;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <span class="keywordflow">if</span>      ( time_seconds &gt;=   1.0    )</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                time  = time_seconds;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                Float_To_String_Convert( time, 9, output_string, output_string_size );</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                <a class="code" href="str__safe_8c.html#ad06504254eaa964a70c115b66532b121">String_Concatenate</a>( output_string, <span class="stringliteral">&quot; sec&quot;</span>, output_string_size );</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( time_seconds &gt;=   1.0e-3 )</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                time  = time_seconds * 1.0e3; <span class="comment">/* convert to mS */</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                Float_To_String_Convert( time, 6, output_string, output_string_size );</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                <a class="code" href="str__safe_8c.html#ad06504254eaa964a70c115b66532b121">String_Concatenate</a>( output_string, <span class="stringliteral">&quot; ms&quot;</span>, output_string_size );</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( time_seconds &gt;=   1.0e-6 )</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                time  = time_seconds * 1.0e6; <span class="comment">/* convert to uS */</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                Float_To_String_Convert( time, 3, output_string, output_string_size );</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                <a class="code" href="str__safe_8c.html#ad06504254eaa964a70c115b66532b121">String_Concatenate</a>( output_string, <span class="stringliteral">&quot; us&quot;</span>, output_string_size );</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( time_seconds &gt;=   1.0e-9 )</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                time  = time_seconds * 1.0e9; <span class="comment">/* convert to nS */</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                Float_To_String_Convert( time, 0, output_string, output_string_size );</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                <a class="code" href="str__safe_8c.html#ad06504254eaa964a70c115b66532b121">String_Concatenate</a>( output_string, <span class="stringliteral">&quot; ns&quot;</span>, output_string_size );</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                  <a class="code" href="str__safe_8c.html#a35c54c8339a6b0328ae3cd6bfea9c44e">String_Copy</a>( output_string, <span class="stringliteral">&quot;0 ns&quot;</span>, output_string_size );</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <span class="keywordflow">return</span> output_string;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;}</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">/********************************************************************************************************/</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">/********************************************************************************************************/</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">/*******************************************************************/</span></div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="dev__stx104__ai_8c.html#a43daa678cbc13fcfa0c2364f3715619e">  194</a></span>&#160;<span class="preprocessor">#define STX104_AI_MODULE_REV &quot;$Date: 2014-06-29 21:55:12 -0500 (Sun, 29 Jun 2014) $&quot;</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">/********************************************************************************************************/</span></div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="dev__stx104__ai_8c.html#a886f3ecceccaa4d097c82b49c6569576">  196</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="dev__stx104__ai_8c.html#a886f3ecceccaa4d097c82b49c6569576">STX104_AI_SVN_Time_Stamp</a>( <span class="keywordtype">void</span> ) { <span class="keywordflow">return</span> <a class="code" href="dev__stx104__ai_8c.html#a43daa678cbc13fcfa0c2364f3715619e">STX104_AI_MODULE_REV</a>; }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">/**********************************************************************************************************</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="keyword">static</span> <span class="keywordtype">double</span> STX104_AI_Intra_Sample_Timing_Minimum( <a class="code" href="structstx104__ai__cfg.html">stx104_ai_cfg_type</a> * cfg )</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;{</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordtype">int</span>             channel;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordtype">double</span>  settle_time_ns;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordtype">double</span>  time_ns;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        time_ns = <a class="code" href="dev__stx104_8h.html#ae782f2059bddc14a86d37dbaebb7ef22">STX104_AI_INTRA_SAMPLE_TIME_MIN_NS</a>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="keywordflow">if</span> ( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a6a1ba9d240dc60e634609ded84e124c1">first_channel</a> != cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a27bd4a57a825cd48de08ee8cfc4b34c4">last_channel</a> )</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                <span class="keywordflow">for</span>( channel = cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a6a1ba9d240dc60e634609ded84e124c1">first_channel</a>; channel &lt;= cfg-&gt;last_channel; channel++ )</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                {       <span class="comment">/*settle_time_ns = cfg-&gt;resistance_ohms[channel] * cfg-&gt;capacitance_pf[channel] * pow(10.0,-3.0) * 16.0 * log(2.0);*/</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                        settle_time_ns = cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a8c266b8a266bf7df9d36cdc69015cd34">resistance_ohms</a>[channel] * cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a2330add46044b55e5e25f879af96fa32">capacitance_pf</a>[channel] * ( 1.0 / 207.6205 );</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                        <span class="keywordflow">if</span> ( settle_time_ns &gt; time_ns ) time_ns = settle_time_ns;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">return</span> time_ns;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;}</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="keyword">static</span> <span class="keywordtype">double</span> stx104_adc_gain[8] = </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;{ </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        20.0/65536.0, 10.0/65536.0, 5.0/65536.0, 2.5/65536.0,</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        10.0/65536.0,  5.0/65536.0, 2.5/65536.0, 1.25/65536.0 </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;};</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">/********************************/</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="keyword">static</span> <span class="keywordtype">double</span> stx104_adc_offset[8] = </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;{ </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        -10.0, -5.0, -2.5, -1.25, 0.0, 0.0, 0.0, 0.0 </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;};</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">/**********************************************************************************************************/</span><span class="comment">/**</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">@ingroup stx104_ai</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">\brief</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">Apex Universal Library STX104 specific function that retrieves the STX104 analog input (AI) configuration.</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">\param[in] board The descriptor obtained from the function ::AUL_Device_Open. </span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">\param[out] cfg A pointer to the ::stx104_ai_cfg_type structure that will receive the analog input configuration information.  </span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">\return An error code of type int is returned. If successful, returns 0 (SUCCESS), otherwise it returns a non-zero error code. Please refer to ::AUL_STATUS_ENUM for all the possible error codes.</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="group__stx104__ai.html#ga9a53ca658441e4c3764c7b174448a96d">  237</a></span>&#160;<a class="code" href="callconv_8h.html#a1f2b063e3f098ffc4ebf64a777c76843">AUL_DLL_API</a> <span class="keywordtype">int</span> <a class="code" href="callconv_8h.html#ab86054f7a6ff3a2238edc182b26b603e">AULCALLCONV</a> <a class="code" href="group__stx104__ai.html#ga9a53ca658441e4c3764c7b174448a96d">STX104_AI_CFG_Get</a>( <span class="keywordtype">int</span> board, <a class="code" href="structstx104__ai__cfg.html">stx104_ai_cfg_type</a>* cfg )</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;{</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="keywordtype">int</span>                                             error_code;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <a class="code" href="structdevmgr__device.html">devmgr_device_type</a> *    device;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <a class="code" href="structstx104__dataset.html">stx104_dataset_type</a> *   ds;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keywordtype">size_t</span>                                  address;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        uint8_t                                 reg_value;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        uint16_t                                scratch_uint16;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        uint16_t                                channels_per_frame;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        uint32_t                                time_reg;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordtype">double</span>                                  time_ns;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <a class="code" href="structstx104__gen__jmp.html">STX104_GEN_JMP_TYPE</a>             jumpers;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordtype">size_t</span>                                  index;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        uint16_t                                firmware_revision;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <a class="code" href="group__stx104__general.html#ga7f0e60dc32b63baac10aabcd43933cd2">STX104_Gen_Jumpers_Get</a>( board, &amp;jumpers );</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="aul__status__enum_8h.html#a99fb83031ce9923c84392b4e92f956b5ac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a> != ( error_code = <a class="code" href="aul_8c.html#af8e9fd36526f3c41cb7616a9b9c28f9e">AUL_Board</a>( board, &amp;device ) ) ) <span class="keywordflow">goto</span> STX104_AI_CFG_Get_Error;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        ds = (<a class="code" href="structstx104__dataset.html">stx104_dataset_type</a> *) device-&gt;<a class="code" href="structdevmgr__device.html#ad517770dac2061381b2008850ff12e6c">private_data</a>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <a class="code" href="mem_8c.html#ad87a18d072f1e0baa80eb2de9b6852e6">Mem_Set</a>( cfg, 0, <span class="keyword">sizeof</span>( <a class="code" href="structstx104__ai__cfg.html">stx104_ai_cfg_type</a> ) );</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="comment">/* channels */</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        address = device-&gt;<a class="code" href="structdevmgr__device.html#ac87a4a56710bf75574db36ba09b99a4b">io_region_offset</a> + STX104_CHANNEL;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <a class="code" href="io_8h.html#adaaaa38c3f5e4cc997280db7f1596c61">IO_Read_U8</a>( device-&gt;<a class="code" href="structdevmgr__device.html#a41c55b0af4fc2ee048aed49ea5511728">io_device</a>, address, &amp;reg_value );</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        ds-&gt;<a class="code" href="structstx104__dataset.html#ad69ca97eb420cdae95db2ece427334fd">ai_channel_reg</a> = reg_value;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a6a1ba9d240dc60e634609ded84e124c1">first_channel</a> = (<a class="code" href="dev__stx104_8h.html#a021c1bdaa210791f503b5d6213e4b02c">STX104_AI_ENUM</a>)(   reg_value &amp; 0x0F        );</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a27bd4a57a825cd48de08ee8cfc4b34c4">last_channel</a>  = (<a class="code" href="dev__stx104_8h.html#a021c1bdaa210791f503b5d6213e4b02c">STX104_AI_ENUM</a>)( ( reg_value &amp; 0xF0 ) &gt;&gt; 4 );</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        channels_per_frame = (uint16_t) ( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a27bd4a57a825cd48de08ee8cfc4b34c4">last_channel</a> - cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a6a1ba9d240dc60e634609ded84e124c1">first_channel</a> + 1 );</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        ds-&gt;<a class="code" href="structstx104__dataset.html#ab8545036090889b776c00dbaaab465d4">ai_channels_per_frame</a> = channels_per_frame;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <a class="code" href="dev__stx104__index_8c.html#a9a18ae67ccd6b49249ed76a925733a85">STX104_Index_Read_U32</a>( board, STX104_ANALOG_INPUT_BURST_TIMER, &amp;time_reg );</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        time_ns = ((double) time_reg) * <a class="code" href="dev__stx104_8h.html#a77048f06424498b2c8ce42c9689b96ff">STX104_CLOCK_RESOLUTION_NS</a> + <a class="code" href="dev__stx104_8h.html#ae782f2059bddc14a86d37dbaebb7ef22">STX104_AI_INTRA_SAMPLE_TIME_MIN_NS</a>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a61dd078bdd08a6fa6a060152d2c7b46c">burst_timer_sec</a> = time_ns * 1.0e-9; <span class="comment">/* convert to seconds */</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a8774c9e2df7261d3f0eed7f28fc3cb63">burst_timer_ns</a> = (uint32_t) time_ns;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <a class="code" href="dev__stx104__index_8c.html#a9a18ae67ccd6b49249ed76a925733a85">STX104_Index_Read_U32</a>( board, STX104_ANALOG_INPUT_FRAME_TIMER, &amp;time_reg );</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        time_ns = ((double) (time_reg + 1)) * <a class="code" href="dev__stx104_8h.html#a77048f06424498b2c8ce42c9689b96ff">STX104_CLOCK_RESOLUTION_NS</a>;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a2ab7f13dd2a07a6d077a5b6695f7a5d8">frame_timer_sec</a> = time_ns * 1.0e-9; <span class="comment">/* convert to seconds */</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a441a34c0d2fb71d022d1be7d5e68a057">frame_timer_ns</a> = (uint32_t) time_ns;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <a class="code" href="dev__stx104__index_8c.html#a9a18ae67ccd6b49249ed76a925733a85">STX104_Index_Read_U32</a>( board, STX104_ANALOG_INPUT_FRAME_MAX,   &amp;cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a4167c018e12490d06e32f811750c0892">frame_maximum</a> );</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="comment">/* gain */</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        address = device-&gt;<a class="code" href="structdevmgr__device.html#ac87a4a56710bf75574db36ba09b99a4b">io_region_offset</a> + STX104_ADC_CONFIGURATION;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <a class="code" href="io_8h.html#adaaaa38c3f5e4cc997280db7f1596c61">IO_Read_U8</a>( device-&gt;<a class="code" href="structdevmgr__device.html#a41c55b0af4fc2ee048aed49ea5511728">io_device</a>, address, &amp;reg_value );</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a4ca8b26238d3ac1107e8981dfeed7c2e">gain</a> = (<a class="code" href="dev__stx104_8h.html#a41b62e2aef77fd134d6c82b382945458">STX104_AI_GAIN_ENUM</a>)( reg_value &amp; 0x03 );</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="comment">/* include the unipolar bit as well which we need for data conversions */</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        ds-&gt;<a class="code" href="structstx104__dataset.html#a70dc42bf4f38ac72c8967caf502e5110">ai_gain</a> = reg_value &amp; 0x07; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="comment">/* save unipolar value */</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">if</span> ( jumpers.<a class="code" href="structstx104__gen__jmp.html#af201b15f5592c97935f373af7c9d4e22">J9_ai_unipolar</a> ) ds-&gt;<a class="code" href="structstx104__dataset.html#a66f91d29b3cdfc4693449caa1b98f666">ai_unipolar</a> = 1;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">else</span>                          ds-&gt;<a class="code" href="structstx104__dataset.html#a66f91d29b3cdfc4693449caa1b98f666">ai_unipolar</a> = 0;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="comment">/* MAVG, SAIFTTS, SAIFTS, nSGATE, strobe source, encoding behavior if relevant */</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <a class="code" href="dev__stx104__index_8c.html#a3996f051686d51075f7ca35a1e8c8a03">STX104_Index_Read_U16</a>( board, STX104_ANALOG_INPUT_GENERAL_CONFIG, &amp;scratch_uint16 );</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        ds-&gt;<a class="code" href="structstx104__dataset.html#a4c564a6e4ba1b875a532fdf125b4a44a">ai_general_config_reg</a> = scratch_uint16;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        reg_value = (uint8_t)(scratch_uint16 &amp; 0x00FF );  <span class="comment">/* provide lower byte for decoding below */</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <a class="code" href="group__stx104__general.html#gab1f67b00c1bedbf10b24805514dcbb41">STX104_Gen_Revision_Get</a>( board, &amp;firmware_revision );</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        ds-&gt;<a class="code" href="structstx104__dataset.html#a22c3e78abe64eef97d61ee1d1a48539f">firmware_revision</a> = firmware_revision; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">if</span> ( firmware_revision &gt;= <a class="code" href="dev__stx104_8h.html#aaf8fd5f0e57d456151c951e0f3715fc4a3a1c939dc6a6f113dca0998fa7611abe">STX104_REVISION_120328</a> )</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        { <span class="comment">/* get aditional parameters */</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                scratch_uint16 &amp;= <a class="code" href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4a6c9605f73534c8689997f31a45275a27">STX104_AIGC_ENCODE</a> | <a class="code" href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4a55d9e3df571b07142063867539f95890">STX104_AIGC_ENCODE_BEHAVIOR</a>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      scratch_uint16  = ( scratch_uint16 &gt;&gt; <a class="code" href="dev__stx104_8h.html#ae4d5251432e1a9e6803c0240cc492e18a27947cd6663432e6cd407bd4d0eb086a">STX104_AI_AIGC_ENCODE_SHIFT</a> );  <span class="comment">/* AI_ENCODE,AI_ENCODE_BEHAVIOR[1:0] */</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                <span class="keywordflow">switch</span>( scratch_uint16 )</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                        <span class="keywordflow">case</span> 0: <span class="comment">/* AI_ENCODE=&#39;0&#39; AI_ENCODE_BEHAVIOR[1:0] = &quot;00&quot; */</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;         <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                                cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#aee7c159595ba53bc905161dab996497e">encoding</a> = <a class="code" href="dev__stx104_8h.html#ad3e045c0693497b94c45f09cd4faeb0bae9efeaec3a327083c93a100f249de769">AI_ENCODING_STRAIGHT_BINARY</a>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                        <span class="keywordflow">case</span> 1: <span class="comment">/* AI_ENCODE=&#39;0&#39; AI_ENCODE_BEHAVIOR[1:0] = &quot;01&quot; */</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;         <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                                cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#aee7c159595ba53bc905161dab996497e">encoding</a> = <a class="code" href="dev__stx104_8h.html#ad3e045c0693497b94c45f09cd4faeb0bae06609c8226911f76e3861fff60dfffb">AI_ENCODING_STRAIGHT_BINARY_ALLOW_POLARITY</a>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                        <span class="keywordflow">case</span> 4: <span class="comment">/* AI_ENCODE=&#39;1&#39; AI_ENCODE_BEHAVIOR[1:0] = &quot;00&quot; */</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                                cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#aee7c159595ba53bc905161dab996497e">encoding</a> = <a class="code" href="dev__stx104_8h.html#ad3e045c0693497b94c45f09cd4faeb0ba653e95265393be3669a535327442ad50">AI_ENCODING_TWOS_COMPLEMENT</a>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                        <span class="keywordflow">case</span> 5: <span class="comment">/* AI_ENCODE=&#39;1&#39; AI_ENCODE_BEHAVIOR[1:0] = &quot;01&quot; */</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                                cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#aee7c159595ba53bc905161dab996497e">encoding</a> = <a class="code" href="dev__stx104_8h.html#ad3e045c0693497b94c45f09cd4faeb0bacc171c19c087357ef9f6ae1ce5463254">AI_ENCODING_TWOS_COMPLEMENT_ALLOW_POLARITY</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                        <span class="keywordflow">case</span> 6: <span class="comment">/* AI_ENCODE=&#39;1&#39; AI_ENCODE_BEHAVIOR[1:0] = &quot;10&quot; */</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;         <span class="keywordflow">case</span> 7:</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                                cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#aee7c159595ba53bc905161dab996497e">encoding</a> = <a class="code" href="dev__stx104_8h.html#ad3e045c0693497b94c45f09cd4faeb0ba0bdacfe2d0e618c6a96c308c50895c61">AI_ENCODING_TWOS_COMPLEMENT_ABSOLUTE</a>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                <a class="code" href="dev__stx104__index_8c.html#a3996f051686d51075f7ca35a1e8c8a03">STX104_Index_Read_U16</a>( board, STX104_ANALOG_INPUT_POLARITY_CONFIG, &amp;scratch_uint16 );</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                ds-&gt;<a class="code" href="structstx104__dataset.html#aa5ab273e6827ca05d11875fe0972252e">ai_polarity_config</a> = scratch_uint16;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                <span class="keywordflow">for</span> ( index = 0; index &lt; <a class="code" href="dev__stx104_8h.html#a4d98473c80070f2a4af519dcfd107840">STX104_AI_QTY</a>; index++ )</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                        <span class="keywordflow">if</span> ( scratch_uint16 &amp; 0x0001 ) cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a5c82425b95181ab4b1834bf1872ac522">polarity</a>[index] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                        <span class="keywordflow">else</span>                           cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a5c82425b95181ab4b1834bf1872ac522">polarity</a>[index] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                        scratch_uint16 = scratch_uint16 &gt;&gt; 1;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#ae45a91e719864f8383024407b78bb335">strobe_source</a> = ( <a class="code" href="dev__stx104_8h.html#aaa7a160b0d10f046311f3af06a489f2b">STX104_AI_STROBE_SOURCE_ENUM</a>)( reg_value &amp; 0x0F );</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">if</span> ( ( reg_value &amp; 0x40 ) == 0x40 ) cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a3fecbcdb57bf5d00a06476b69d19c352">sync_aift_to_trigger_start</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        if ( ( reg_value &amp; 0x20 ) == 0x20 ) cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a0b0c14afaa936b710ca5eaea6ce5fd56">sync_aifc_to_trigger_start</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        if ( ( reg_value &amp; 0x10 ) == 0x10 ) cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#ad87797a90fa1390b2fc82cca7701f3aa">use_triggering_subsystem</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   <span class="comment">/* moving average filter - MAVG_INV</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">      moving average jumper position is M3</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">         Desire jumper to be a &#39;1&#39; or set or enable moving average filter</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">         jumper  mavg_inv   actual value</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">            0      0          0</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">            0      1          0</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">            1      0          1</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">            1      1          1</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        if ( jumpers.<a class="code" href="structstx104__gen__jmp.html#a81ad7c9a1953babfbb01d958b0dd37a3">M3_moving_average_filter</a>  )</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#af648965637ee8c023d645cd77f6971d7">moving_average_filter</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="comment">/* HSFIFOEN */</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <a class="code" href="dev__stx104__index_8c.html#a09ebde236fcf54a86aa35617fcec05c0">STX104_Index_Read_U8</a>( board, STX104_FIFO_CONFIGURATION, &amp;reg_value );</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="keywordflow">if</span> ( ( reg_value &amp; 0x80 ) == 0x80 ) cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a025bf5a6626f5570b635195f21781133">high_speed_pre_queue_fifo</a> = <span class="keyword">true</span>; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;STX104_AI_CFG_Get_Error:</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">if</span> ( error_code &lt; 0 ) error_code = -error_code;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <a class="code" href="error_8c.html#a1982669e1c73773f3412a213aedd0e20">Error_Log</a>( <a class="code" href="dev__stx104_8h.html#a8368cb3a30699c3047fa477d488831ae">DEVICE_STX104_NAME</a>, __func__, __LINE__, error_code );</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">return</span> -error_code;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;}</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">/**********************************************************************************************************/</span><span class="comment">/**</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment">@ingroup stx104_ai</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">\brief</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">Apex Universal Library STX104 specific function that sets the STX104 analog input (AI) configuration.</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">\param[in] board The descriptor obtained from the function ::AUL_Device_Open. </span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">\param[in] cfg A pointer to the ::stx104_ai_cfg_type structure that will set the analog input configuration information.</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">\return An error code of type int is returned. If successful, returns 0 (SUCCESS), otherwise it returns a non-zero error code. Please refer to ::AUL_STATUS_ENUM for all the possible error codes.</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00374"></a><span class="lineno"><a class="line" href="group__stx104__ai.html#ga7f5528e6fb7ac0209ac4d1b68d53cbb5">  374</a></span>&#160;<a class="code" href="callconv_8h.html#a1f2b063e3f098ffc4ebf64a777c76843">AUL_DLL_API</a> <span class="keywordtype">int</span> <a class="code" href="callconv_8h.html#ab86054f7a6ff3a2238edc182b26b603e">AULCALLCONV</a> <a class="code" href="group__stx104__ai.html#ga7f5528e6fb7ac0209ac4d1b68d53cbb5">STX104_AI_CFG_Set</a>( <span class="keywordtype">int</span> board, <a class="code" href="structstx104__ai__cfg.html">stx104_ai_cfg_type</a> * cfg )</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;{</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="keywordtype">int</span>                                     error_code;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <a class="code" href="structdevmgr__device.html">devmgr_device_type</a> *                    device;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <a class="code" href="structstx104__dataset.html">stx104_dataset_type</a> *   ds;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordtype">size_t</span> address;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <a class="code" href="structstx104__gen__jmp.html">STX104_GEN_JMP_TYPE</a>     jumpers;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        uint16_t                                firmware_revision;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordtype">size_t</span>                                  index;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        uint16_t                                scratch_uint16;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        uint8_t                                 reg_value;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        uint16_t                                channels_per_frame;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        uint16_t                                ai_general_cfg_reg;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        uint32_t                                time_reg;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keywordtype">double</span> time_ns;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keywordtype">double</span> time_sec;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordtype">double</span> time_intrasample_ns;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keywordtype">double</span> intrasample_time_sec;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordtype">double</span> frame_time_sec;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="aul__status__enum_8h.html#a99fb83031ce9923c84392b4e92f956b5ac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a> != ( error_code = <a class="code" href="aul_8c.html#af8e9fd36526f3c41cb7616a9b9c28f9e">AUL_Board</a>( board, &amp;device ) ) ) <span class="keywordflow">goto</span> STX104_AI_CFG_Set_Error;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        ds = (<a class="code" href="structstx104__dataset.html">stx104_dataset_type</a> *) device-&gt;<a class="code" href="structdevmgr__device.html#ad517770dac2061381b2008850ff12e6c">private_data</a>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <a class="code" href="group__stx104__general.html#ga7f0e60dc32b63baac10aabcd43933cd2">STX104_Gen_Jumpers_Get</a>( board, &amp;jumpers );</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        ai_general_cfg_reg = ds-&gt;<a class="code" href="structstx104__dataset.html#a70dc42bf4f38ac72c8967caf502e5110">ai_gain</a>;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="comment">/* general parameter testing */</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordflow">if</span> ( (jumpers.<a class="code" href="structstx104__gen__jmp.html#a0296f8201b216f816624c0dd04e7ae80">M0_mode</a> == <span class="keyword">false</span>)        || (jumpers.<a class="code" href="structstx104__gen__jmp.html#a4c6392929c81c547d1410b049772b56e">M1_mode</a> == <span class="keyword">false</span>)       ||</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                 (jumpers.<a class="code" href="structstx104__gen__jmp.html#a6614b5740f3ee38006c2c6e8ed0bf0c5">M2_dacs_16bits</a> == <span class="keyword">false</span>)  )</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">/*TODO           (jumpers.M2_dacs_16bits == false) || (jumpers.M4_address_10bit_mode == false) )*/</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="preprocessor">#if defined( STX104_AI_DEBUG )</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                <a class="code" href="debug_8c.html#ad08eb6f767d5b4723cc5daec65856d19">Debug_Log</a>( <a class="code" href="dev__stx104__ai_8c.html#a6e06a7994dc8e665cea39fa9350d9c87">STX104_AI_DEBUG_LOG</a> <span class="stringliteral">&quot;%s: please install jumpers M0 M1 M2\n&quot;</span>, __func__ );</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                error_code = <a class="code" href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914aa6399a6aa0eb3155c89bfbb1dedd44ef">EC_STX104_AI_JUMPERS_M0_M1_M2_M4</a>;  <span class="keywordflow">goto</span> STX104_AI_CFG_Set_Error;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="keywordflow">if</span> ( jumpers.<a class="code" href="structstx104__gen__jmp.html#a0f0a3a3c15c1ddd9b77f4e006959e7c5">J8_ai_differential</a> == <span class="keyword">true</span> ) </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        { <span class="comment">/* differential */</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                <span class="keywordflow">if</span> ( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a6a1ba9d240dc60e634609ded84e124c1">first_channel</a> &gt; <a class="code" href="dev__stx104_8h.html#a021c1bdaa210791f503b5d6213e4b02ca967d54e3e0f68e72f3738d7e9026da0a">STX104_AI_CH7</a> ) </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="preprocessor">#if defined( STX104_AI_DEBUG )</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <a class="code" href="debug_8c.html#ad08eb6f767d5b4723cc5daec65856d19">Debug_Log</a>( <a class="code" href="dev__stx104__ai_8c.html#a6e06a7994dc8e665cea39fa9350d9c87">STX104_AI_DEBUG_LOG</a> <span class="stringliteral">&quot;%s: first channel out of range, differential mode\n&quot;</span>, __func__ );</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                        error_code = <a class="code" href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914a6290a468598e4460df275c75dc33799d">EC_STX104_AI_FIRST_CHANNEL_OUT_OF_RANGE</a>;   <span class="keywordflow">goto</span> STX104_AI_CFG_Set_Error;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                <span class="keywordflow">if</span> ( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a27bd4a57a825cd48de08ee8cfc4b34c4">last_channel</a>  &gt; <a class="code" href="dev__stx104_8h.html#a021c1bdaa210791f503b5d6213e4b02ca967d54e3e0f68e72f3738d7e9026da0a">STX104_AI_CH7</a> ) </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="preprocessor">#if defined( STX104_AI_DEBUG )</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                        <a class="code" href="debug_8c.html#ad08eb6f767d5b4723cc5daec65856d19">Debug_Log</a>( <a class="code" href="dev__stx104__ai_8c.html#a6e06a7994dc8e665cea39fa9350d9c87">STX104_AI_DEBUG_LOG</a> <span class="stringliteral">&quot;%s: ast channel out of range, differential mode\n&quot;</span>, __func__ );</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                        error_code = <a class="code" href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914a3475216355ba2d7df2cf35901c63705f">EC_STX104_AI_LAST_CHANNEL_OUT_OF_RANGE</a>;    <span class="keywordflow">goto</span> STX104_AI_CFG_Set_Error;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        { <span class="comment">/* single ended */</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                <span class="keywordflow">if</span> ( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a6a1ba9d240dc60e634609ded84e124c1">first_channel</a> &gt; <a class="code" href="dev__stx104_8h.html#a021c1bdaa210791f503b5d6213e4b02cad7a267d338a5ce1d6bddb9c9791fe86a">STX104_AI_CH15</a> ) </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                {  </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="preprocessor">#if defined( STX104_AI_DEBUG )</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                        <a class="code" href="debug_8c.html#ad08eb6f767d5b4723cc5daec65856d19">Debug_Log</a>( <a class="code" href="dev__stx104__ai_8c.html#a6e06a7994dc8e665cea39fa9350d9c87">STX104_AI_DEBUG_LOG</a> <span class="stringliteral">&quot;%s: first channel out of range, single-ended\n&quot;</span>, __func__ );</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                        error_code = <a class="code" href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914a6290a468598e4460df275c75dc33799d">EC_STX104_AI_FIRST_CHANNEL_OUT_OF_RANGE</a>;   <span class="keywordflow">goto</span> STX104_AI_CFG_Set_Error;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                <span class="keywordflow">if</span> ( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a27bd4a57a825cd48de08ee8cfc4b34c4">last_channel</a>  &gt; <a class="code" href="dev__stx104_8h.html#a021c1bdaa210791f503b5d6213e4b02cad7a267d338a5ce1d6bddb9c9791fe86a">STX104_AI_CH15</a> ) </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                { </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="preprocessor">#if defined( STX104_AI_DEBUG )</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                        <a class="code" href="debug_8c.html#ad08eb6f767d5b4723cc5daec65856d19">Debug_Log</a>( <a class="code" href="dev__stx104__ai_8c.html#a6e06a7994dc8e665cea39fa9350d9c87">STX104_AI_DEBUG_LOG</a> <span class="stringliteral">&quot;%s: last channel out of range, single-ended\n&quot;</span>, __func__ );</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                        error_code = <a class="code" href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914a3475216355ba2d7df2cf35901c63705f">EC_STX104_AI_LAST_CHANNEL_OUT_OF_RANGE</a>;    <span class="keywordflow">goto</span> STX104_AI_CFG_Set_Error;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <span class="keywordflow">if</span> ( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a27bd4a57a825cd48de08ee8cfc4b34c4">last_channel</a> &lt; cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a6a1ba9d240dc60e634609ded84e124c1">first_channel</a> )</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        { </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="preprocessor">#if defined( STX104_AI_DEBUG )</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                <a class="code" href="debug_8c.html#ad08eb6f767d5b4723cc5daec65856d19">Debug_Log</a>( <a class="code" href="dev__stx104__ai_8c.html#a6e06a7994dc8e665cea39fa9350d9c87">STX104_AI_DEBUG_LOG</a> <span class="stringliteral">&quot;%s: first channel greater than last channel\n&quot;</span>, __func__ );</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                error_code = <a class="code" href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914a77c198abfcd190546232339dd430d149">EC_STX104_AI_FIRST_CHAN_GREATER_THAN_LAST_CHAN</a>;    <span class="keywordflow">goto</span> STX104_AI_CFG_Set_Error;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   <span class="comment">/**** Intra-sample time calculation ****/</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">/* burst_timer_sec has priority over burst_timer_ns, since burst_timer_ns is deprecated */</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;   intrasample_time_sec = 0.0;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   <span class="keywordflow">if</span> ( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a8774c9e2df7261d3f0eed7f28fc3cb63">burst_timer_ns</a>  &gt; 0 )</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;   {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        intrasample_time_sec = ((double) cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a8774c9e2df7261d3f0eed7f28fc3cb63">burst_timer_ns</a> ) * 1.0e-9; <span class="comment">/* convert to seconds */</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <span class="keywordflow">if</span> ( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a61dd078bdd08a6fa6a060152d2c7b46c">burst_timer_sec</a> &gt; 0 )</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        intrasample_time_sec = cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a61dd078bdd08a6fa6a060152d2c7b46c">burst_timer_sec</a>;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   time_ns = ( ((double) (<a class="code" href="pstdint_8h.html#ab5eb23180f7cc12b7d6c04a8ec067fdd">UINT32_MAX</a> - 1)) * <a class="code" href="dev__stx104_8h.html#a77048f06424498b2c8ce42c9689b96ff">STX104_CLOCK_RESOLUTION_NS</a> );</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;   time_sec = time_ns * 1.0e-9; <span class="comment">/* convert to sectonds */</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <span class="keywordflow">if</span> ( intrasample_time_sec &gt; time_sec )</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="preprocessor">#if defined( STX104_AI_DEBUG )</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                <span class="keywordtype">char</span> time_text[<a class="code" href="dev__stx104__ai_8c.html#a248f85e2dfe291490d7635c4cec3fc75">STX104_AI_DEBUG_STRING_SIZE</a>];</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                Float_To_String_Multiplier_Suffix( time_sec, time_text, <a class="code" href="dev__stx104__ai_8c.html#a248f85e2dfe291490d7635c4cec3fc75">STX104_AI_DEBUG_STRING_SIZE</a>, <a class="code" href="cmp__i8255m0__readme_8txt.html#a074d4d493edb0d5ac9bb8c5156c079db">NULL</a> );</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                <a class="code" href="debug_8c.html#ad08eb6f767d5b4723cc5daec65856d19">Debug_Log</a>( <a class="code" href="dev__stx104__ai_8c.html#a6e06a7994dc8e665cea39fa9350d9c87">STX104_AI_DEBUG_LOG</a> <span class="stringliteral">&quot;%s:intra-sample timing must be less than %s seconds\n&quot;</span>, __func__, time_text );</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                error_code = <a class="code" href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914a519f0a0b8e1b0ef796c88029f356ce26">EC_STX104_AI_INTRA_SAMPLE_TIMING_TOO_LARGE_AIBT</a>;   <span class="keywordflow">goto</span> STX104_AI_CFG_Set_Error;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        time_intrasample_ns = STX104_AI_Intra_Sample_Timing_Minimum( cfg );</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="keywordflow">if</span> ( ( intrasample_time_sec * 1.0e9 <span class="comment">/* convert to nSec */</span> ) &lt; time_intrasample_ns )</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="preprocessor">#if defined( STX104_AI_DEBUG )</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                <span class="keywordtype">char</span> time_text[<a class="code" href="dev__stx104__ai_8c.html#a248f85e2dfe291490d7635c4cec3fc75">STX104_AI_DEBUG_STRING_SIZE</a>];</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                Float_To_String_Multiplier_Suffix( time_intrasample_ns * 1.0e-9 <span class="comment">/* convert to seconds */</span>, time_text, <a class="code" href="dev__stx104__ai_8c.html#a248f85e2dfe291490d7635c4cec3fc75">STX104_AI_DEBUG_STRING_SIZE</a>, <a class="code" href="cmp__i8255m0__readme_8txt.html#a074d4d493edb0d5ac9bb8c5156c079db">NULL</a> );</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                <a class="code" href="debug_8c.html#ad08eb6f767d5b4723cc5daec65856d19">Debug_Log</a>( <a class="code" href="dev__stx104__ai_8c.html#a6e06a7994dc8e665cea39fa9350d9c87">STX104_AI_DEBUG_LOG</a> <span class="stringliteral">&quot;%s:  intra-sample timing (AIBT) needs to be %s or greater\n&quot;</span>, __func__, time_text );</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                error_code = <a class="code" href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914a1e1791c54c7da5fbdab21939e42bca79">EC_STX104_AI_INTRA_SAMPLE_TIMING_TOO_SMALL_AIBT</a>;   <span class="keywordflow">goto</span> STX104_AI_CFG_Set_Error;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        }</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   <span class="comment">/**** frame time calculation ****/</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">/* frame_timer_sec has priority over frame_timer_ns, since frame_timer_ns is deprecated */</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   frame_time_sec = 0.0;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   <span class="keywordflow">if</span> ( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a441a34c0d2fb71d022d1be7d5e68a057">frame_timer_ns</a>  &gt; 0 )</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        frame_time_sec = ((double) cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a441a34c0d2fb71d022d1be7d5e68a057">frame_timer_ns</a> ) * 1.0e-9; <span class="comment">/* convert to seconds */</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   }</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;   <span class="keywordflow">if</span> ( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a2ab7f13dd2a07a6d077a5b6695f7a5d8">frame_timer_sec</a> &gt; 0 )</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        frame_time_sec = cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a2ab7f13dd2a07a6d077a5b6695f7a5d8">frame_timer_sec</a>;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;   }</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;   time_ns = ( ((double) (<a class="code" href="pstdint_8h.html#ab5eb23180f7cc12b7d6c04a8ec067fdd">UINT32_MAX</a> - 1)) * <a class="code" href="dev__stx104_8h.html#a77048f06424498b2c8ce42c9689b96ff">STX104_CLOCK_RESOLUTION_NS</a> );</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;   time_sec = time_ns * 1.0e-9; <span class="comment">/* convert to sectonds */</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   <span class="keywordflow">if</span> ( frame_time_sec &gt; time_sec )</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="preprocessor">#if defined( STX104_AI_DEBUG )</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                <span class="keywordtype">char</span> time_text[<a class="code" href="dev__stx104__ai_8c.html#a248f85e2dfe291490d7635c4cec3fc75">STX104_AI_DEBUG_STRING_SIZE</a>];</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                Float_To_String_Multiplier_Suffix( time_sec, time_text, <a class="code" href="dev__stx104__ai_8c.html#a248f85e2dfe291490d7635c4cec3fc75">STX104_AI_DEBUG_STRING_SIZE</a>, <a class="code" href="cmp__i8255m0__readme_8txt.html#a074d4d493edb0d5ac9bb8c5156c079db">NULL</a> );</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                <a class="code" href="debug_8c.html#ad08eb6f767d5b4723cc5daec65856d19">Debug_Log</a>( <a class="code" href="dev__stx104__ai_8c.html#a6e06a7994dc8e665cea39fa9350d9c87">STX104_AI_DEBUG_LOG</a> <span class="stringliteral">&quot;%s: frame timing must be less than %s seconds\n&quot;</span>, __func__, time_text );</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                error_code = <a class="code" href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914a519f0a0b8e1b0ef796c88029f356ce26">EC_STX104_AI_INTRA_SAMPLE_TIMING_TOO_LARGE_AIBT</a>;   <span class="keywordflow">goto</span> STX104_AI_CFG_Set_Error;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   }</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        time_ns = ( (double) (cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a27bd4a57a825cd48de08ee8cfc4b34c4">last_channel</a> - cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a6a1ba9d240dc60e634609ded84e124c1">first_channel</a> + 1) ) * time_intrasample_ns; <span class="comment">/* previous calculated intra-sample time */</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">if</span> ( ( frame_time_sec * 1.0e9 <span class="comment">/* convert to nSec */</span> ) &lt; time_ns )</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="preprocessor">#if defined( STX104_AI_DEBUG )</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                <span class="keywordtype">char</span> time_text[<a class="code" href="dev__stx104__ai_8c.html#a248f85e2dfe291490d7635c4cec3fc75">STX104_AI_DEBUG_STRING_SIZE</a>];</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                Float_To_String_Multiplier_Suffix( time_ns * 1.0e-9 <span class="comment">/* convert to seconds */</span>, time_text, <a class="code" href="dev__stx104__ai_8c.html#a248f85e2dfe291490d7635c4cec3fc75">STX104_AI_DEBUG_STRING_SIZE</a>, <a class="code" href="cmp__i8255m0__readme_8txt.html#a074d4d493edb0d5ac9bb8c5156c079db">NULL</a> );</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                <a class="code" href="debug_8c.html#ad08eb6f767d5b4723cc5daec65856d19">Debug_Log</a>( <a class="code" href="dev__stx104__ai_8c.html#a6e06a7994dc8e665cea39fa9350d9c87">STX104_AI_DEBUG_LOG</a> <span class="stringliteral">&quot;%s: frame timing (AIFT) needs to be %s or greater\n&quot;</span>, __func__, time_text );</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                error_code = <a class="code" href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914ace1b51428cb5213d57d8f7bc1143018c">EC_STX104_AI_FRAME_TIMING_TOO_SMALL_AIFT</a>;  <span class="keywordflow">goto</span> STX104_AI_CFG_Set_Error;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        }</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">        if ( device_allocation[board].interrupt_active )</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">        {</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">                AUL_Error_Log(&quot;STX104_AI_CFG_SET: Error - interrupt active, cannot commit configuration.\n&quot; );</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">                error_code = EC_STX104_DEVICE_CFG_UNAVAILABLE_INTERRUPT_ACTIVE;</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">        }</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">        else</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">        {</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">                */</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">/*ai_time_intra_sample_ns = AIBT * ( 25 nSec ) + ( 5000 nSec ). ==&gt; AIBT = ( ai_time_intra_sample_ns - ( 5000 nSec ) ) / ( 25 nSec )*/</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        time_reg =  (uint32_t) ( ( ( intrasample_time_sec * 1.0e9 <span class="comment">/* convert to nSec */</span> ) - <a class="code" href="dev__stx104_8h.html#ae782f2059bddc14a86d37dbaebb7ef22">STX104_AI_INTRA_SAMPLE_TIME_MIN_NS</a> ) / <a class="code" href="dev__stx104_8h.html#a77048f06424498b2c8ce42c9689b96ff">STX104_CLOCK_RESOLUTION_NS</a> );</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <a class="code" href="dev__stx104__index_8c.html#ac83644d7df9235481b8542606befed8b">STX104_Index_Write_U32</a>( board, STX104_ANALOG_INPUT_BURST_TIMER, time_reg );</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">/*ai_time_frame_ns = ( AIFT + 1 ) * ( 25 nSec ) ==&gt;   AIFT = (ai_time_frame_ns / ( 25 nS)) - 1*/</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        time_reg = (uint32_t) ( ( ( frame_time_sec * 1.0e9 <span class="comment">/* convert to nSec */</span> ) - <a class="code" href="dev__stx104_8h.html#a77048f06424498b2c8ce42c9689b96ff">STX104_CLOCK_RESOLUTION_NS</a> ) / <a class="code" href="dev__stx104_8h.html#a77048f06424498b2c8ce42c9689b96ff">STX104_CLOCK_RESOLUTION_NS</a> );</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <a class="code" href="dev__stx104__index_8c.html#ac83644d7df9235481b8542606befed8b">STX104_Index_Write_U32</a>( board, STX104_ANALOG_INPUT_FRAME_TIMER, time_reg );</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <a class="code" href="dev__stx104__index_8c.html#ac83644d7df9235481b8542606befed8b">STX104_Index_Write_U32</a>( board, STX104_ANALOG_INPUT_FRAME_MAX, cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a4167c018e12490d06e32f811750c0892">frame_maximum</a> );</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="comment">/* gain */</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        address = device-&gt;<a class="code" href="structdevmgr__device.html#ac87a4a56710bf75574db36ba09b99a4b">io_region_offset</a> + STX104_ADC_CONFIGURATION;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <a class="code" href="io_8h.html#adaaaa38c3f5e4cc997280db7f1596c61">IO_Read_U8</a>( device-&gt;<a class="code" href="structdevmgr__device.html#a41c55b0af4fc2ee048aed49ea5511728">io_device</a>, address, &amp;reg_value );</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        reg_value = ( reg_value &amp; 0xFC ) | ( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a4ca8b26238d3ac1107e8981dfeed7c2e">gain</a> &amp; 0x03 );</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <a class="code" href="io_8h.html#a38109c7302f062985560ffcfd788540e">IO_Write_U8</a>( device-&gt;<a class="code" href="structdevmgr__device.html#a41c55b0af4fc2ee048aed49ea5511728">io_device</a>, address, reg_value );</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="comment">/* save unipolar value */</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="keywordflow">if</span> ( jumpers.<a class="code" href="structstx104__gen__jmp.html#af201b15f5592c97935f373af7c9d4e22">J9_ai_unipolar</a> ) </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                ds-&gt;<a class="code" href="structstx104__dataset.html#a66f91d29b3cdfc4693449caa1b98f666">ai_unipolar</a> = 1;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                ds-&gt;<a class="code" href="structstx104__dataset.html#a70dc42bf4f38ac72c8967caf502e5110">ai_gain</a>     = ( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a4ca8b26238d3ac1107e8981dfeed7c2e">gain</a> &amp; 0x03 ) + 0x04;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        }</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="keywordflow">else</span>                          </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                ds-&gt;<a class="code" href="structstx104__dataset.html#a66f91d29b3cdfc4693449caa1b98f666">ai_unipolar</a> = 0;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                ds-&gt;<a class="code" href="structstx104__dataset.html#a70dc42bf4f38ac72c8967caf502e5110">ai_gain</a>     = ( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a4ca8b26238d3ac1107e8981dfeed7c2e">gain</a> &amp; 0x03 );</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <span class="comment">/* HSFIFOEN */</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="keywordflow">if</span> ( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a025bf5a6626f5570b635195f21781133">high_speed_pre_queue_fifo</a> != <span class="keyword">false</span> )   reg_value = 0x80;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   <span class="keywordflow">else</span>                                             reg_value = 0x00; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <a class="code" href="dev__stx104__index_8c.html#a1f11f790ff5ae638e636210e4d56bfd2">STX104_Index_Write_U8</a>( board, STX104_FIFO_CONFIGURATION, reg_value );</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="comment">/* moving average filter - MAVG_INV</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">      moving average jumper position is M3</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">      Desire jumper to be a &#39;1&#39; or set or enable moving average filter</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">      jumper  mavg_inv   mavg_in (new)</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">         0      0          1   &lt;-- invert to set</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">         0      1          0   &lt;-- invert to set</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">         1      0          0   &lt;-- no change</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">         1      1          1   &lt;-- no change</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">      Desire jumper to be a &#39;0&#39; or clear or disable moving average filter</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">      jumper  mavg_inv   mavg_in (new)</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">         0      0          0   &lt;-- no change</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">         0      1          1   &lt;-- no change</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">         1      0          1   &lt;-- invert to set</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">         1      1          0   &lt;-- invert to set</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">      In summary, set to the same existing value, then only change if</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">      required.</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   scratch_uint16 = <a class="code" href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4a92eb339c6a044594fe396a59fa639a5f">STX104_AIGC_MAVG_IN</a> &amp; ai_general_cfg_reg; <span class="comment">/* set to existing value */</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="keywordflow">if</span> ( <span class="keyword">false</span> == cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#af648965637ee8c023d645cd77f6971d7">moving_average_filter</a> )</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        {</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                <span class="keywordflow">if</span> ( <span class="keyword">false</span> != jumpers.<a class="code" href="structstx104__gen__jmp.html#a81ad7c9a1953babfbb01d958b0dd37a3">M3_moving_average_filter</a> )</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;         <span class="keywordflow">if</span> ( <a class="code" href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4a92eb339c6a044594fe396a59fa639a5f">STX104_AIGC_MAVG_IN</a> &amp; ai_general_cfg_reg )</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;         { <span class="comment">/* is set, so clear it */</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            scratch_uint16 = ((uint16_t) ~<a class="code" href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4a92eb339c6a044594fe396a59fa639a5f">STX104_AIGC_MAVG_IN</a>)&amp; ai_general_cfg_reg;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;         }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;         <span class="keywordflow">else</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;         { <span class="comment">/* is clear, so set it */</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            scratch_uint16 = ((uint16_t) <a class="code" href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4a92eb339c6a044594fe396a59fa639a5f">STX104_AIGC_MAVG_IN</a>) | ai_general_cfg_reg;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;         }</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      }</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        }</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                <span class="keywordflow">if</span> ( <span class="keyword">false</span> == jumpers.<a class="code" href="structstx104__gen__jmp.html#a81ad7c9a1953babfbb01d958b0dd37a3">M3_moving_average_filter</a> )</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;         <span class="keywordflow">if</span> ( <a class="code" href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4a92eb339c6a044594fe396a59fa639a5f">STX104_AIGC_MAVG_IN</a> &amp; ai_general_cfg_reg )</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;         { <span class="comment">/* is set, so clear it */</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            scratch_uint16 = ((uint16_t) ~<a class="code" href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4a92eb339c6a044594fe396a59fa639a5f">STX104_AIGC_MAVG_IN</a>) &amp; ai_general_cfg_reg;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;         }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;         <span class="keywordflow">else</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;         { <span class="comment">/* is clear, so set it */</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            scratch_uint16 =  ((uint16_t) <a class="code" href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4a92eb339c6a044594fe396a59fa639a5f">STX104_AIGC_MAVG_IN</a>) | ai_general_cfg_reg;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;         }</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      }</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        }</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <span class="comment">/* sync_aift_to_trigger_start - SAIFTTS  */</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">if</span> ( <span class="keyword">false</span> != cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a3fecbcdb57bf5d00a06476b69d19c352">sync_aift_to_trigger_start</a> ) scratch_uint16 |= <a class="code" href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4aa492943364bbc3054cb855e4ce962211">STX104_AIGC_SAIFTTS</a>;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <span class="comment">/* sync_aifc_to_trigger_start - SAIFCTS */</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <span class="keywordflow">if</span> ( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a0b0c14afaa936b710ca5eaea6ce5fd56">sync_aifc_to_trigger_start</a> != <span class="keyword">false</span> ) scratch_uint16 |= <a class="code" href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4af5911bbdb47517ce96e2b444ad2f4997">STX104_AIGC_SAIFCTS</a>;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="comment">/* use_triggering_subsystem - nSGATE  */</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <span class="keywordflow">if</span> ( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#ad87797a90fa1390b2fc82cca7701f3aa">use_triggering_subsystem</a> != <span class="keyword">false</span> )   scratch_uint16 |= <a class="code" href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4a252ee47968d37980f5206eb961c30a59">STX104_AIGC_nSGATE</a>;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <span class="comment">/* strobe_source */</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        scratch_uint16 |= (uint16_t)( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#ae45a91e719864f8383024407b78bb335">strobe_source</a> &amp; <a class="code" href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4abaf574e581a6ad25d13a0fbb7fdb60c5">STX104_AIGC_AISS</a> );</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <a class="code" href="group__stx104__general.html#gab1f67b00c1bedbf10b24805514dcbb41">STX104_Gen_Revision_Get</a>( board, &amp;firmware_revision );</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment">/*   device_allocation[board].reg_store[STX104_FIRMWARE_REVISION].word[0] = firmware_revision;*/</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        ds-&gt;<a class="code" href="structstx104__dataset.html#a22c3e78abe64eef97d61ee1d1a48539f">firmware_revision</a> = firmware_revision;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="keywordflow">if</span> ( firmware_revision &gt;= <a class="code" href="dev__stx104_8h.html#aaf8fd5f0e57d456151c951e0f3715fc4a3a1c939dc6a6f113dca0998fa7611abe">STX104_REVISION_120328</a> )</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        { <span class="comment">/* assign these parameters as well */</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      uint16_t scratch;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                <span class="keywordflow">switch</span>( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#aee7c159595ba53bc905161dab996497e">encoding</a> )</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="dev__stx104_8h.html#ad3e045c0693497b94c45f09cd4faeb0bae9efeaec3a327083c93a100f249de769">AI_ENCODING_STRAIGHT_BINARY</a>:                 <span class="comment">/* AI_ENCODE=&#39;0&#39; AI_ENCODE_BEHAVIOR[1:0] = &quot;00&quot; */</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="dev__stx104_8h.html#ad3e045c0693497b94c45f09cd4faeb0bae06609c8226911f76e3861fff60dfffb">AI_ENCODING_STRAIGHT_BINARY_ALLOW_POLARITY</a>:  <span class="comment">/* AI_ENCODE=&#39;0&#39; AI_ENCODE_BEHAVIOR[1:0] = &quot;01&quot; */</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="dev__stx104_8h.html#ad3e045c0693497b94c45f09cd4faeb0ba653e95265393be3669a535327442ad50">AI_ENCODING_TWOS_COMPLEMENT</a>:                 <span class="comment">/* AI_ENCODE=&#39;1&#39; AI_ENCODE_BEHAVIOR[1:0] = &quot;00&quot; */</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="dev__stx104_8h.html#ad3e045c0693497b94c45f09cd4faeb0bacc171c19c087357ef9f6ae1ce5463254">AI_ENCODING_TWOS_COMPLEMENT_ALLOW_POLARITY</a>:  <span class="comment">/* AI_ENCODE=&#39;1&#39; AI_ENCODE_BEHAVIOR[1:0] = &quot;01&quot; */</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="dev__stx104_8h.html#ad3e045c0693497b94c45f09cd4faeb0ba0bdacfe2d0e618c6a96c308c50895c61">AI_ENCODING_TWOS_COMPLEMENT_ABSOLUTE</a>:        <span class="comment">/* AI_ENCODE=&#39;1&#39; AI_ENCODE_BEHAVIOR[1:0] = &quot;10&quot; */</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                                scratch = (uint16_t) cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#aee7c159595ba53bc905161dab996497e">encoding</a>;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment">/*                              AUL_Error_Log(&quot;STX104_AI_CFG_SET: Error - unknown encoding value out of range.\n&quot; );*/</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                                error_code = <a class="code" href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914a0011bfa8ec4cd81596596bed8f526eb7">EC_STX104_AI_ENCODING_OUT_OF_RANGE</a>;        <span class="keywordflow">goto</span> STX104_AI_CFG_Set_Error;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                }</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                scratch_uint16 |= (scratch &lt;&lt; <a class="code" href="dev__stx104_8h.html#ae4d5251432e1a9e6803c0240cc492e18a27947cd6663432e6cd407bd4d0eb086a">STX104_AI_AIGC_ENCODE_SHIFT</a>);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                <a class="code" href="dev__stx104__index_8c.html#ac5955d5cf8b4570a982ce219c40e2a2f">STX104_Index_Write_U16</a>( board, STX104_ANALOG_INPUT_GENERAL_CONFIG, scratch_uint16 );</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <span class="comment">/* save the updated value */</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                ds-&gt;<a class="code" href="structstx104__dataset.html#a4c564a6e4ba1b875a532fdf125b4a44a">ai_general_config_reg</a> = scratch_uint16;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                <span class="comment">/* polarity register */</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                scratch_uint16 = 0;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      index = <a class="code" href="dev__stx104_8h.html#a4d98473c80070f2a4af519dcfd107840">STX104_AI_QTY</a>;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <span class="keywordflow">do</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;         index--;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;         scratch_uint16 = scratch_uint16 &lt;&lt; 1;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;         <span class="keywordflow">if</span> ( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a5c82425b95181ab4b1834bf1872ac522">polarity</a>[index] ) scratch_uint16 |= 0x0001;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      } <span class="keywordflow">while</span> ( index != 0 );</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      <span class="comment">/* commit the updated value to hardware */</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                <a class="code" href="dev__stx104__index_8c.html#ac5955d5cf8b4570a982ce219c40e2a2f">STX104_Index_Write_U16</a>( board, STX104_ANALOG_INPUT_POLARITY_CONFIG, scratch_uint16 );</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      <span class="comment">/* save the updated value */</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                ds-&gt;<a class="code" href="structstx104__dataset.html#aa5ab273e6827ca05d11875fe0972252e">ai_polarity_config</a> = scratch_uint16; </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        }</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                <a class="code" href="dev__stx104__index_8c.html#a1f11f790ff5ae638e636210e4d56bfd2">STX104_Index_Write_U8</a>( board, STX104_ANALOG_INPUT_GENERAL_CONFIG, ((uint8_t)(scratch_uint16 &amp; 0x00FF)) );</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      <span class="comment">/* save the updated value */</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                ds-&gt;<a class="code" href="structstx104__dataset.html#a4c564a6e4ba1b875a532fdf125b4a44a">ai_general_config_reg</a> = scratch_uint16;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        }</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">/*TODO:</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment"> 1. when AI is put in run mode, the channel register needs to be written.*/</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        <span class="comment">/* turn on burst mode */</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <a class="code" href="dev__stx104__index_8c.html#a1f11f790ff5ae638e636210e4d56bfd2">STX104_Index_Write_U8</a>( board, STX104_BURST_FUNCTION_ENABLE_INDEXED, 0x40 ); <span class="comment">/* enable DAS1602 functionality */</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        <a class="code" href="dev__stx104__index_8c.html#a1f11f790ff5ae638e636210e4d56bfd2">STX104_Index_Write_U8</a>( board, STX104_BURST_MODE_ENABLE_INDEXED,     0x40 ); <span class="comment">/* enable ADC-burst sampling    */</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <a class="code" href="dev__stx104__index_8c.html#a1f11f790ff5ae638e636210e4d56bfd2">STX104_Index_Write_U8</a>( board, STX104_CONVERSION_DISABLE_INDEXED,    0x00 ); <span class="comment">/* ADC conversions enabled      */</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        reg_value = ( (cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a27bd4a57a825cd48de08ee8cfc4b34c4">last_channel</a> &amp; 0x0F) - (cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a6a1ba9d240dc60e634609ded84e124c1">first_channel</a> &amp; 0x0F) ) &lt;&lt; 4;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        address = device-&gt;<a class="code" href="structdevmgr__device.html#ac87a4a56710bf75574db36ba09b99a4b">io_region_offset</a> + STX104_PACER_CLOCK_CONTROL;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        ds-&gt;<a class="code" href="structstx104__dataset.html#acbfa9e00a621bd8fc43a73769345952a">ai_pacer_clock_control_shadow_copy</a>;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <a class="code" href="io_8h.html#a38109c7302f062985560ffcfd788540e">IO_Write_U8</a>( device-&gt;<a class="code" href="structdevmgr__device.html#a41c55b0af4fc2ee048aed49ea5511728">io_device</a>, address, reg_value );</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="comment">/* store the channel register for sample start up sequencing */</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        reg_value = ( (cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a27bd4a57a825cd48de08ee8cfc4b34c4">last_channel</a> &amp; 0x0F) &lt;&lt; 4 ) | ( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a6a1ba9d240dc60e634609ded84e124c1">first_channel</a> &amp; 0x0F );</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        ds-&gt;<a class="code" href="structstx104__dataset.html#ad69ca97eb420cdae95db2ece427334fd">ai_channel_reg</a> = reg_value;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        channels_per_frame = (uint16_t) ( cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a27bd4a57a825cd48de08ee8cfc4b34c4">last_channel</a> - cfg-&gt;<a class="code" href="structstx104__ai__cfg.html#a6a1ba9d240dc60e634609ded84e124c1">first_channel</a> + 1 );</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        ds-&gt;<a class="code" href="structstx104__dataset.html#ab8545036090889b776c00dbaaab465d4">ai_channels_per_frame</a> = channels_per_frame; </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        address = device-&gt;<a class="code" href="structdevmgr__device.html#ac87a4a56710bf75574db36ba09b99a4b">io_region_offset</a> + STX104_CHANNEL;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        <a class="code" href="io_8h.html#a38109c7302f062985560ffcfd788540e">IO_Write_U8</a>( device-&gt;<a class="code" href="structdevmgr__device.html#a41c55b0af4fc2ee048aed49ea5511728">io_device</a>, address, reg_value );</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;STX104_AI_CFG_Set_Error:</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <span class="keywordflow">if</span> ( error_code &lt; 0 ) error_code = -error_code;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <a class="code" href="error_8c.html#a1982669e1c73773f3412a213aedd0e20">Error_Log</a>( <a class="code" href="dev__stx104_8h.html#a8368cb3a30699c3047fa477d488831ae">DEVICE_STX104_NAME</a>, __func__, __LINE__, error_code );</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <span class="keywordflow">return</span> -error_code;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;}</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment">/**********************************************************************************************************/</span><span class="comment">/**</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment">@ingroup stx104_ai</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment">\brief</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment">Apex Universal Library STX104 specific function that retrieves the number of available analog input samples remaining for readout within the FIFO.</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment">\param[in] board The descriptor obtained from the function ::AUL_Device_Open. </span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">\param[out]  fifo_count Pointer to an unsigned 32-bit variable which upon return will contain the quantity of analog input samples available in the FIFO. The value can range from 0 to 1,048,576 samples; up to 1,050,624 samples when high_speed_pre_queue_fifo is set true). </span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment">\return An error code of type int is returned. If successful, returns 0 (SUCCESS), otherwise it returns a non-zero error code. Please refer to ::AUL_STATUS_ENUM for all the possible error codes.</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00708"></a><span class="lineno"><a class="line" href="group__stx104__ai.html#ga372a2ad82e94176a064c7c3c59330aff">  708</a></span>&#160;<a class="code" href="callconv_8h.html#a1f2b063e3f098ffc4ebf64a777c76843">AUL_DLL_API</a> <span class="keywordtype">int</span> <a class="code" href="callconv_8h.html#ab86054f7a6ff3a2238edc182b26b603e">AULCALLCONV</a> <a class="code" href="group__stx104__ai.html#ga372a2ad82e94176a064c7c3c59330aff">STX104_AI_FIFO_Data_Count_Get</a>( <span class="keywordtype">int</span> board, uint32_t* fifo_count )</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;{</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="keywordtype">int</span>                                                     error_code;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <a class="code" href="structdevmgr__device.html">devmgr_device_type</a> *                            device;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="aul__status__enum_8h.html#a99fb83031ce9923c84392b4e92f956b5ac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a> != ( error_code = <a class="code" href="aul_8c.html#af8e9fd36526f3c41cb7616a9b9c28f9e">AUL_Board</a>( board, &amp;device ) ) ) <span class="keywordflow">goto</span> STX104_AI_FIFO_Data_Count_Get_Error;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <a class="code" href="dev__stx104__index_8c.html#a9a18ae67ccd6b49249ed76a925733a85">STX104_Index_Read_U32</a>( board, STX104_FIFO_DATA_AVAILABLE,   fifo_count );       </div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;STX104_AI_FIFO_Data_Count_Get_Error:</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <span class="keywordflow">if</span> ( error_code &lt; 0 ) error_code = -error_code;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <a class="code" href="error_8c.html#a1982669e1c73773f3412a213aedd0e20">Error_Log</a>( <a class="code" href="dev__stx104_8h.html#a8368cb3a30699c3047fa477d488831ae">DEVICE_STX104_NAME</a>, __func__, __LINE__, error_code );</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <span class="keywordflow">return</span> -error_code;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;}</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">/**********************************************************************************************************/</span><span class="comment">/**</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">@ingroup stx104_ai</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">\brief</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">Apex Universal Library STX104 specific function that retrieves the number of analog input frames that have been collected irrespective of any analog data that has been read out.</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment">\param[in] board The descriptor obtained from the function ::AUL_Device_Open. </span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">\param[out]  frame_count Pointer to an unsigned 32-bit variable which upon return will contain the quantity of analog input frames that have been collected. The range is 0 to 2,147,483,647. </span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">\return An error code of type int is returned. If successful, returns 0 (SUCCESS), otherwise it returns a non-zero error code. Please refer to ::AUL_STATUS_ENUM for all the possible error codes.</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00729"></a><span class="lineno"><a class="line" href="group__stx104__ai.html#ga3cb7f2a8e5193f0c46522119d79af5dd">  729</a></span>&#160;<a class="code" href="callconv_8h.html#a1f2b063e3f098ffc4ebf64a777c76843">AUL_DLL_API</a> <span class="keywordtype">int</span> <a class="code" href="callconv_8h.html#ab86054f7a6ff3a2238edc182b26b603e">AULCALLCONV</a> <a class="code" href="group__stx104__ai.html#ga3cb7f2a8e5193f0c46522119d79af5dd">STX104_AI_Frame_Count_Get</a>( <span class="keywordtype">int</span> board, uint32_t* frame_count )</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;{</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="keywordtype">int</span>                                                     error_code;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        <a class="code" href="structdevmgr__device.html">devmgr_device_type</a> *                            device;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="aul__status__enum_8h.html#a99fb83031ce9923c84392b4e92f956b5ac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a> != ( error_code = <a class="code" href="aul_8c.html#af8e9fd36526f3c41cb7616a9b9c28f9e">AUL_Board</a>( board, &amp;device ) ) ) <span class="keywordflow">goto</span> STX104_AI_Frame_Count_Get_Error;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <a class="code" href="dev__stx104__index_8c.html#a9a18ae67ccd6b49249ed76a925733a85">STX104_Index_Read_U32</a>( board, STX104_ANALOG_INPUT_FRAME_COUNT, frame_count );   </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;STX104_AI_Frame_Count_Get_Error:</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <span class="keywordflow">if</span> ( error_code &lt; 0 ) error_code = -error_code;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <a class="code" href="error_8c.html#a1982669e1c73773f3412a213aedd0e20">Error_Log</a>( <a class="code" href="dev__stx104_8h.html#a8368cb3a30699c3047fa477d488831ae">DEVICE_STX104_NAME</a>, __func__, __LINE__, error_code );</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="keywordflow">return</span> -error_code;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;}</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment">/**********************************************************************************************************</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment">TODO:</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">1. pass another parameter that is a &quot;wait until&quot;  or no wait sort of thing.  Block/non-block</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment">2. If data is collected via interrupt, then this copies from the temporary interrupt buffer.</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment">DONE: 3. THERE NEEDS TO BE A FIFO_FULL TEST AND THAT ERROR CODE NEEDS TO BE REPORTED.</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment">4. mmap()??</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment">http://people.ee.ethz.ch/~arkeller/linux/multi/kernel_user_space_howto-8.html</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">/**********************************************************************************************************/</span><span class="comment">/**</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">@ingroup stx104_ai</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">\brief</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">Apex Universal Library STX104 specific function that retrieves up to the number of requested data frames from the STX104 FIFO.</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment">\param[in] board The descriptor obtained from the function ::AUL_Device_Open. </span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">\param[out]  buffer Pointer to the destination buffer. Must be sized to: frame_count_request * sizeof( UINT16 ) </span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">\param[out] frame_count_actual Returns the actual data frame quantity that have been copied to the buffer. </span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">\param[in] frame_count_request Sent to the function to request up to a maximum number of data frames.</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">\return An error code of type int is returned. If successful, returns 0 (SUCCESS), otherwise it returns a non-zero error code. Please refer to ::AUL_STATUS_ENUM for all the possible error codes.</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00762"></a><span class="lineno"><a class="line" href="group__stx104__ai.html#ga18119d620fdf4471a63b931191d72124">  762</a></span>&#160;<a class="code" href="callconv_8h.html#a1f2b063e3f098ffc4ebf64a777c76843">AUL_DLL_API</a> <span class="keywordtype">int</span> <a class="code" href="callconv_8h.html#ab86054f7a6ff3a2238edc182b26b603e">AULCALLCONV</a> <a class="code" href="group__stx104__ai.html#ga18119d620fdf4471a63b931191d72124">STX104_AI_Frames_Get</a>( <span class="keywordtype">int</span> board, uint16_t* buffer, uint16_t* frame_count_actual, uint16_t frame_count_request )</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;{</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <span class="keywordtype">int</span>                                                     error_code;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <a class="code" href="structdevmgr__device.html">devmgr_device_type</a> *                            device;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <a class="code" href="structstx104__dataset.html">stx104_dataset_type</a> *   ds;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <span class="keywordtype">size_t</span>                                          address;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        uint32_t                fifo_count_register;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   <span class="keywordtype">size_t</span>               fifo_count;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="keywordtype">size_t</span>          channels_per_frame;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="keywordtype">size_t</span>          samples_requested;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <span class="keywordtype">size_t</span>          frames_requested;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        uint8_t         fifo_status;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="aul__status__enum_8h.html#a99fb83031ce9923c84392b4e92f956b5ac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a> != ( error_code = <a class="code" href="aul_8c.html#af8e9fd36526f3c41cb7616a9b9c28f9e">AUL_Board</a>( board, &amp;device ) ) ) <span class="keywordflow">goto</span> STX104_AI_Frames_Get_Error;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        ds = (<a class="code" href="structstx104__dataset.html">stx104_dataset_type</a> *) device-&gt;<a class="code" href="structdevmgr__device.html#ad517770dac2061381b2008850ff12e6c">private_data</a>;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        address = device-&gt;<a class="code" href="structdevmgr__device.html#ac87a4a56710bf75574db36ba09b99a4b">io_region_offset</a> + STX104_FIFO_FLAGS;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <a class="code" href="io_8h.html#adaaaa38c3f5e4cc997280db7f1596c61">IO_Read_U8</a>( device-&gt;<a class="code" href="structdevmgr__device.html#a41c55b0af4fc2ee048aed49ea5511728">io_device</a>, address, &amp;fifo_status );</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <span class="keywordflow">if</span> ( fifo_status &amp; 0x20 )</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        {</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="preprocessor">#if defined( STX104_AI_DEBUG )</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                <a class="code" href="debug_8c.html#ad08eb6f767d5b4723cc5daec65856d19">Debug_Log</a>( <a class="code" href="dev__stx104__ai_8c.html#a6e06a7994dc8e665cea39fa9350d9c87">STX104_AI_DEBUG_LOG</a> <span class="stringliteral">&quot;%s: Error - FIFO full\n&quot;</span>, __func__ );</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      *frame_count_actual = 0;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                error_code = <a class="code" href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914a4857a0e9095a18a689e176c7571431f7">EC_STX104_AI_FIFO_FULL</a>;    <span class="keywordflow">goto</span> STX104_AI_Frames_Get_Error;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        }</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                <a class="code" href="dev__stx104__index_8c.html#a9a18ae67ccd6b49249ed76a925733a85">STX104_Index_Read_U32</a>( board, STX104_FIFO_DATA_AVAILABLE, &amp;fifo_count_register );</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      fifo_count = (size_t) fifo_count_register;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                <span class="keywordflow">if</span> ( fifo_count == 0 )</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                        *frame_count_actual = 0;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                        channels_per_frame = ds-&gt;<a class="code" href="structstx104__dataset.html#ab8545036090889b776c00dbaaab465d4">ai_channels_per_frame</a>;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                        samples_requested  = channels_per_frame * frame_count_request;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                        frames_requested   = frame_count_request;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                        <span class="keywordflow">if</span> ( samples_requested &gt; fifo_count )</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                        {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                                frames_requested  = fifo_count / channels_per_frame;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                                samples_requested = frames_requested * channels_per_frame;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                        }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                        *frame_count_actual = (uint16_t) frames_requested;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                        address = device-&gt;<a class="code" href="structdevmgr__device.html#ac87a4a56710bf75574db36ba09b99a4b">io_region_offset</a> + STX104_ADC_DATA;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                        <a class="code" href="io_8h.html#a738842bd809b842226e4e6e9115c3acf">IO_Read_Repeat_U16</a>( device-&gt;<a class="code" href="structdevmgr__device.html#a41c55b0af4fc2ee048aed49ea5511728">io_device</a>, address, buffer, samples_requested ); </div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                }</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        }</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;STX104_AI_Frames_Get_Error:</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <span class="keywordflow">if</span> ( error_code &lt; 0 ) error_code = -error_code;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <a class="code" href="error_8c.html#a1982669e1c73773f3412a213aedd0e20">Error_Log</a>( <a class="code" href="dev__stx104_8h.html#a8368cb3a30699c3047fa477d488831ae">DEVICE_STX104_NAME</a>, __func__, __LINE__, error_code );</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <span class="keywordflow">return</span> -error_code;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;}</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="comment">/**********************************************************************************************************/</span><span class="comment">/**</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="comment">@ingroup stx104_ai</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment">\brief</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="comment">Apex Universal Library STX104 specific function that converts raw ADC data values to voltage returned in a floating point value.</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="comment">The function looks up the current analog input behavior (i.e. bipolar/unipolar and the gain) and converts the raw ADC binary data to a formatted floating point voltage value. </span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="comment">\param[in] board The descriptor obtained from the function ::AUL_Device_Open. </span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="comment">\param[in] raw_value ADC raw value sent to the function to be converted. </span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="comment">\param[out]  voltage Returns the voltage value. </span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment">\return An error code of type int is returned. If successful, returns 0 (SUCCESS), otherwise it returns a non-zero error code. Please refer to ::AUL_STATUS_ENUM for all the possible error codes.</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00830"></a><span class="lineno"><a class="line" href="group__stx104__ai.html#gaa2c26ee8cf96de6e5634821593bafda7">  830</a></span>&#160;<a class="code" href="callconv_8h.html#a1f2b063e3f098ffc4ebf64a777c76843">AUL_DLL_API</a> <span class="keywordtype">int</span> <a class="code" href="callconv_8h.html#ab86054f7a6ff3a2238edc182b26b603e">AULCALLCONV</a> <a class="code" href="group__stx104__ai.html#gaa2c26ee8cf96de6e5634821593bafda7">STX104_AI_Raw_To_Volts</a>( <span class="keywordtype">int</span> board, uint16_t raw_value, <span class="keywordtype">double</span> * voltage )</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;{</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <span class="keywordtype">int</span>                                             error_code;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <a class="code" href="structdevmgr__device.html">devmgr_device_type</a> *    device;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <a class="code" href="structstx104__dataset.html">stx104_dataset_type</a> *   ds;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <span class="keywordtype">int</span>                                             gain_index;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        uint16_t                                firmware_revision;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        uint16_t                                ai_gfr;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        <span class="keywordtype">size_t</span>                                  encoding;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <span class="keywordtype">int</span>                                             twos_complement;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="aul__status__enum_8h.html#a99fb83031ce9923c84392b4e92f956b5ac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a> != ( error_code = <a class="code" href="aul_8c.html#af8e9fd36526f3c41cb7616a9b9c28f9e">AUL_Board</a>( board, &amp;device ) ) ) <span class="keywordflow">goto</span> STX104_AI_Raw_To_Volts_Error;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        ds = (<a class="code" href="structstx104__dataset.html">stx104_dataset_type</a> *) device-&gt;<a class="code" href="structdevmgr__device.html#ad517770dac2061381b2008850ff12e6c">private_data</a>;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        firmware_revision = ds-&gt;<a class="code" href="structstx104__dataset.html#a22c3e78abe64eef97d61ee1d1a48539f">firmware_revision</a>;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        if ( firmware_revision &gt;= <a class="code" href="dev__stx104_8h.html#aaf8fd5f0e57d456151c951e0f3715fc4a3a1c939dc6a6f113dca0998fa7611abe">STX104_REVISION_120328</a> )</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        {</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                ai_gfr     = ds-&gt;<a class="code" href="structstx104__dataset.html#a4c564a6e4ba1b875a532fdf125b4a44a">ai_general_config_reg</a>;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;          encoding   = (size_t) ( ( ai_gfr &amp; ( <a class="code" href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4a6c9605f73534c8689997f31a45275a27">STX104_AIGC_ENCODE</a> | <a class="code" href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4a55d9e3df571b07142063867539f95890">STX104_AIGC_ENCODE_BEHAVIOR</a> ) ) &gt;&gt; <a class="code" href="dev__stx104_8h.html#ae4d5251432e1a9e6803c0240cc492e18a27947cd6663432e6cd407bd4d0eb086a">STX104_AI_AIGC_ENCODE_SHIFT</a> );</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                gain_index = (int) ds-&gt;<a class="code" href="structstx104__dataset.html#a70dc42bf4f38ac72c8967caf502e5110">ai_gain</a>;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                <span class="keywordflow">switch</span>( encoding )</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="dev__stx104_8h.html#ad3e045c0693497b94c45f09cd4faeb0bae9efeaec3a327083c93a100f249de769">AI_ENCODING_STRAIGHT_BINARY</a>:                 <span class="comment">/* AI_ENCODE=&#39;0&#39; AI_ENCODE_BEHAVIOR[1:0] = &quot;00&quot; */</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="dev__stx104_8h.html#ad3e045c0693497b94c45f09cd4faeb0bae06609c8226911f76e3861fff60dfffb">AI_ENCODING_STRAIGHT_BINARY_ALLOW_POLARITY</a>:  <span class="comment">/* AI_ENCODE=&#39;0&#39; AI_ENCODE_BEHAVIOR[1:0] = &quot;01&quot; */</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                        *voltage = ((double) raw_value) * stx104_adc_gain[gain_index] + stx104_adc_offset[gain_index];</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                 <span class="keywordflow">case</span> <a class="code" href="dev__stx104_8h.html#ad3e045c0693497b94c45f09cd4faeb0ba653e95265393be3669a535327442ad50">AI_ENCODING_TWOS_COMPLEMENT</a>:                 <span class="comment">/* AI_ENCODE=&#39;1&#39; AI_ENCODE_BEHAVIOR[1:0] = &quot;00&quot; */</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                 <span class="keywordflow">case</span> <a class="code" href="dev__stx104_8h.html#ad3e045c0693497b94c45f09cd4faeb0bacc171c19c087357ef9f6ae1ce5463254">AI_ENCODING_TWOS_COMPLEMENT_ALLOW_POLARITY</a>:  <span class="comment">/* AI_ENCODE=&#39;1&#39; AI_ENCODE_BEHAVIOR[1:0] = &quot;01&quot; */</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                 <span class="keywordflow">case</span> <a class="code" href="dev__stx104_8h.html#ad3e045c0693497b94c45f09cd4faeb0ba0bdacfe2d0e618c6a96c308c50895c61">AI_ENCODING_TWOS_COMPLEMENT_ABSOLUTE</a>:        <span class="comment">/* AI_ENCODE=&#39;1&#39; AI_ENCODE_BEHAVIOR[1:0] = &quot;10&quot; */</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                        twos_complement = (int)( (<span class="keywordtype">short</span>) raw_value );</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                        *voltage        = ((double) twos_complement) * stx104_adc_gain[gain_index];</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                                <span class="comment">/*AUL_Error_Log(&quot;STX104_AI_CFG_SET: Error - unknown encoding value out of range.\n&quot; );*/</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                                error_code = <a class="code" href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914a0011bfa8ec4cd81596596bed8f526eb7">EC_STX104_AI_ENCODING_OUT_OF_RANGE</a>;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                                <span class="keywordflow">goto</span> STX104_AI_Raw_To_Volts_Error;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                }</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        <span class="comment">/*      firmware_revision = device_allocation[board].reg_store[STX104_REG_STORE_AI_POLARITY_CONFIG].word[0];*/</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                firmware_revision = ds-&gt;<a class="code" href="structstx104__dataset.html#aa5ab273e6827ca05d11875fe0972252e">ai_polarity_config</a>;  <span class="comment">/*TODO:  makes not sense!!!!!*/</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        }</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        {</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                gain_index = (int) ds-&gt;<a class="code" href="structstx104__dataset.html#a70dc42bf4f38ac72c8967caf502e5110">ai_gain</a>; <span class="comment">/*device_allocation[board].reg_store[STX104_REG_STORE_AI_GAIN].byte[0];*/</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                *voltage = ((<span class="keywordtype">double</span>) raw_value) * stx104_adc_gain[gain_index] + stx104_adc_offset[gain_index];</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        }</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">/*printf( &quot;STX104_AI_Raw_To_Volts index=%d\n&quot;, index );</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">                *voltage = 0.0;</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">TODO:</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment"> 1. Provide a mechanism for software calibration y=mx+b</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">        */</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        error_code = <a class="code" href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914ab4ed0d45593bfeb89e8504f0a5db13da">EC_STX104_AI_UNCALIBRATED_CONVERSION_WARNING</a>;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;STX104_AI_Raw_To_Volts_Error:</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="keywordflow">if</span> ( error_code &lt; 0 ) error_code = -error_code;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        <a class="code" href="error_8c.html#a1982669e1c73773f3412a213aedd0e20">Error_Log</a>( <a class="code" href="dev__stx104_8h.html#a8368cb3a30699c3047fa477d488831ae">DEVICE_STX104_NAME</a>, __func__, __LINE__, error_code );</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="keywordflow">return</span> -error_code;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;}</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment">/**********************************************************************************************************/</span><span class="comment">/**</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment">@ingroup stx104_ai</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">\brief</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment">Apex Universal Library STX104 specific function that performs an analog input strobe or frame request operation.</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment">\param[in] board The descriptor obtained from the function ::AUL_Device_Open. </span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment">\return An error code of type int is returned. If successful, returns 0 (SUCCESS), otherwise it returns a non-zero error code. Please refer to ::AUL_STATUS_ENUM for all the possible error codes.</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00896"></a><span class="lineno"><a class="line" href="group__stx104__ai.html#ga6a1285e27e6672f9c1b0abf7ac9c5849">  896</a></span>&#160;<a class="code" href="callconv_8h.html#a1f2b063e3f098ffc4ebf64a777c76843">AUL_DLL_API</a> <span class="keywordtype">int</span> <a class="code" href="callconv_8h.html#ab86054f7a6ff3a2238edc182b26b603e">AULCALLCONV</a> <a class="code" href="group__stx104__ai.html#ga6a1285e27e6672f9c1b0abf7ac9c5849">STX104_AI_Strobe</a>( <span class="keywordtype">int</span> board )</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;{</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        <span class="keywordtype">int</span>                                                     error_code;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <a class="code" href="structdevmgr__device.html">devmgr_device_type</a> *            device;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <span class="keywordtype">size_t</span>                                          address;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="aul__status__enum_8h.html#a99fb83031ce9923c84392b4e92f956b5ac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a> != ( error_code = <a class="code" href="aul_8c.html#af8e9fd36526f3c41cb7616a9b9c28f9e">AUL_Board</a>( board, &amp;device ) ) ) <span class="keywordflow">goto</span> STX104_AI_Strobe_Error;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        address = device-&gt;<a class="code" href="structdevmgr__device.html#ac87a4a56710bf75574db36ba09b99a4b">io_region_offset</a> + STX104_SOFTWARE_STROBE;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <a class="code" href="io_8h.html#a38109c7302f062985560ffcfd788540e">IO_Write_U8</a>( device-&gt;<a class="code" href="structdevmgr__device.html#a41c55b0af4fc2ee048aed49ea5511728">io_device</a>, address, 0x00 );</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;STX104_AI_Strobe_Error:</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        <span class="keywordflow">if</span> ( error_code &lt; 0 ) error_code = -error_code;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        <a class="code" href="error_8c.html#a1982669e1c73773f3412a213aedd0e20">Error_Log</a>( <a class="code" href="dev__stx104_8h.html#a8368cb3a30699c3047fa477d488831ae">DEVICE_STX104_NAME</a>, __func__, __LINE__, error_code );</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        <span class="keywordflow">return</span> -error_code;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;}</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="comment">/**********************************************************************************************************/</span><span class="comment">/**</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="comment">@ingroup stx104_ai</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">\brief</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment">Apex Universal Library STX104 specific function that read/writes to channel register to restart the acquisition and clear the FIFO.</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">\param[in] board The descriptor obtained from the function ::AUL_Device_Open. </span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment">\return An error code of type int is returned. If successful, returns 0 (SUCCESS), otherwise it returns a non-zero error code. Please refer to ::AUL_STATUS_ENUM for all the possible error codes.</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00919"></a><span class="lineno"><a class="line" href="group__stx104__ai.html#ga37d8a1070e40af9eb5c997bdefc600df">  919</a></span>&#160;<a class="code" href="callconv_8h.html#a1f2b063e3f098ffc4ebf64a777c76843">AUL_DLL_API</a> <span class="keywordtype">int</span> <a class="code" href="callconv_8h.html#ab86054f7a6ff3a2238edc182b26b603e">AULCALLCONV</a> <a class="code" href="group__stx104__ai.html#ga37d8a1070e40af9eb5c997bdefc600df">STX104_AI_Aquisition_Restart</a>( <span class="keywordtype">int</span> board )</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;{</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        <span class="keywordtype">int</span>                                                     error_code;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <a class="code" href="structdevmgr__device.html">devmgr_device_type</a> *            device;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="keywordtype">size_t</span>                                          address;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        uint8_t                                         channel_register;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="aul__status__enum_8h.html#a99fb83031ce9923c84392b4e92f956b5ac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a> != ( error_code = <a class="code" href="aul_8c.html#af8e9fd36526f3c41cb7616a9b9c28f9e">AUL_Board</a>( board, &amp;device ) ) ) <span class="keywordflow">goto</span> STX104_AI_Aquisition_Restart_Error;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        address = device-&gt;<a class="code" href="structdevmgr__device.html#ac87a4a56710bf75574db36ba09b99a4b">io_region_offset</a> + STX104_CHANNEL;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        <a class="code" href="io_8h.html#adaaaa38c3f5e4cc997280db7f1596c61">IO_Read_U8</a>( device-&gt;<a class="code" href="structdevmgr__device.html#a41c55b0af4fc2ee048aed49ea5511728">io_device</a>, address, &amp;channel_register );</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        <a class="code" href="io_8h.html#a38109c7302f062985560ffcfd788540e">IO_Write_U8</a>( device-&gt;<a class="code" href="structdevmgr__device.html#a41c55b0af4fc2ee048aed49ea5511728">io_device</a>, address, channel_register );</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;STX104_AI_Aquisition_Restart_Error:</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        <span class="keywordflow">if</span> ( error_code &lt; 0 ) error_code = -error_code;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <a class="code" href="error_8c.html#a1982669e1c73773f3412a213aedd0e20">Error_Log</a>( <a class="code" href="dev__stx104_8h.html#a8368cb3a30699c3047fa477d488831ae">DEVICE_STX104_NAME</a>, __func__, __LINE__, error_code );</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        <span class="keywordflow">return</span> -error_code;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;}</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="comment">/**********************************************************************************************************/</span><span class="comment">/**</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="comment">@ingroup  stx104_ai</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="comment">\brief</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment"> Apex Universal Library STX104 analog input specific function</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment">\param[out] config A pointer to the ::tracere_cfg_type structure that will be used to initialize the structure.</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment">\return An error code of type int is returned. If successful, returns 0 (SUCCESS), otherwise it returns a non-zero error code. Please refer to ::AUL_STATUS_ENUM for all the possible error codes.</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00943"></a><span class="lineno"><a class="line" href="group__stx104__ai.html#ga540c0c37670267237ad096336cee349d">  943</a></span>&#160;<a class="code" href="callconv_8h.html#a1f2b063e3f098ffc4ebf64a777c76843">AUL_DLL_API</a> <span class="keywordtype">int</span> <a class="code" href="callconv_8h.html#ab86054f7a6ff3a2238edc182b26b603e">AULCALLCONV</a> <a class="code" href="group__stx104__ai.html#ga540c0c37670267237ad096336cee349d">STX104_AI_Config_Initialize</a>( <a class="code" href="structstx104__ai__cfg.html">stx104_ai_cfg_type</a> * config )</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;{</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        <span class="keywordtype">int</span> error_code;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        <a class="code" href="mem_8c.html#ad87a18d072f1e0baa80eb2de9b6852e6">Mem_Set</a>( config, 0, <span class="keyword">sizeof</span>( <a class="code" href="structstx104__ai__cfg.html">stx104_ai_cfg_type</a> ) );</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        config-&gt;<a class="code" href="structstx104__ai__cfg.html#ad93a61aad34e153b6ff9785c679b340b">type</a> = <a class="code" href="sysval_8h.html#a6d0bb44b4fe99de217b6ebbc218d1ce8">SYS_TYPE_MAKE</a>( <a class="code" href="structstx104__ai__cfg.html">stx104_ai_cfg_type</a> );</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        config-&gt;<a class="code" href="structstx104__ai__cfg.html#a8774c9e2df7261d3f0eed7f28fc3cb63">burst_timer_ns</a> = 5000;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        config-&gt;<a class="code" href="structstx104__ai__cfg.html#a441a34c0d2fb71d022d1be7d5e68a057">frame_timer_ns</a> = 5000;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="aul__status__enum_8h.html#a99fb83031ce9923c84392b4e92f956b5ac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a>;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;STX104_AI_Config_Initialize_Error:</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        <span class="keywordflow">if</span> ( error_code &lt; 0 ) error_code = -error_code;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        <a class="code" href="error_8c.html#a1982669e1c73773f3412a213aedd0e20">Error_Log</a>( <a class="code" href="dev__stx104_8h.html#a8368cb3a30699c3047fa477d488831ae">DEVICE_STX104_NAME</a>, __func__, __LINE__, error_code );</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        <span class="keywordflow">return</span> -error_code;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;}</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">/**********************************************************************************************************</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00962"></a><span class="lineno"><a class="line" href="dev__stx104__ai_8c.html#a02d8dd1e733b30553970fb83d7397eb3">  962</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dev__stx104__ai_8c.html#a02d8dd1e733b30553970fb83d7397eb3">STX104_AI_Termination</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;{</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;}</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="comment">/**********************************************************************************************************</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00967"></a><span class="lineno"><a class="line" href="dev__stx104__ai_8c.html#a3c31fe39a5ce4c93e0194f3ac759da8c">  967</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="dev__stx104__ai_8c.html#a3c31fe39a5ce4c93e0194f3ac759da8c">STX104_AI_Initialization</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;{</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;}</div>
<div class="ttc" id="dev__stx104__index_8c_html_a3996f051686d51075f7ca35a1e8c8a03"><div class="ttname"><a href="dev__stx104__index_8c.html#a3996f051686d51075f7ca35a1e8c8a03">STX104_Index_Read_U16</a></div><div class="ttdeci">void STX104_Index_Read_U16(int board, uint8_t index, uint16_t *value)</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__index_8c_source.html#l00170">dev_stx104_index.c:170</a></div></div>
<div class="ttc" id="group__stx104__ai_html_ga3cb7f2a8e5193f0c46522119d79af5dd"><div class="ttname"><a href="group__stx104__ai.html#ga3cb7f2a8e5193f0c46522119d79af5dd">STX104_AI_Frame_Count_Get</a></div><div class="ttdeci">AUL_DLL_API int AULCALLCONV STX104_AI_Frame_Count_Get(int board, uint32_t *frame_count)</div><div class="ttdoc">Apex Universal Library STX104 specific function that retrieves the number of analog input frames that...</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__ai_8c_source.html#l00729">dev_stx104_ai.c:729</a></div></div>
<div class="ttc" id="aul__status__enum_8h_html_a99fb83031ce9923c84392b4e92f956b5ac7f69f7c9e5aea9b8f54cf02870e2bf8"><div class="ttname"><a href="aul__status__enum_8h.html#a99fb83031ce9923c84392b4e92f956b5ac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="aul__status__enum_8h_source.html#l00008">aul_status_enum.h:8</a></div></div>
<div class="ttc" id="group__stx104__ai_html_ga7f5528e6fb7ac0209ac4d1b68d53cbb5"><div class="ttname"><a href="group__stx104__ai.html#ga7f5528e6fb7ac0209ac4d1b68d53cbb5">STX104_AI_CFG_Set</a></div><div class="ttdeci">AUL_DLL_API int AULCALLCONV STX104_AI_CFG_Set(int board, stx104_ai_cfg_type *cfg)</div><div class="ttdoc">Apex Universal Library STX104 specific function that sets the STX104 analog input (AI) configuration...</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__ai_8c_source.html#l00374">dev_stx104_ai.c:374</a></div></div>
<div class="ttc" id="structstx104__dataset_html_a70dc42bf4f38ac72c8967caf502e5110"><div class="ttname"><a href="structstx104__dataset.html#a70dc42bf4f38ac72c8967caf502e5110">stx104_dataset::ai_gain</a></div><div class="ttdeci">uint8_t ai_gain</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l01067">dev_stx104.h:1067</a></div></div>
<div class="ttc" id="structstx104__gen__jmp_html_a0296f8201b216f816624c0dd04e7ae80"><div class="ttname"><a href="structstx104__gen__jmp.html#a0296f8201b216f816624c0dd04e7ae80">stx104_gen_jmp::M0_mode</a></div><div class="ttdeci">BOOL M0_mode</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00298">dev_stx104.h:298</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_a73847839f3d0b5c51aaf8efc8d436bb4abaf574e581a6ad25d13a0fbb7fdb60c5"><div class="ttname"><a href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4abaf574e581a6ad25d13a0fbb7fdb60c5">STX104_AIGC_AISS</a></div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00184">dev_stx104.h:184</a></div></div>
<div class="ttc" id="group__stx104__ai_html_ga372a2ad82e94176a064c7c3c59330aff"><div class="ttname"><a href="group__stx104__ai.html#ga372a2ad82e94176a064c7c3c59330aff">STX104_AI_FIFO_Data_Count_Get</a></div><div class="ttdeci">AUL_DLL_API int AULCALLCONV STX104_AI_FIFO_Data_Count_Get(int board, uint32_t *fifo_count)</div><div class="ttdoc">Apex Universal Library STX104 specific function that retrieves the number of available analog input s...</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__ai_8c_source.html#l00708">dev_stx104_ai.c:708</a></div></div>
<div class="ttc" id="dev__stx104__ai_8c_html_a6e06a7994dc8e665cea39fa9350d9c87"><div class="ttname"><a href="dev__stx104__ai_8c.html#a6e06a7994dc8e665cea39fa9350d9c87">STX104_AI_DEBUG_LOG</a></div><div class="ttdeci">#define STX104_AI_DEBUG_LOG</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__ai_8c_source.html#l00054">dev_stx104_ai.c:54</a></div></div>
<div class="ttc" id="structstx104__ai__cfg_html_af648965637ee8c023d645cd77f6971d7"><div class="ttname"><a href="structstx104__ai__cfg.html#af648965637ee8c023d645cd77f6971d7">stx104_ai_cfg::moving_average_filter</a></div><div class="ttdeci">BOOL moving_average_filter</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00250">dev_stx104.h:250</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_aaf8fd5f0e57d456151c951e0f3715fc4a3a1c939dc6a6f113dca0998fa7611abe"><div class="ttname"><a href="dev__stx104_8h.html#aaf8fd5f0e57d456151c951e0f3715fc4a3a1c939dc6a6f113dca0998fa7611abe">STX104_REVISION_120328</a></div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00106">dev_stx104.h:106</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_ae4d5251432e1a9e6803c0240cc492e18a27947cd6663432e6cd407bd4d0eb086a"><div class="ttname"><a href="dev__stx104_8h.html#ae4d5251432e1a9e6803c0240cc492e18a27947cd6663432e6cd407bd4d0eb086a">STX104_AI_AIGC_ENCODE_SHIFT</a></div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00193">dev_stx104.h:193</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_ad3e045c0693497b94c45f09cd4faeb0bacc171c19c087357ef9f6ae1ce5463254"><div class="ttname"><a href="dev__stx104_8h.html#ad3e045c0693497b94c45f09cd4faeb0bacc171c19c087357ef9f6ae1ce5463254">AI_ENCODING_TWOS_COMPLEMENT_ALLOW_POLARITY</a></div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00213">dev_stx104.h:213</a></div></div>
<div class="ttc" id="structdevmgr__device_html"><div class="ttname"><a href="structdevmgr__device.html">devmgr_device</a></div><div class="ttdef"><b>Definition:</b> <a href="devmgr_8h_source.html#l00096">devmgr.h:96</a></div></div>
<div class="ttc" id="sysval_8h_html_a6d0bb44b4fe99de217b6ebbc218d1ce8"><div class="ttname"><a href="sysval_8h.html#a6d0bb44b4fe99de217b6ebbc218d1ce8">SYS_TYPE_MAKE</a></div><div class="ttdeci">#define SYS_TYPE_MAKE(type)</div><div class="ttdef"><b>Definition:</b> <a href="sysval_8h_source.html#l00323">sysval.h:323</a></div></div>
<div class="ttc" id="structstx104__ai__cfg_html_a6a1ba9d240dc60e634609ded84e124c1"><div class="ttname"><a href="structstx104__ai__cfg.html#a6a1ba9d240dc60e634609ded84e124c1">stx104_ai_cfg::first_channel</a></div><div class="ttdeci">STX104_AI_ENUM first_channel</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00237">dev_stx104.h:237</a></div></div>
<div class="ttc" id="structdevmgr__device_html_ad517770dac2061381b2008850ff12e6c"><div class="ttname"><a href="structdevmgr__device.html#ad517770dac2061381b2008850ff12e6c">devmgr_device::private_data</a></div><div class="ttdeci">void * private_data</div><div class="ttdef"><b>Definition:</b> <a href="devmgr_8h_source.html#l00113">devmgr.h:113</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_a73847839f3d0b5c51aaf8efc8d436bb4aa492943364bbc3054cb855e4ce962211"><div class="ttname"><a href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4aa492943364bbc3054cb855e4ce962211">STX104_AIGC_SAIFTTS</a></div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00187">dev_stx104.h:187</a></div></div>
<div class="ttc" id="structstx104__ai__cfg_html_a61dd078bdd08a6fa6a060152d2c7b46c"><div class="ttname"><a href="structstx104__ai__cfg.html#a61dd078bdd08a6fa6a060152d2c7b46c">stx104_ai_cfg::burst_timer_sec</a></div><div class="ttdeci">double burst_timer_sec</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00247">dev_stx104.h:247</a></div></div>
<div class="ttc" id="structstx104__ai__cfg_html_a025bf5a6626f5570b635195f21781133"><div class="ttname"><a href="structstx104__ai__cfg.html#a025bf5a6626f5570b635195f21781133">stx104_ai_cfg::high_speed_pre_queue_fifo</a></div><div class="ttdeci">BOOL high_speed_pre_queue_fifo</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00254">dev_stx104.h:254</a></div></div>
<div class="ttc" id="structstx104__ai__cfg_html_a2330add46044b55e5e25f879af96fa32"><div class="ttname"><a href="structstx104__ai__cfg.html#a2330add46044b55e5e25f879af96fa32">stx104_ai_cfg::capacitance_pf</a></div><div class="ttdeci">double capacitance_pf[STX104_AI_QTY]</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00229">dev_stx104.h:229</a></div></div>
<div class="ttc" id="structstx104__ai__cfg_html_a0b0c14afaa936b710ca5eaea6ce5fd56"><div class="ttname"><a href="structstx104__ai__cfg.html#a0b0c14afaa936b710ca5eaea6ce5fd56">stx104_ai_cfg::sync_aifc_to_trigger_start</a></div><div class="ttdeci">BOOL sync_aifc_to_trigger_start</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00252">dev_stx104.h:252</a></div></div>
<div class="ttc" id="group__stx104__ai_html_ga540c0c37670267237ad096336cee349d"><div class="ttname"><a href="group__stx104__ai.html#ga540c0c37670267237ad096336cee349d">STX104_AI_Config_Initialize</a></div><div class="ttdeci">AUL_DLL_API int AULCALLCONV STX104_AI_Config_Initialize(stx104_ai_cfg_type *config)</div><div class="ttdoc">Apex Universal Library STX104 analog input specific function. </div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__ai_8c_source.html#l00943">dev_stx104_ai.c:943</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_a021c1bdaa210791f503b5d6213e4b02c"><div class="ttname"><a href="dev__stx104_8h.html#a021c1bdaa210791f503b5d6213e4b02c">STX104_AI_ENUM</a></div><div class="ttdeci">STX104_AI_ENUM</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00128">dev_stx104.h:128</a></div></div>
<div class="ttc" id="group__stx104__general_html_ga7f0e60dc32b63baac10aabcd43933cd2"><div class="ttname"><a href="group__stx104__general.html#ga7f0e60dc32b63baac10aabcd43933cd2">STX104_Gen_Jumpers_Get</a></div><div class="ttdeci">AUL_DLL_API int AULCALLCONV STX104_Gen_Jumpers_Get(int board, STX104_GEN_JMP_TYPE *jumpers)</div><div class="ttdoc">Apex Univeral Library STX104 specific function that retrieves the states of the jumpers. </div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__gen_8c_source.html#l00055">dev_stx104_gen.c:55</a></div></div>
<div class="ttc" id="group__stx104__ai_html_gaa2c26ee8cf96de6e5634821593bafda7"><div class="ttname"><a href="group__stx104__ai.html#gaa2c26ee8cf96de6e5634821593bafda7">STX104_AI_Raw_To_Volts</a></div><div class="ttdeci">AUL_DLL_API int AULCALLCONV STX104_AI_Raw_To_Volts(int board, uint16_t raw_value, double *voltage)</div><div class="ttdoc">Apex Universal Library STX104 specific function that converts raw ADC data values to voltage returned...</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__ai_8c_source.html#l00830">dev_stx104_ai.c:830</a></div></div>
<div class="ttc" id="structstx104__gen__jmp_html_af201b15f5592c97935f373af7c9d4e22"><div class="ttname"><a href="structstx104__gen__jmp.html#af201b15f5592c97935f373af7c9d4e22">stx104_gen_jmp::J9_ai_unipolar</a></div><div class="ttdeci">BOOL J9_ai_unipolar</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00305">dev_stx104.h:305</a></div></div>
<div class="ttc" id="group__stx104__ai_html_ga18119d620fdf4471a63b931191d72124"><div class="ttname"><a href="group__stx104__ai.html#ga18119d620fdf4471a63b931191d72124">STX104_AI_Frames_Get</a></div><div class="ttdeci">AUL_DLL_API int AULCALLCONV STX104_AI_Frames_Get(int board, uint16_t *buffer, uint16_t *frame_count_actual, uint16_t frame_count_request)</div><div class="ttdoc">Apex Universal Library STX104 specific function that retrieves up to the number of requested data fra...</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__ai_8c_source.html#l00762">dev_stx104_ai.c:762</a></div></div>
<div class="ttc" id="structstx104__ai__cfg_html"><div class="ttname"><a href="structstx104__ai__cfg.html">stx104_ai_cfg</a></div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00225">dev_stx104.h:225</a></div></div>
<div class="ttc" id="group__stx104__ai_html_ga9a53ca658441e4c3764c7b174448a96d"><div class="ttname"><a href="group__stx104__ai.html#ga9a53ca658441e4c3764c7b174448a96d">STX104_AI_CFG_Get</a></div><div class="ttdeci">AUL_DLL_API int AULCALLCONV STX104_AI_CFG_Get(int board, stx104_ai_cfg_type *cfg)</div><div class="ttdoc">Apex Universal Library STX104 specific function that retrieves the STX104 analog input (AI) configura...</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__ai_8c_source.html#l00237">dev_stx104_ai.c:237</a></div></div>
<div class="ttc" id="structstx104__gen__jmp_html_a0f0a3a3c15c1ddd9b77f4e006959e7c5"><div class="ttname"><a href="structstx104__gen__jmp.html#a0f0a3a3c15c1ddd9b77f4e006959e7c5">stx104_gen_jmp::J8_ai_differential</a></div><div class="ttdeci">BOOL J8_ai_differential</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00306">dev_stx104.h:306</a></div></div>
<div class="ttc" id="structstx104__ai__cfg_html_a27bd4a57a825cd48de08ee8cfc4b34c4"><div class="ttname"><a href="structstx104__ai__cfg.html#a27bd4a57a825cd48de08ee8cfc4b34c4">stx104_ai_cfg::last_channel</a></div><div class="ttdeci">STX104_AI_ENUM last_channel</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00238">dev_stx104.h:238</a></div></div>
<div class="ttc" id="aul__status__enum_8h_html_ac45daf932bb032df266b1854415d5914a0011bfa8ec4cd81596596bed8f526eb7"><div class="ttname"><a href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914a0011bfa8ec4cd81596596bed8f526eb7">EC_STX104_AI_ENCODING_OUT_OF_RANGE</a></div><div class="ttdef"><b>Definition:</b> <a href="aul__status__enum_8h_source.html#l00109">aul_status_enum.h:109</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_a77048f06424498b2c8ce42c9689b96ff"><div class="ttname"><a href="dev__stx104_8h.html#a77048f06424498b2c8ce42c9689b96ff">STX104_CLOCK_RESOLUTION_NS</a></div><div class="ttdeci">#define STX104_CLOCK_RESOLUTION_NS</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00284">dev_stx104.h:284</a></div></div>
<div class="ttc" id="structstx104__dataset_html_ab8545036090889b776c00dbaaab465d4"><div class="ttname"><a href="structstx104__dataset.html#ab8545036090889b776c00dbaaab465d4">stx104_dataset::ai_channels_per_frame</a></div><div class="ttdeci">uint16_t ai_channels_per_frame</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l01064">dev_stx104.h:1064</a></div></div>
<div class="ttc" id="io_8h_html_a738842bd809b842226e4e6e9115c3acf"><div class="ttname"><a href="io_8h.html#a738842bd809b842226e4e6e9115c3acf">IO_Read_Repeat_U16</a></div><div class="ttdeci">int IO_Read_Repeat_U16(int iod, size_t virtual_address, uint16_t *buffer, size_t count)</div><div class="ttdef"><b>Definition:</b> <a href="io__linux__lib__gen_8c_source.html#l00175">io_linux_lib_gen.c:175</a></div></div>
<div class="ttc" id="group__stx104__ai_html_ga6a1285e27e6672f9c1b0abf7ac9c5849"><div class="ttname"><a href="group__stx104__ai.html#ga6a1285e27e6672f9c1b0abf7ac9c5849">STX104_AI_Strobe</a></div><div class="ttdeci">AUL_DLL_API int AULCALLCONV STX104_AI_Strobe(int board)</div><div class="ttdoc">Apex Universal Library STX104 specific function that performs an analog input strobe or frame request...</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__ai_8c_source.html#l00896">dev_stx104_ai.c:896</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_a021c1bdaa210791f503b5d6213e4b02ca967d54e3e0f68e72f3738d7e9026da0a"><div class="ttname"><a href="dev__stx104_8h.html#a021c1bdaa210791f503b5d6213e4b02ca967d54e3e0f68e72f3738d7e9026da0a">STX104_AI_CH7</a></div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00137">dev_stx104.h:137</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_a73847839f3d0b5c51aaf8efc8d436bb4a92eb339c6a044594fe396a59fa639a5f"><div class="ttname"><a href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4a92eb339c6a044594fe396a59fa639a5f">STX104_AIGC_MAVG_IN</a></div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00188">dev_stx104.h:188</a></div></div>
<div class="ttc" id="group__stx104__general_html_gab1f67b00c1bedbf10b24805514dcbb41"><div class="ttname"><a href="group__stx104__general.html#gab1f67b00c1bedbf10b24805514dcbb41">STX104_Gen_Revision_Get</a></div><div class="ttdeci">AUL_DLL_API int AULCALLCONV STX104_Gen_Revision_Get(int board, uint16_t *id_value)</div><div class="ttdoc">Apex Univeral Library STX104 specific function that retrieves the STX104 board firmware revision...</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__gen_8c_source.html#l00095">dev_stx104_gen.c:95</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_ad3e045c0693497b94c45f09cd4faeb0ba653e95265393be3669a535327442ad50"><div class="ttname"><a href="dev__stx104_8h.html#ad3e045c0693497b94c45f09cd4faeb0ba653e95265393be3669a535327442ad50">AI_ENCODING_TWOS_COMPLEMENT</a></div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00208">dev_stx104.h:208</a></div></div>
<div class="ttc" id="structstx104__ai__cfg_html_a8c266b8a266bf7df9d36cdc69015cd34"><div class="ttname"><a href="structstx104__ai__cfg.html#a8c266b8a266bf7df9d36cdc69015cd34">stx104_ai_cfg::resistance_ohms</a></div><div class="ttdeci">double resistance_ohms[STX104_AI_QTY]</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00233">dev_stx104.h:233</a></div></div>
<div class="ttc" id="aul__status__enum_8h_html_ac45daf932bb032df266b1854415d5914aa6399a6aa0eb3155c89bfbb1dedd44ef"><div class="ttname"><a href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914aa6399a6aa0eb3155c89bfbb1dedd44ef">EC_STX104_AI_JUMPERS_M0_M1_M2_M4</a></div><div class="ttdef"><b>Definition:</b> <a href="aul__status__enum_8h_source.html#l00111">aul_status_enum.h:111</a></div></div>
<div class="ttc" id="aul__status__enum_8h_html_ac45daf932bb032df266b1854415d5914a6290a468598e4460df275c75dc33799d"><div class="ttname"><a href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914a6290a468598e4460df275c75dc33799d">EC_STX104_AI_FIRST_CHANNEL_OUT_OF_RANGE</a></div><div class="ttdef"><b>Definition:</b> <a href="aul__status__enum_8h_source.html#l00112">aul_status_enum.h:112</a></div></div>
<div class="ttc" id="structstx104__ai__cfg_html_a2ab7f13dd2a07a6d077a5b6695f7a5d8"><div class="ttname"><a href="structstx104__ai__cfg.html#a2ab7f13dd2a07a6d077a5b6695f7a5d8">stx104_ai_cfg::frame_timer_sec</a></div><div class="ttdeci">double frame_timer_sec</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00248">dev_stx104.h:248</a></div></div>
<div class="ttc" id="structstx104__ai__cfg_html_aee7c159595ba53bc905161dab996497e"><div class="ttname"><a href="structstx104__ai__cfg.html#aee7c159595ba53bc905161dab996497e">stx104_ai_cfg::encoding</a></div><div class="ttdeci">STX104_AI_ENCODING_ENUM encoding</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00258">dev_stx104.h:258</a></div></div>
<div class="ttc" id="structstx104__dataset_html_aa5ab273e6827ca05d11875fe0972252e"><div class="ttname"><a href="structstx104__dataset.html#aa5ab273e6827ca05d11875fe0972252e">stx104_dataset::ai_polarity_config</a></div><div class="ttdeci">uint16_t ai_polarity_config</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l01063">dev_stx104.h:1063</a></div></div>
<div class="ttc" id="structstx104__dataset_html_a66f91d29b3cdfc4693449caa1b98f666"><div class="ttname"><a href="structstx104__dataset.html#a66f91d29b3cdfc4693449caa1b98f666">stx104_dataset::ai_unipolar</a></div><div class="ttdeci">uint8_t ai_unipolar</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l01066">dev_stx104.h:1066</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_a73847839f3d0b5c51aaf8efc8d436bb4a6c9605f73534c8689997f31a45275a27"><div class="ttname"><a href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4a6c9605f73534c8689997f31a45275a27">STX104_AIGC_ENCODE</a></div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00190">dev_stx104.h:190</a></div></div>
<div class="ttc" id="dev__stx104__ai_8c_html_a3c31fe39a5ce4c93e0194f3ac759da8c"><div class="ttname"><a href="dev__stx104__ai_8c.html#a3c31fe39a5ce4c93e0194f3ac759da8c">STX104_AI_Initialization</a></div><div class="ttdeci">void STX104_AI_Initialization(void)</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__ai_8c_source.html#l00967">dev_stx104_ai.c:967</a></div></div>
<div class="ttc" id="dev__stx104__index_8h_html"><div class="ttname"><a href="dev__stx104__index_8h.html">dev_stx104_index.h</a></div></div>
<div class="ttc" id="aul_8c_html_af8e9fd36526f3c41cb7616a9b9c28f9e"><div class="ttname"><a href="aul_8c.html#af8e9fd36526f3c41cb7616a9b9c28f9e">AUL_Board</a></div><div class="ttdeci">int AUL_Board(int board, devmgr_device_type **device)</div><div class="ttdef"><b>Definition:</b> <a href="aul_8c_source.html#l00123">aul.c:123</a></div></div>
<div class="ttc" id="aul__status__enum_8h_html_ac45daf932bb032df266b1854415d5914ab4ed0d45593bfeb89e8504f0a5db13da"><div class="ttname"><a href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914ab4ed0d45593bfeb89e8504f0a5db13da">EC_STX104_AI_UNCALIBRATED_CONVERSION_WARNING</a></div><div class="ttdef"><b>Definition:</b> <a href="aul__status__enum_8h_source.html#l00110">aul_status_enum.h:110</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_a021c1bdaa210791f503b5d6213e4b02cad7a267d338a5ce1d6bddb9c9791fe86a"><div class="ttname"><a href="dev__stx104_8h.html#a021c1bdaa210791f503b5d6213e4b02cad7a267d338a5ce1d6bddb9c9791fe86a">STX104_AI_CH15</a></div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00145">dev_stx104.h:145</a></div></div>
<div class="ttc" id="structstx104__ai__cfg_html_a4167c018e12490d06e32f811750c0892"><div class="ttname"><a href="structstx104__ai__cfg.html#a4167c018e12490d06e32f811750c0892">stx104_ai_cfg::frame_maximum</a></div><div class="ttdeci">uint32_t frame_maximum</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00249">dev_stx104.h:249</a></div></div>
<div class="ttc" id="structstx104__gen__jmp_html_a6614b5740f3ee38006c2c6e8ed0bf0c5"><div class="ttname"><a href="structstx104__gen__jmp.html#a6614b5740f3ee38006c2c6e8ed0bf0c5">stx104_gen_jmp::M2_dacs_16bits</a></div><div class="ttdeci">BOOL M2_dacs_16bits</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00300">dev_stx104.h:300</a></div></div>
<div class="ttc" id="dev__stx104__ai_8c_html_a43daa678cbc13fcfa0c2364f3715619e"><div class="ttname"><a href="dev__stx104__ai_8c.html#a43daa678cbc13fcfa0c2364f3715619e">STX104_AI_MODULE_REV</a></div><div class="ttdeci">#define STX104_AI_MODULE_REV</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__ai_8c_source.html#l00194">dev_stx104_ai.c:194</a></div></div>
<div class="ttc" id="io_8h_html_a38109c7302f062985560ffcfd788540e"><div class="ttname"><a href="io_8h.html#a38109c7302f062985560ffcfd788540e">IO_Write_U8</a></div><div class="ttdeci">int IO_Write_U8(int iod, size_t virtual_address, uint8_t value)</div><div class="ttdef"><b>Definition:</b> <a href="io__linux__lib__gen_8c_source.html#l00217">io_linux_lib_gen.c:217</a></div></div>
<div class="ttc" id="dev__stx104__index_8c_html_a1f11f790ff5ae638e636210e4d56bfd2"><div class="ttname"><a href="dev__stx104__index_8c.html#a1f11f790ff5ae638e636210e4d56bfd2">STX104_Index_Write_U8</a></div><div class="ttdeci">void STX104_Index_Write_U8(int board, uint8_t index, uint8_t value)</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__index_8c_source.html#l00105">dev_stx104_index.c:105</a></div></div>
<div class="ttc" id="structstx104__ai__cfg_html_a441a34c0d2fb71d022d1be7d5e68a057"><div class="ttname"><a href="structstx104__ai__cfg.html#a441a34c0d2fb71d022d1be7d5e68a057">stx104_ai_cfg::frame_timer_ns</a></div><div class="ttdeci">uint32_t frame_timer_ns</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00245">dev_stx104.h:245</a></div></div>
<div class="ttc" id="structstx104__gen__jmp_html_a4c6392929c81c547d1410b049772b56e"><div class="ttname"><a href="structstx104__gen__jmp.html#a4c6392929c81c547d1410b049772b56e">stx104_gen_jmp::M1_mode</a></div><div class="ttdeci">BOOL M1_mode</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00299">dev_stx104.h:299</a></div></div>
<div class="ttc" id="structdevmgr__device_html_a41c55b0af4fc2ee048aed49ea5511728"><div class="ttname"><a href="structdevmgr__device.html#a41c55b0af4fc2ee048aed49ea5511728">devmgr_device::io_device</a></div><div class="ttdeci">int io_device</div><div class="ttdef"><b>Definition:</b> <a href="devmgr_8h_source.html#l00140">devmgr.h:140</a></div></div>
<div class="ttc" id="structdevmgr__device_html_ac87a4a56710bf75574db36ba09b99a4b"><div class="ttname"><a href="structdevmgr__device.html#ac87a4a56710bf75574db36ba09b99a4b">devmgr_device::io_region_offset</a></div><div class="ttdeci">size_t io_region_offset</div><div class="ttdef"><b>Definition:</b> <a href="devmgr_8h_source.html#l00131">devmgr.h:131</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_ad3e045c0693497b94c45f09cd4faeb0bae9efeaec3a327083c93a100f249de769"><div class="ttname"><a href="dev__stx104_8h.html#ad3e045c0693497b94c45f09cd4faeb0bae9efeaec3a327083c93a100f249de769">AI_ENCODING_STRAIGHT_BINARY</a></div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00201">dev_stx104.h:201</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_aaa7a160b0d10f046311f3af06a489f2b"><div class="ttname"><a href="dev__stx104_8h.html#aaa7a160b0d10f046311f3af06a489f2b">STX104_AI_STROBE_SOURCE_ENUM</a></div><div class="ttdeci">STX104_AI_STROBE_SOURCE_ENUM</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00151">dev_stx104.h:151</a></div></div>
<div class="ttc" id="dev__stx104_8h_html"><div class="ttname"><a href="dev__stx104_8h.html">dev_stx104.h</a></div></div>
<div class="ttc" id="structstx104__ai__cfg_html_ad93a61aad34e153b6ff9785c679b340b"><div class="ttname"><a href="structstx104__ai__cfg.html#ad93a61aad34e153b6ff9785c679b340b">stx104_ai_cfg::type</a></div><div class="ttdeci">SYS_TYPE type</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00227">dev_stx104.h:227</a></div></div>
<div class="ttc" id="callconv_8h_html_a1f2b063e3f098ffc4ebf64a777c76843"><div class="ttname"><a href="callconv_8h.html#a1f2b063e3f098ffc4ebf64a777c76843">AUL_DLL_API</a></div><div class="ttdeci">#define AUL_DLL_API</div><div class="ttdef"><b>Definition:</b> <a href="callconv_8h_source.html#l00076">callconv.h:76</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_a41b62e2aef77fd134d6c82b382945458"><div class="ttname"><a href="dev__stx104_8h.html#a41b62e2aef77fd134d6c82b382945458">STX104_AI_GAIN_ENUM</a></div><div class="ttdeci">STX104_AI_GAIN_ENUM</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00172">dev_stx104.h:172</a></div></div>
<div class="ttc" id="aul__status__enum_8h_html_ac45daf932bb032df266b1854415d5914a4857a0e9095a18a689e176c7571431f7"><div class="ttname"><a href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914a4857a0e9095a18a689e176c7571431f7">EC_STX104_AI_FIFO_FULL</a></div><div class="ttdef"><b>Definition:</b> <a href="aul__status__enum_8h_source.html#l00117">aul_status_enum.h:117</a></div></div>
<div class="ttc" id="error_8c_html_a1982669e1c73773f3412a213aedd0e20"><div class="ttname"><a href="error_8c.html#a1982669e1c73773f3412a213aedd0e20">Error_Log</a></div><div class="ttdeci">void Error_Log(const char *module, const char *function, int line, int error_code)</div><div class="ttdef"><b>Definition:</b> <a href="error_8c_source.html#l00058">error.c:58</a></div></div>
<div class="ttc" id="io_8h_html_adaaaa38c3f5e4cc997280db7f1596c61"><div class="ttname"><a href="io_8h.html#adaaaa38c3f5e4cc997280db7f1596c61">IO_Read_U8</a></div><div class="ttdeci">int IO_Read_U8(int iod, size_t virtual_address, uint8_t *value)</div><div class="ttdef"><b>Definition:</b> <a href="io__linux__lib__gen_8c_source.html#l00101">io_linux_lib_gen.c:101</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_a73847839f3d0b5c51aaf8efc8d436bb4a252ee47968d37980f5206eb961c30a59"><div class="ttname"><a href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4a252ee47968d37980f5206eb961c30a59">STX104_AIGC_nSGATE</a></div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00185">dev_stx104.h:185</a></div></div>
<div class="ttc" id="structstx104__dataset_html"><div class="ttname"><a href="structstx104__dataset.html">stx104_dataset</a></div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l01058">dev_stx104.h:1058</a></div></div>
<div class="ttc" id="structstx104__dataset_html_a22c3e78abe64eef97d61ee1d1a48539f"><div class="ttname"><a href="structstx104__dataset.html#a22c3e78abe64eef97d61ee1d1a48539f">stx104_dataset::firmware_revision</a></div><div class="ttdeci">uint16_t firmware_revision</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l01061">dev_stx104.h:1061</a></div></div>
<div class="ttc" id="structstx104__dataset_html_acbfa9e00a621bd8fc43a73769345952a"><div class="ttname"><a href="structstx104__dataset.html#acbfa9e00a621bd8fc43a73769345952a">stx104_dataset::ai_pacer_clock_control_shadow_copy</a></div><div class="ttdeci">uint8_t ai_pacer_clock_control_shadow_copy</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l01068">dev_stx104.h:1068</a></div></div>
<div class="ttc" id="pstdint_8h_html_ab5eb23180f7cc12b7d6c04a8ec067fdd"><div class="ttname"><a href="pstdint_8h.html#ab5eb23180f7cc12b7d6c04a8ec067fdd">UINT32_MAX</a></div><div class="ttdeci">#define UINT32_MAX</div><div class="ttdef"><b>Definition:</b> <a href="pstdint_8h_source.html#l00334">pstdint.h:334</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_a73847839f3d0b5c51aaf8efc8d436bb4a55d9e3df571b07142063867539f95890"><div class="ttname"><a href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4a55d9e3df571b07142063867539f95890">STX104_AIGC_ENCODE_BEHAVIOR</a></div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00189">dev_stx104.h:189</a></div></div>
<div class="ttc" id="aul__status__enum_8h_html_ac45daf932bb032df266b1854415d5914ace1b51428cb5213d57d8f7bc1143018c"><div class="ttname"><a href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914ace1b51428cb5213d57d8f7bc1143018c">EC_STX104_AI_FRAME_TIMING_TOO_SMALL_AIFT</a></div><div class="ttdef"><b>Definition:</b> <a href="aul__status__enum_8h_source.html#l00118">aul_status_enum.h:118</a></div></div>
<div class="ttc" id="dev__stx104__index_8c_html_a09ebde236fcf54a86aa35617fcec05c0"><div class="ttname"><a href="dev__stx104__index_8c.html#a09ebde236fcf54a86aa35617fcec05c0">STX104_Index_Read_U8</a></div><div class="ttdeci">void STX104_Index_Read_U8(int board, uint8_t index, uint8_t *value)</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__index_8c_source.html#l00154">dev_stx104_index.c:154</a></div></div>
<div class="ttc" id="group__stx104__ai_html_ga37d8a1070e40af9eb5c997bdefc600df"><div class="ttname"><a href="group__stx104__ai.html#ga37d8a1070e40af9eb5c997bdefc600df">STX104_AI_Aquisition_Restart</a></div><div class="ttdeci">AUL_DLL_API int AULCALLCONV STX104_AI_Aquisition_Restart(int board)</div><div class="ttdoc">Apex Universal Library STX104 specific function that read/writes to channel register to restart the a...</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__ai_8c_source.html#l00919">dev_stx104_ai.c:919</a></div></div>
<div class="ttc" id="structstx104__gen__jmp_html_a81ad7c9a1953babfbb01d958b0dd37a3"><div class="ttname"><a href="structstx104__gen__jmp.html#a81ad7c9a1953babfbb01d958b0dd37a3">stx104_gen_jmp::M3_moving_average_filter</a></div><div class="ttdeci">BOOL M3_moving_average_filter</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00301">dev_stx104.h:301</a></div></div>
<div class="ttc" id="structstx104__gen__jmp_html"><div class="ttname"><a href="structstx104__gen__jmp.html">stx104_gen_jmp</a></div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00296">dev_stx104.h:296</a></div></div>
<div class="ttc" id="structstx104__ai__cfg_html_ae45a91e719864f8383024407b78bb335"><div class="ttname"><a href="structstx104__ai__cfg.html#ae45a91e719864f8383024407b78bb335">stx104_ai_cfg::strobe_source</a></div><div class="ttdeci">STX104_AI_STROBE_SOURCE_ENUM strobe_source</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00255">dev_stx104.h:255</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_ae782f2059bddc14a86d37dbaebb7ef22"><div class="ttname"><a href="dev__stx104_8h.html#ae782f2059bddc14a86d37dbaebb7ef22">STX104_AI_INTRA_SAMPLE_TIME_MIN_NS</a></div><div class="ttdeci">#define STX104_AI_INTRA_SAMPLE_TIME_MIN_NS</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00122">dev_stx104.h:122</a></div></div>
<div class="ttc" id="dev__stx104__index_8c_html_a9a18ae67ccd6b49249ed76a925733a85"><div class="ttname"><a href="dev__stx104__index_8c.html#a9a18ae67ccd6b49249ed76a925733a85">STX104_Index_Read_U32</a></div><div class="ttdeci">void STX104_Index_Read_U32(int board, uint8_t index, uint32_t *value)</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__index_8c_source.html#l00189">dev_stx104_index.c:189</a></div></div>
<div class="ttc" id="aul__status__enum_8h_html_ac45daf932bb032df266b1854415d5914a1e1791c54c7da5fbdab21939e42bca79"><div class="ttname"><a href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914a1e1791c54c7da5fbdab21939e42bca79">EC_STX104_AI_INTRA_SAMPLE_TIMING_TOO_SMALL_AIBT</a></div><div class="ttdef"><b>Definition:</b> <a href="aul__status__enum_8h_source.html#l00116">aul_status_enum.h:116</a></div></div>
<div class="ttc" id="structstx104__dataset_html_ad69ca97eb420cdae95db2ece427334fd"><div class="ttname"><a href="structstx104__dataset.html#ad69ca97eb420cdae95db2ece427334fd">stx104_dataset::ai_channel_reg</a></div><div class="ttdeci">uint8_t ai_channel_reg</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l01065">dev_stx104.h:1065</a></div></div>
<div class="ttc" id="aul__status__enum_8h_html_ac45daf932bb032df266b1854415d5914a519f0a0b8e1b0ef796c88029f356ce26"><div class="ttname"><a href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914a519f0a0b8e1b0ef796c88029f356ce26">EC_STX104_AI_INTRA_SAMPLE_TIMING_TOO_LARGE_AIBT</a></div><div class="ttdef"><b>Definition:</b> <a href="aul__status__enum_8h_source.html#l00115">aul_status_enum.h:115</a></div></div>
<div class="ttc" id="structstx104__ai__cfg_html_a3fecbcdb57bf5d00a06476b69d19c352"><div class="ttname"><a href="structstx104__ai__cfg.html#a3fecbcdb57bf5d00a06476b69d19c352">stx104_ai_cfg::sync_aift_to_trigger_start</a></div><div class="ttdeci">BOOL sync_aift_to_trigger_start</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00251">dev_stx104.h:251</a></div></div>
<div class="ttc" id="structstx104__ai__cfg_html_a5c82425b95181ab4b1834bf1872ac522"><div class="ttname"><a href="structstx104__ai__cfg.html#a5c82425b95181ab4b1834bf1872ac522">stx104_ai_cfg::polarity</a></div><div class="ttdeci">BOOL polarity[STX104_AI_QTY]</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00259">dev_stx104.h:259</a></div></div>
<div class="ttc" id="dev__stx104__ai_8c_html_a886f3ecceccaa4d097c82b49c6569576"><div class="ttname"><a href="dev__stx104__ai_8c.html#a886f3ecceccaa4d097c82b49c6569576">STX104_AI_SVN_Time_Stamp</a></div><div class="ttdeci">const char * STX104_AI_SVN_Time_Stamp(void)</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__ai_8c_source.html#l00196">dev_stx104_ai.c:196</a></div></div>
<div class="ttc" id="dev__stx104__ai_8c_html_a248f85e2dfe291490d7635c4cec3fc75"><div class="ttname"><a href="dev__stx104__ai_8c.html#a248f85e2dfe291490d7635c4cec3fc75">STX104_AI_DEBUG_STRING_SIZE</a></div><div class="ttdeci">#define STX104_AI_DEBUG_STRING_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__ai_8c_source.html#l00092">dev_stx104_ai.c:92</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_a8368cb3a30699c3047fa477d488831ae"><div class="ttname"><a href="dev__stx104_8h.html#a8368cb3a30699c3047fa477d488831ae">DEVICE_STX104_NAME</a></div><div class="ttdeci">#define DEVICE_STX104_NAME</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00003">dev_stx104.h:3</a></div></div>
<div class="ttc" id="debug_8c_html_ad08eb6f767d5b4723cc5daec65856d19"><div class="ttname"><a href="debug_8c.html#ad08eb6f767d5b4723cc5daec65856d19">Debug_Log</a></div><div class="ttdeci">void Debug_Log(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00103">debug.c:103</a></div></div>
<div class="ttc" id="structstx104__dataset_html_a4c564a6e4ba1b875a532fdf125b4a44a"><div class="ttname"><a href="structstx104__dataset.html#a4c564a6e4ba1b875a532fdf125b4a44a">stx104_dataset::ai_general_config_reg</a></div><div class="ttdeci">uint16_t ai_general_config_reg</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l01062">dev_stx104.h:1062</a></div></div>
<div class="ttc" id="dev__stx104__ai_8c_html_a02d8dd1e733b30553970fb83d7397eb3"><div class="ttname"><a href="dev__stx104__ai_8c.html#a02d8dd1e733b30553970fb83d7397eb3">STX104_AI_Termination</a></div><div class="ttdeci">void STX104_AI_Termination(void)</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__ai_8c_source.html#l00962">dev_stx104_ai.c:962</a></div></div>
<div class="ttc" id="aul__status__enum_8h_html_ac45daf932bb032df266b1854415d5914a77c198abfcd190546232339dd430d149"><div class="ttname"><a href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914a77c198abfcd190546232339dd430d149">EC_STX104_AI_FIRST_CHAN_GREATER_THAN_LAST_CHAN</a></div><div class="ttdef"><b>Definition:</b> <a href="aul__status__enum_8h_source.html#l00114">aul_status_enum.h:114</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_a73847839f3d0b5c51aaf8efc8d436bb4af5911bbdb47517ce96e2b444ad2f4997"><div class="ttname"><a href="dev__stx104_8h.html#a73847839f3d0b5c51aaf8efc8d436bb4af5911bbdb47517ce96e2b444ad2f4997">STX104_AIGC_SAIFCTS</a></div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00186">dev_stx104.h:186</a></div></div>
<div class="ttc" id="cmp__i8255m0__readme_8txt_html_a074d4d493edb0d5ac9bb8c5156c079db"><div class="ttname"><a href="cmp__i8255m0__readme_8txt.html#a074d4d493edb0d5ac9bb8c5156c079db">NULL</a></div><div class="ttdeci">I8255M0 Intel Mode implementation Why the cmp_ prefix This keeps files nicely organized within a project or solution keeping all the components together in the list file definitions cmp_i8255m0 c main core functions cmp_i8255m0 h cmp_i8255m0_status h All error and warning codes This will aggregate with all other project status codes cmp_i8255m0_regc Register set definition This will be absorbed into cmp_i8255m0 c file above cmp_i8255m0_reg h cmp_i8255m0_cmd h IOCTL commands related to this component This will aggregate with all other project command codes jump table required The jump table ought to be for things that occur regularly Things that are infrequent ought to revert to some sort of setup config function with a command The setup config function with command will require a packet to be built rather than simple flat approach Restart command for purposes of simultaneous updates Power down command Not currently used Power up command Not currently used Config Set Send a configuration data structure It can either be queued up awaiting a restart for the config to be committed or it can be committed directly Config Get Read Data flow read Read data out of a buffer or hardware and return the buffer Write Data flow write Write data from buffer to hardware or FIFO IO_INDIRECT private_data If NULL</div><div class="ttdef"><b>Definition:</b> <a href="cmp__i8255m0__readme_8txt_source.html#l00006">cmp_i8255m0_readme.txt:6</a></div></div>
<div class="ttc" id="dev__stx104__index_8c_html_ac5955d5cf8b4570a982ce219c40e2a2f"><div class="ttname"><a href="dev__stx104__index_8c.html#ac5955d5cf8b4570a982ce219c40e2a2f">STX104_Index_Write_U16</a></div><div class="ttdeci">void STX104_Index_Write_U16(int board, uint8_t index, uint16_t value)</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__index_8c_source.html#l00121">dev_stx104_index.c:121</a></div></div>
<div class="ttc" id="structstx104__ai__cfg_html_a4ca8b26238d3ac1107e8981dfeed7c2e"><div class="ttname"><a href="structstx104__ai__cfg.html#a4ca8b26238d3ac1107e8981dfeed7c2e">stx104_ai_cfg::gain</a></div><div class="ttdeci">STX104_AI_GAIN_ENUM gain</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00239">dev_stx104.h:239</a></div></div>
<div class="ttc" id="structstx104__ai__cfg_html_ad87797a90fa1390b2fc82cca7701f3aa"><div class="ttname"><a href="structstx104__ai__cfg.html#ad87797a90fa1390b2fc82cca7701f3aa">stx104_ai_cfg::use_triggering_subsystem</a></div><div class="ttdeci">BOOL use_triggering_subsystem</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00253">dev_stx104.h:253</a></div></div>
<div class="ttc" id="str__safe_8c_html_a35c54c8339a6b0328ae3cd6bfea9c44e"><div class="ttname"><a href="str__safe_8c.html#a35c54c8339a6b0328ae3cd6bfea9c44e">String_Copy</a></div><div class="ttdeci">size_t String_Copy(char *dst, const char *src, size_t dst_size)</div><div class="ttdef"><b>Definition:</b> <a href="str__safe_8c_source.html#l00053">str_safe.c:53</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_a4d98473c80070f2a4af519dcfd107840"><div class="ttname"><a href="dev__stx104_8h.html#a4d98473c80070f2a4af519dcfd107840">STX104_AI_QTY</a></div><div class="ttdeci">#define STX104_AI_QTY</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00224">dev_stx104.h:224</a></div></div>
<div class="ttc" id="mem_8c_html_ad87a18d072f1e0baa80eb2de9b6852e6"><div class="ttname"><a href="mem_8c.html#ad87a18d072f1e0baa80eb2de9b6852e6">Mem_Set</a></div><div class="ttdeci">void * Mem_Set(void *dst, uint8_t value, size_t dst_count)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00088">mem.c:88</a></div></div>
<div class="ttc" id="callconv_8h_html_ab86054f7a6ff3a2238edc182b26b603e"><div class="ttname"><a href="callconv_8h.html#ab86054f7a6ff3a2238edc182b26b603e">AULCALLCONV</a></div><div class="ttdeci">#define AULCALLCONV</div><div class="ttdef"><b>Definition:</b> <a href="callconv_8h_source.html#l00077">callconv.h:77</a></div></div>
<div class="ttc" id="str__safe_8c_html_ad06504254eaa964a70c115b66532b121"><div class="ttname"><a href="str__safe_8c.html#ad06504254eaa964a70c115b66532b121">String_Concatenate</a></div><div class="ttdeci">char * String_Concatenate(char *dst, const char *src, size_t dst_size)</div><div class="ttdef"><b>Definition:</b> <a href="str__safe_8c_source.html#l00120">str_safe.c:120</a></div></div>
<div class="ttc" id="structstx104__ai__cfg_html_a8774c9e2df7261d3f0eed7f28fc3cb63"><div class="ttname"><a href="structstx104__ai__cfg.html#a8774c9e2df7261d3f0eed7f28fc3cb63">stx104_ai_cfg::burst_timer_ns</a></div><div class="ttdeci">uint32_t burst_timer_ns</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00244">dev_stx104.h:244</a></div></div>
<div class="ttc" id="dev__stx104__index_8c_html_ac83644d7df9235481b8542606befed8b"><div class="ttname"><a href="dev__stx104__index_8c.html#ac83644d7df9235481b8542606befed8b">STX104_Index_Write_U32</a></div><div class="ttdeci">void STX104_Index_Write_U32(int board, uint8_t index, uint32_t value)</div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104__index_8c_source.html#l00138">dev_stx104_index.c:138</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_ad3e045c0693497b94c45f09cd4faeb0bae06609c8226911f76e3861fff60dfffb"><div class="ttname"><a href="dev__stx104_8h.html#ad3e045c0693497b94c45f09cd4faeb0bae06609c8226911f76e3861fff60dfffb">AI_ENCODING_STRAIGHT_BINARY_ALLOW_POLARITY</a></div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00206">dev_stx104.h:206</a></div></div>
<div class="ttc" id="aul__status__enum_8h_html_ac45daf932bb032df266b1854415d5914a3475216355ba2d7df2cf35901c63705f"><div class="ttname"><a href="aul__status__enum_8h.html#ac45daf932bb032df266b1854415d5914a3475216355ba2d7df2cf35901c63705f">EC_STX104_AI_LAST_CHANNEL_OUT_OF_RANGE</a></div><div class="ttdef"><b>Definition:</b> <a href="aul__status__enum_8h_source.html#l00113">aul_status_enum.h:113</a></div></div>
<div class="ttc" id="dev__stx104_8h_html_ad3e045c0693497b94c45f09cd4faeb0ba0bdacfe2d0e618c6a96c308c50895c61"><div class="ttname"><a href="dev__stx104_8h.html#ad3e045c0693497b94c45f09cd4faeb0ba0bdacfe2d0e618c6a96c308c50895c61">AI_ENCODING_TWOS_COMPLEMENT_ABSOLUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="dev__stx104_8h_source.html#l00219">dev_stx104.h:219</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_07b86ffc266b39efa5bbdc0e9fdb330a.html">devices</a></li><li class="navelem"><a class="el" href="dir_ad7c1145b5d75d6047358e5a5834eda4.html">stx104</a></li><li class="navelem"><a class="el" href="dev__stx104__ai_8c.html">dev_stx104_ai.c</a></li>
    <li class="footer">Generated on Mon Jan 19 2015 14:53:04 for Apex Universal Library by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
