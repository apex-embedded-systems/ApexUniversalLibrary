<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Isolated Digital Input Test Utility: src/idi.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Isolated Digital Input Test Utility
   </div>
   <div id="projectbrief">Utility to test registers and I/O which then can be used within OS scripts</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('idi_8c_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">idi.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="idi_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; <span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * idi.c</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *  Created on: Feb 25, 2015</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *      Author: Mike</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/* TODO:</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * 1. review function names for consistency in naming.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * 2. comments above function definitions and any other definitions not complete.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * 3. software review.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * 5. FPGA issues</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * 5.1. at power up, after reset both spi fifos are not in empty state.  transmit fifo seems to be stuck.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * 5.2. reading the spi fifo data once will then set the empty flag.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * 5.3. the chip select is high initially after reset...yes, that is correct.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * 5.4. the clock line is high too.  not sure what to make of that.</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * 5.5. just after reset if I set the cs it does not go low.</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * 5.6. The transmit fifo seems to be stuck for some odd reason.</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#if defined( __MSDOS__ )</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor"># include &lt;mem.h&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor"># include &lt;dos.h&gt;</span>    <span class="comment">/* outportb() and inportb() */</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor"># include &lt;conio.h&gt;</span>  <span class="comment">/* kbhit() and getch()      */</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor"># ifndef strcmpi</span></div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">   36</a></span>&#160;<span class="preprocessor">#  define strcmpi strcasecmp</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor"># endif</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor"># include &lt;stdint.h&gt;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="idi_8c.html#ac80cd7b02810a77973bd938d9c2871ad">   48</a></span>&#160;<span class="preprocessor">#define IDI_REV  &quot;$Date: 2015-03-05 08:48:57 -0600 (Thu, 05 Mar 2015) $&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#if defined( __MSDOS__ )</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> uint8_t;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>  uint16_t;  <span class="comment">/* DOS only */</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> uint32_t;  <span class="comment">/* DOS only */</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; <span class="keyword">typedef</span> <span class="keywordtype">char</span> int8_t;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; <span class="keyword">typedef</span> <span class="keywordtype">int</span>  int16_t;  <span class="comment">/* DOS only */</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; <span class="keyword">typedef</span> <span class="keywordtype">long</span> int32_t;  <span class="comment">/* DOS only */</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">   71</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="idi_8c.html#a65e9886d74aaee76545e83dd09011727">   72</a></span>&#160;<span class="preprocessor">#define false 0</span></div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="idi_8c.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">   73</a></span>&#160;<span class="preprocessor">#define true  1</span></div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="idi_8c.html#a06fc87d81c62e9abb8790b6e5713c55baa82764c3079aea4e60c80e45befbb839">   74</a></span>&#160;<span class="keyword">enum</span> { <a class="code" href="idi_8c.html#a06fc87d81c62e9abb8790b6e5713c55baa1e095cc966dbecf6a0d8aad75348d1a">FALSE</a> = 0, <a class="code" href="idi_8c.html#a06fc87d81c62e9abb8790b6e5713c55baa82764c3079aea4e60c80e45befbb839">TRUE</a> = 1 };</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="idi_8c.html#a2a635742326b18bb61d409dfdb7f294b">   81</a></span>&#160;<span class="preprocessor">#define CLOCK_PERIOD_SEC   20.0e-9</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keyword">enum</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;{</div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="idi_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a9d8ebe0a43a1971e6e3d738d0877f066">  116</a></span>&#160;    <a class="code" href="idi_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a9d8ebe0a43a1971e6e3d738d0877f066">ID_DIN</a> = 0x8012,  </div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="idi_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ade57b137e54adb85a4eedad470a8a87d">  117</a></span>&#160;    <a class="code" href="idi_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ade57b137e54adb85a4eedad470a8a87d">ID_SPI</a> = 0x8013   </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;};</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">/***</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment"> * Work around to test hardware that may or may not be present...useful for</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"> * software debugging without any target hardware.</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="idi_8c.html#aaf473d06aba7bd500cb5f20a2b64e200">  124</a></span>&#160;<span class="preprocessor">#define ID_ALWAYS_REPORT_AS_GOOD  1</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="idi_8c.html#a016eb7133cd5c37fc3dda165251b102c">  139</a></span>&#160;<span class="preprocessor">#define IDI_ERROR_CODES(_) \</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">    </span><span class="comment">/*    enum_symbol                      code     human readable             */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="preprocessor">        _( SUCCESS,                         0,      &quot;&quot;                          ) \</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">        _( EC_BUFFER_TOO_LARGE,             1,      &quot;buffer too large&quot;          ) \</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">        _( EC_DIRECTION,                    2,      &quot;direction&quot;                 ) \</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">        _( EC_PARAMETER,                    3,      &quot;parameter&quot;                 ) \</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor">        _( EC_NOT_FOUND,                    4,      &quot;not found&quot;                 ) \</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="preprocessor">        _( EC_PARAMETER_MISSING,            5,      &quot;missing parameter&quot;         ) \</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor">        _( EC_SYNTAX,                       6,      &quot;syntax error&quot;              ) \</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="preprocessor">        _( EC_HEX_DUMP_COUNT,               7,      &quot;hex dump count&quot;            ) \</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="preprocessor">        _( EC_INIT_FILE,                    8,      &quot;write init file failed&quot;    ) \</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="preprocessor">        _( EC_SPI_ECD_OUT_OF_RANGE,        20,      &quot;SPI ECD range&quot;             ) \</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="preprocessor">        _( EC_SPI_HALF_CLOCK_OUT_OF_RANGE, 21,      &quot;SPI half clock range&quot;      ) \</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">        _( EC_SPI_CSB_OUT_OF_RANGE,        22,      &quot;SPI CSB range&quot;             ) \</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="preprocessor">        _( EC_SPI_NOT_FOUND,               23,      &quot;SPI not found&quot;             ) \</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="preprocessor">        _( EC_SPI_BUFFER_SIZE_ODD,         24,      &quot;buffer size odd&quot;           ) \</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="preprocessor">        _( EC_SPI_BUFFER_SIZE,             25,      &quot;buffer size out of range&quot;  ) \</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="preprocessor">        _( EC_SPI_OBJECT_SIZE,             26,      &quot;spi tx/rx object size&quot;     )</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">/*******************************************************************/</span></div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="idi_8c.html#a35c55d31a7248223e061a0a57c5fa9c3">  160</a></span>&#160;<span class="preprocessor">#define EC_EXTRACT_ENUM(symbol,code,message)    symbol = code,</span></div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="idi_8c.html#aae5ed8bffd35508eca131f4d030f8516">  161</a></span>&#160;<span class="preprocessor">#define EC_EXTRACT_HUMAN_READABLE(symbol,code,message)  { code, message },</span></div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="idi_8c.html#aca7b959740043bcdc341579d1de3b587">  162</a></span>&#160;<span class="preprocessor">#define EC_HUMAN_READABLE_TERMINATE { 0, NULL }</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">//#define EC_EXTRACT_DEFINITION(symbol,code,message) { read_write, bank, offset, name },</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">//#define EC_DEFINITION_NONE { SUCCESS, 0, &quot;&quot; }</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="idi_8c.html#a16689154c729ce352ec6d746b8ab663e">  167</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;{</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="idi_8c.html#a016eb7133cd5c37fc3dda165251b102c">IDI_ERROR_CODES</a>( <a class="code" href="idi_8c.html#a35c55d31a7248223e061a0a57c5fa9c3">EC_EXTRACT_ENUM</a> )</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;} <a class="code" href="idi_8c.html#a16689154c729ce352ec6d746b8ab663e">EC_ENUM</a>;  <span class="comment">/* EC = Error Code */</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="structec__human__readable.html">  172</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structec__human__readable.html">ec_human_readable</a></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;{</div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="structec__human__readable.html#a557bf51119126ad88e40be2219c3fdb5">  174</a></span>&#160;    <a class="code" href="idi_8c.html#a16689154c729ce352ec6d746b8ab663e">EC_ENUM</a>         <a class="code" href="structec__human__readable.html#a557bf51119126ad88e40be2219c3fdb5">error_code</a>;</div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="structec__human__readable.html#a254bf0858da09c96a48daf64404eb4f8">  175</a></span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *    <a class="code" href="structec__human__readable.html#a254bf0858da09c96a48daf64404eb4f8">message</a>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;};</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77">  191</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;{</div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a8cce6fe14bba46446b1cde9350cd83d4">  193</a></span>&#160;    <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a8cce6fe14bba46446b1cde9350cd83d4">IDI_BANK_0</a>          = 0x00,</div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a8dc321bd5fd3c430335173151324376d">  194</a></span>&#160;    <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a8dc321bd5fd3c430335173151324376d">IDI_BANK_1</a>          = 0x40,</div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77afa67bc53e5d6a9d98d36c2ce6bd8da40">  195</a></span>&#160;    <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77afa67bc53e5d6a9d98d36c2ce6bd8da40">IDI_BANK_2</a>          = 0x80,</div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77ade572ed6d03459594d4d5d2705be720b">  196</a></span>&#160;    <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77ade572ed6d03459594d4d5d2705be720b">IDI_BANK_3</a>          = 0xC0,</div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77ac9315aee24112e4f7e83204f839094ea">  197</a></span>&#160;    <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77ac9315aee24112e4f7e83204f839094ea">IDI_BANK_4</a>          = 0x20,</div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a1dfbcff1752c653cb399ae9419397b19">  198</a></span>&#160;    <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a1dfbcff1752c653cb399ae9419397b19">IDI_BANK_5</a>          = 0x60,</div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a742cd72c00ec6a6eff09eda64e6636a8">  199</a></span>&#160;    <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a742cd72c00ec6a6eff09eda64e6636a8">IDI_BANK_6</a>          = 0xA0,</div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a1fc2d3667bde9f8fbfbbb4d1322eaa46">  200</a></span>&#160;    <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a1fc2d3667bde9f8fbfbbb4d1322eaa46">IDI_BANK_7</a>          = 0xE0,</div>
<div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77abda1f233f58a0a0e1833d61214b1b4dc">  201</a></span>&#160;    <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77abda1f233f58a0a0e1833d61214b1b4dc">IDI_BANK_NONE</a>       = 0xFE, </div>
<div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a481a4f0500697fe87aaa02bb843ce052">  202</a></span>&#160;    <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a481a4f0500697fe87aaa02bb843ce052">IDI_BANK_UNDEFINED</a>  = 0xFF  </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;} <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77">IDI_BANK_ENUM</a>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5">  205</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;{</div>
<div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5a74f81f4c5a0aed3f67492123def70753">  207</a></span>&#160;    <a class="code" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5a74f81f4c5a0aed3f67492123def70753">REG_DIR_NONE</a>        = 0x00,</div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5af1ec2b1dd9bbade4c573f07aec924113">  208</a></span>&#160;    <a class="code" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5af1ec2b1dd9bbade4c573f07aec924113">REG_DIR_READ</a>        = 0x01,</div>
<div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5a4fed3284189cb712e0edee0c9f08446b">  209</a></span>&#160;    <a class="code" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5a4fed3284189cb712e0edee0c9f08446b">REG_DIR_WRITE</a>       = 0x02,</div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5adb0d7022466918b7b7481154bbce753a">  210</a></span>&#160;    <a class="code" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5adb0d7022466918b7b7481154bbce753a">REG_DIR_READ_WRITE</a>  = 0x03</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;} <a class="code" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5">REG_DIR_ENUM</a>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="idi_8c.html#a48b3568347bc557b3c8d24064ce40880">  222</a></span>&#160;<span class="preprocessor">#define IDI_REGISTER_SET_DEFINITION(_) \</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="preprocessor"></span><span class="comment">/*    enum_symbol            logical   physical  byte   bus byte                                               */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="preprocessor"></span><span class="comment">/*    enum_symbol            address   offset    width  aperture   read/write      acronym        bank         */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="preprocessor"> \</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="preprocessor">    _( IDI_DI_GROUP0,            0,     0,      1,      1,      REG_DIR_READ,       &quot;dig0&quot;,     IDI_BANK_NONE   ) \</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="preprocessor">    _( IDI_DI_GROUP1,            1,     1,      1,      1,      REG_DIR_READ,       &quot;dig1&quot;,     IDI_BANK_NONE   ) \</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="preprocessor">    _( IDI_DI_GROUP2,            2,     2,      1,      1,      REG_DIR_READ,       &quot;dig2&quot;,     IDI_BANK_NONE   ) \</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="preprocessor">    _( IDI_DI_GROUP3,            3,     3,      1,      1,      REG_DIR_READ,       &quot;dig3&quot;,     IDI_BANK_NONE   ) \</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="preprocessor">    _( IDI_DI_GROUP4,            4,     4,      1,      1,      REG_DIR_READ,       &quot;dig4&quot;,     IDI_BANK_NONE   ) \</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="preprocessor">    _( IDI_DI_GROUP5,            5,     5,      1,      1,      REG_DIR_READ,       &quot;dig5&quot;,     IDI_BANK_NONE   ) \</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="preprocessor"> \</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="preprocessor">    _( IDI_INTR_BY_GROUP,        6,     6,      1,      1,      REG_DIR_READ,       &quot;isbg&quot;,     IDI_BANK_NONE   ) \</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="preprocessor"> \</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="preprocessor">    _( IDI_PEND_GROUP0,          7,     8,      1,      1,      REG_DIR_READ,       &quot;p0&quot;,       IDI_BANK_3      ) \</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="preprocessor">    _( IDI_PEND_GROUP1,          8,     9,      1,      1,      REG_DIR_READ,       &quot;p1&quot;,       IDI_BANK_3      ) \</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="preprocessor">    _( IDI_PEND_GROUP2,          9,    10,      1,      1,      REG_DIR_READ,       &quot;p2&quot;,       IDI_BANK_3      ) \</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="preprocessor">    _( IDI_PEND_GROUP3,         10,    11,      1,      1,      REG_DIR_READ,       &quot;p3&quot;,       IDI_BANK_3      ) \</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="preprocessor">    _( IDI_PEND_GROUP4,         11,    12,      1,      1,      REG_DIR_READ,       &quot;p4&quot;,       IDI_BANK_3      ) \</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="preprocessor">    _( IDI_PEND_GROUP5,         12,    13,      1,      1,      REG_DIR_READ,       &quot;p5&quot;,       IDI_BANK_3      ) \</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="preprocessor">    _( IDI_CLEAR_GROUP0,        13,     8,      1,      1,      REG_DIR_WRITE,      &quot;c0&quot;,       IDI_BANK_3      ) \</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="preprocessor">    _( IDI_CLEAR_GROUP1,        14,     9,      1,      1,      REG_DIR_WRITE,      &quot;c1&quot;,       IDI_BANK_3      ) \</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="preprocessor">    _( IDI_CLEAR_GROUP2,        15,    10,      1,      1,      REG_DIR_WRITE,      &quot;c2&quot;,       IDI_BANK_3      ) \</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="preprocessor">    _( IDI_CLEAR_GROUP3,        16,    11,      1,      1,      REG_DIR_WRITE,      &quot;c3&quot;,       IDI_BANK_3      ) \</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="preprocessor">    _( IDI_CLEAR_GROUP4,        17,    12,      1,      1,      REG_DIR_WRITE,      &quot;c4&quot;,       IDI_BANK_3      ) \</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="preprocessor">    _( IDI_CLEAR_GROUP5,        18,    13,      1,      1,      REG_DIR_WRITE,      &quot;c5&quot;,       IDI_BANK_3      ) \</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="preprocessor"> \</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="preprocessor">    _( IDI_BANK,                19,     7,      1,      1,      REG_DIR_READ_WRITE, &quot;bank&quot;,     IDI_BANK_NONE   ) \</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="preprocessor">    _( IDI_ID_LSB,              20,    14,      1,      1,      REG_DIR_READ,       &quot;idlsb&quot;,    IDI_BANK_NONE   ) \</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="preprocessor">    _( IDI_ID_MSB,              21,    15,      1,      1,      REG_DIR_READ,       &quot;idmsb&quot;,    IDI_BANK_NONE   ) \</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="preprocessor">    _( IDI_ZERO0,               22,     8,      1,      1,      REG_DIR_READ,       &quot;zb0&quot;,      IDI_BANK_0      ) \</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="preprocessor">    _( IDI_ZERO1,               23,     9,      1,      1,      REG_DIR_READ,       &quot;zb1&quot;,      IDI_BANK_0      ) \</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="preprocessor">    _( IDI_ZERO2,               24,    10,      1,      1,      REG_DIR_READ,       &quot;zb2&quot;,      IDI_BANK_0      ) \</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="preprocessor">    _( IDI_ZERO3,               25,    11,      1,      1,      REG_DIR_READ,       &quot;zb3&quot;,      IDI_BANK_0      ) \</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="preprocessor">    _( IDI_ZERO4,               26,    12,      1,      1,      REG_DIR_READ,       &quot;zb4&quot;,      IDI_BANK_0      ) \</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="preprocessor">    _( IDI_ZERO5,               27,    13,      1,      1,      REG_DIR_READ,       &quot;zb5&quot;,      IDI_BANK_0      ) \</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="preprocessor"> \</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="preprocessor">    _( IDI_EDGE_GROUP0,         28,     8,      1,      1,      REG_DIR_READ_WRITE, &quot;ep0&quot;,      IDI_BANK_1      ) \</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="preprocessor">    _( IDI_EDGE_GROUP1,         29,     9,      1,      1,      REG_DIR_READ_WRITE, &quot;ep1&quot;,      IDI_BANK_1      ) \</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="preprocessor">    _( IDI_EDGE_GROUP2,         30,    10,      1,      1,      REG_DIR_READ_WRITE, &quot;ep2&quot;,      IDI_BANK_1      ) \</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="preprocessor">    _( IDI_EDGE_GROUP3,         31,    11,      1,      1,      REG_DIR_READ_WRITE, &quot;ep3&quot;,      IDI_BANK_1      ) \</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="preprocessor">    _( IDI_EDGE_GROUP4,         32,    12,      1,      1,      REG_DIR_READ_WRITE, &quot;ep4&quot;,      IDI_BANK_1      ) \</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="preprocessor">    _( IDI_EDGE_GROUP5,         33,    13,      1,      1,      REG_DIR_READ_WRITE, &quot;ep5&quot;,      IDI_BANK_1      ) \</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="preprocessor">    _( IDI_INTR_BIT_GROUP0,     34,     8,      1,      1,      REG_DIR_READ_WRITE, &quot;ibe0&quot;,     IDI_BANK_2      ) \</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="preprocessor">    _( IDI_INTR_BIT_GROUP1,     35,     9,      1,      1,      REG_DIR_READ_WRITE, &quot;ibe1&quot;,     IDI_BANK_2      ) \</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="preprocessor">    _( IDI_INTR_BIT_GROUP2,     36,    10,      1,      1,      REG_DIR_READ_WRITE, &quot;ibe2&quot;,     IDI_BANK_2      ) \</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="preprocessor">    _( IDI_INTR_BIT_GROUP3,     37,    11,      1,      1,      REG_DIR_READ_WRITE, &quot;ibe3&quot;,     IDI_BANK_2      ) \</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="preprocessor">    _( IDI_INTR_BIT_GROUP4,     38,    12,      1,      1,      REG_DIR_READ_WRITE, &quot;ibe4&quot;,     IDI_BANK_2      ) \</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="preprocessor">    _( IDI_INTR_BIT_GROUP5,     39,    13,      1,      1,      REG_DIR_READ_WRITE, &quot;ibe5&quot;,     IDI_BANK_2      ) \</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="preprocessor">\</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="preprocessor">    _( SPI_ID_LSB,              40,     8,      1,      1,      REG_DIR_READ,       &quot;sidlsb&quot;,   IDI_BANK_6      ) \</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="preprocessor">    _( SPI_ID_MSB,              41,     9,      1,      1,      REG_DIR_READ,       &quot;sidmsb&quot;,   IDI_BANK_6      ) \</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="preprocessor">    _( SPI_CONFIG,              42,    10,      1,      1,      REG_DIR_READ_WRITE, &quot;scfg&quot;,     IDI_BANK_6      ) \</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="preprocessor">    _( SPI_ECD,                 43,    11,      1,      1,      REG_DIR_READ_WRITE, &quot;secd&quot;,     IDI_BANK_6      ) \</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="preprocessor">    _( SPI_HCI_LSB,             44,    12,      1,      1,      REG_DIR_READ_WRITE, &quot;shclsb&quot;,   IDI_BANK_6      ) \</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="preprocessor">    _( SPI_HCI_MSB,             45,    13,      1,      1,      REG_DIR_READ_WRITE, &quot;shcmsb&quot;,   IDI_BANK_6      ) \</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="preprocessor">    _( SPI_DATA,                46,     8,      1,      1,      REG_DIR_READ_WRITE, &quot;sdata&quot;,    IDI_BANK_7      ) \</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="preprocessor">    _( SPI_TX_STATUS,           47,     9,      1,      1,      REG_DIR_READ,       &quot;stxf&quot;,     IDI_BANK_7      ) \</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="preprocessor">    _( SPI_RX_STATUS,           48,    10,      1,      1,      REG_DIR_READ,       &quot;srxf&quot;,     IDI_BANK_7      ) \</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="preprocessor">    _( SPI_COMMIT,              49,    11,      1,      1,      REG_DIR_READ_WRITE, &quot;scmt&quot;,     IDI_BANK_7      ) \</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="preprocessor">    _( IDI_UNDEFINED,           50,     0,      0,      0,      REG_DIR_NONE,       &quot;&quot;,         IDI_BANK_UNDEFINED  )</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">/*******************************************************************/</span></div>
<div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="idi_8c.html#a26e6d0bb7953f29dd0c919f3be8a5bdc">  285</a></span>&#160;<span class="preprocessor">#define REG_BANK_SET(bank)          ( bank   &lt;&lt;   8 )</span></div>
<div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="idi_8c.html#a42386da30c700867b129b9f1fc45fdc0">  286</a></span>&#160;<span class="preprocessor">#define REG_OFFSET_SET(offset)      ( offset &amp; 0xff )</span></div>
<div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="idi_8c.html#a1f8d0d21d4d226982f2ad9a4916a0f3d">  287</a></span>&#160;<span class="preprocessor">#define REG_LOCATION_BANK_GET(location)      ( ( location &gt;&gt; 8 ) &amp; 0xFF )</span></div>
<div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="idi_8c.html#ab8bf1943ccafe17f91e3a09dc431fd44">  288</a></span>&#160;<span class="preprocessor">#define REG_LOCATION_OFFSET_GET(location)    ( location &amp; 0xff )</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="idi_8c.html#af76545581dcf26dc754c173d871c8ae3">  291</a></span>&#160;<span class="preprocessor">#define REG_EXTRACT_ENUM(symbol,index,offset,register_bytes,aperture_bytes,read_write,name,bank) symbol = ( REG_BANK_SET(bank) | REG_OFFSET_SET(offset) ),</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="idi_8c.html#adb4cfa517096778a767098b1bc2ebc86">  293</a></span>&#160;<span class="preprocessor">#define REG_EXTRACT_DEFINITION(symbol,index,offset,register_bytes,aperture_bytes,read_write,name,bank) { ( (IDI_REG_ENUM) (REG_BANK_SET(bank) | REG_OFFSET_SET(offset)) ), read_write, bank, offset, #symbol, name },</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">/*******************************************************************/</span></div>
<div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="idi_8c.html#a3bd0ce53eda9237f7ec1a515f89e907b">  296</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;{</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="idi_8c.html#a48b3568347bc557b3c8d24064ce40880">IDI_REGISTER_SET_DEFINITION</a>( <a class="code" href="idi_8c.html#af76545581dcf26dc754c173d871c8ae3">REG_EXTRACT_ENUM</a> )</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;} <a class="code" href="idi_8c.html#a3bd0ce53eda9237f7ec1a515f89e907b">IDI_REG_ENUM</a>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">/*******************************************************************/</span></div>
<div class="line"><a name="l00302"></a><span class="lineno"><a class="line" href="structreg__definition.html">  302</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structreg__definition.html">reg_definition</a></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;{</div>
<div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="structreg__definition.html#a51dc88ef979cd6db270b6d5dda52e0b6">  304</a></span>&#160;    <a class="code" href="idi_8c.html#a3bd0ce53eda9237f7ec1a515f89e907b">IDI_REG_ENUM</a>    <a class="code" href="structreg__definition.html#a51dc88ef979cd6db270b6d5dda52e0b6">symbol</a>;</div>
<div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="structreg__definition.html#a5f2826360f9ae88dfb5a673d9c4bfebe">  305</a></span>&#160;    <a class="code" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5">REG_DIR_ENUM</a>    <a class="code" href="structreg__definition.html#a5f2826360f9ae88dfb5a673d9c4bfebe">direction</a>;</div>
<div class="line"><a name="l00306"></a><span class="lineno"><a class="line" href="structreg__definition.html#a09e69f821de1fa6dc424798a7a3dec86">  306</a></span>&#160;    <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77">IDI_BANK_ENUM</a>   <a class="code" href="structreg__definition.html#a09e69f821de1fa6dc424798a7a3dec86">bank</a>;</div>
<div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="structreg__definition.html#ad01d09ace616a7eef1498e2c04ad6e6d">  307</a></span>&#160;    uint16_t        <a class="code" href="structreg__definition.html#ad01d09ace616a7eef1498e2c04ad6e6d">physical_offset</a>;</div>
<div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="structreg__definition.html#a7e9d3f82b1d2ab1009d4df11f1ba7db6">  308</a></span>&#160;    <span class="keywordtype">char</span> *          <a class="code" href="structreg__definition.html#a7e9d3f82b1d2ab1009d4df11f1ba7db6">symbol_name</a>;</div>
<div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="structreg__definition.html#a2a2bd3185ded23ec5bf2964bac848b7f">  309</a></span>&#160;    <span class="keywordtype">char</span> *          <a class="code" href="structreg__definition.html#a2a2bd3185ded23ec5bf2964bac848b7f">acronym</a>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;};</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">/*******************************************************************/</span></div>
<div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="idi_8c.html#a4715fd103e903bf93238963a9623101d">  315</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;{</div>
<div class="line"><a name="l00317"></a><span class="lineno"><a class="line" href="idi_8c.html#a4715fd103e903bf93238963a9623101da473588067cbc33d34ebe1f6815dcdd4f">  317</a></span>&#160;    <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101da473588067cbc33d34ebe1f6815dcdd4f">IDI_CSB_SOFTWARE</a>    = 0,</div>
<div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="idi_8c.html#a4715fd103e903bf93238963a9623101dab45e8afa970f342353f60ca217b37253">  318</a></span>&#160;    <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101dab45e8afa970f342353f60ca217b37253">IDI_CSB_BUFFER</a>      = 1,</div>
<div class="line"><a name="l00319"></a><span class="lineno"><a class="line" href="idi_8c.html#a4715fd103e903bf93238963a9623101da72c215ca12871c8b04f9a1324f80cb2e">  319</a></span>&#160;    <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101da72c215ca12871c8b04f9a1324f80cb2e">IDI_CSB_UINT8</a>       = 2,</div>
<div class="line"><a name="l00320"></a><span class="lineno"><a class="line" href="idi_8c.html#a4715fd103e903bf93238963a9623101dac825304c7d28288091e65b0e0bfeb440">  320</a></span>&#160;    <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101dac825304c7d28288091e65b0e0bfeb440">IDI_CSB_UINT16</a>      = 3</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;} <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101d">SPI_CSB_ENUM</a>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">/*******************************************************************/</span></div>
<div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">  324</a></span>&#160;<span class="keyword">enum</span> { <a class="code" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a> = 16 };</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">/*******************************************************************/</span></div>
<div class="line"><a name="l00327"></a><span class="lineno"><a class="line" href="structspi__cfg.html">  327</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structspi__cfg.html">spi_cfg</a></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;{</div>
<div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="structspi__cfg.html#a7cd0897d273b604ea90aaf525ca5d318">  329</a></span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>                <a class="code" href="structspi__cfg.html#a7cd0897d273b604ea90aaf525ca5d318">sdio_wrap</a>;              </div>
<div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="structspi__cfg.html#abbceffb19dd814b30b890c4c3710a229">  330</a></span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>                <a class="code" href="structspi__cfg.html#abbceffb19dd814b30b890c4c3710a229">sdo_polarity</a>;           </div>
<div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="structspi__cfg.html#a010045ad60dc510daa368259399de229">  331</a></span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>                <a class="code" href="structspi__cfg.html#a010045ad60dc510daa368259399de229">sdi_polarity</a>;           </div>
<div class="line"><a name="l00332"></a><span class="lineno"><a class="line" href="structspi__cfg.html#a2613a037b4632a6d74e89aeb62d12344">  332</a></span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>                <a class="code" href="structspi__cfg.html#a2613a037b4632a6d74e89aeb62d12344">sclk_phase</a>;             </div>
<div class="line"><a name="l00333"></a><span class="lineno"><a class="line" href="structspi__cfg.html#a08a45f7aec9d8b6e59e91a56dc889384">  333</a></span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>                <a class="code" href="structspi__cfg.html#a08a45f7aec9d8b6e59e91a56dc889384">sclk_polarity</a>;          </div>
<div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="structspi__cfg.html#aede15f437dcd3a33a5605c71b3bf3801">  334</a></span>&#160;    <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101d">SPI_CSB_ENUM</a>        <a class="code" href="structspi__cfg.html#aede15f437dcd3a33a5605c71b3bf3801">chip_select_behavior</a>;   </div>
<div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="structspi__cfg.html#a0b6f06a341aa4e9fbbbb33b417b5f722">  335</a></span>&#160;    uint8_t             <a class="code" href="structspi__cfg.html#a0b6f06a341aa4e9fbbbb33b417b5f722">end_cycle_delay</a>;        </div>
<div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="structspi__cfg.html#ad8d6adceadaec7f4c92349ec8beb720d">  336</a></span>&#160;    uint16_t            <a class="code" href="structspi__cfg.html#ad8d6adceadaec7f4c92349ec8beb720d">half_clock_interval</a>;    </div>
<div class="line"><a name="l00338"></a><span class="lineno"><a class="line" href="structspi__cfg.html#aaed71f77ad7200a8f4bf0f1cdd0fb328">  338</a></span>&#160;    <span class="keywordtype">double</span>              <a class="code" href="structspi__cfg.html#aaed71f77ad7200a8f4bf0f1cdd0fb328">clock_hz</a>;               </div>
<div class="line"><a name="l00339"></a><span class="lineno"><a class="line" href="structspi__cfg.html#adc10d917ca7551b41164711a54684a51">  339</a></span>&#160;    <span class="keywordtype">double</span>              <a class="code" href="structspi__cfg.html#adc10d917ca7551b41164711a54684a51">end_delay_ns</a>;           </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;};</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">/*******************************************************************/</span></div>
<div class="line"><a name="l00342"></a><span class="lineno"><a class="line" href="structspi__status.html">  342</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structspi__status.html">spi_status</a></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;{</div>
<div class="line"><a name="l00344"></a><span class="lineno"><a class="line" href="structspi__status.html#a234b821e581a221369b67154e3e7cfa8">  344</a></span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>    <a class="code" href="structspi__status.html#a234b821e581a221369b67154e3e7cfa8">tx_status</a>;  <span class="comment">/* meaning this is specific to TX status, not RX status */</span></div>
<div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="structspi__status.html#a3b60b3c5cbe0736af58dccbde4e3161d">  345</a></span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>    <a class="code" href="structspi__status.html#a3b60b3c5cbe0736af58dccbde4e3161d">full</a>;</div>
<div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="structspi__status.html#a68f61f8d0fb7e552cf463bb4926b5f1d">  346</a></span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>    <a class="code" href="structspi__status.html#a68f61f8d0fb7e552cf463bb4926b5f1d">empty</a>;</div>
<div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="structspi__status.html#a771649fbbbbf3161bbddd4d49db51552">  347</a></span>&#160;    <span class="keywordtype">int</span>     <a class="code" href="structspi__status.html#a771649fbbbbf3161bbddd4d49db51552">fifo_size</a>;</div>
<div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="structspi__status.html#a1515bdf17aa69c23285df7f9637ca30e">  348</a></span>&#160;    <span class="keywordtype">int</span>     <a class="code" href="structspi__status.html#a1515bdf17aa69c23285df7f9637ca30e">fifo_count</a>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;};</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">/*******************************************************************/</span></div>
<div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="idi_8c.html#a3176ade75a5108d4b5e4f61ca2c1e842">  353</a></span>&#160;<span class="preprocessor">#define IDI_DIN_GROUP_SIZE  8</span></div>
<div class="line"><a name="l00354"></a><span class="lineno"><a class="line" href="idi_8c.html#a1672fbebd0a87ba0ad4abbaaf4d7cb56">  354</a></span>&#160;<span class="preprocessor">#define IDI_DIN_SHIFT_RIGHT 3</span></div>
<div class="line"><a name="l00355"></a><span class="lineno"><a class="line" href="idi_8c.html#a49429b2baa0cec368650dc945b1f77c7">  355</a></span>&#160;<span class="preprocessor">#define IDI_DIN_GROUP_QTY   6</span></div>
<div class="line"><a name="l00356"></a><span class="lineno"><a class="line" href="idi_8c.html#ac0b401f4d27a710797a76887edbc77da">  356</a></span>&#160;<span class="preprocessor">#define IDI_DIN_QTY         ( IDI_DIN_GROUP_SIZE * IDI_DIN_GROUP_QTY )</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div>
<div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="structdin__cfg.html">  359</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structdin__cfg.html">din_cfg</a></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;{</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keyword">struct</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    {</div>
<div class="line"><a name="l00363"></a><span class="lineno"><a class="line" href="structdin__cfg.html#a2ffbf2409b32f9aeccf526a775fb5a61">  363</a></span>&#160;        <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>    <a class="code" href="structdin__cfg.html#a2ffbf2409b32f9aeccf526a775fb5a61">falling_edge</a>;</div>
<div class="line"><a name="l00364"></a><span class="lineno"><a class="line" href="structdin__cfg.html#af2843635bd1b2022a5e6dcaec702d780">  364</a></span>&#160;        <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>    <a class="code" href="structdin__cfg.html#af2843635bd1b2022a5e6dcaec702d780">interrupt_enable</a>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    } <a class="code" href="structdin__cfg.html#aa99e288cbad00f916f13ada13d41d05d">chan</a>[<a class="code" href="idi_8c.html#ac0b401f4d27a710797a76887edbc77da">IDI_DIN_QTY</a>];</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;};</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">/*******************************************************************/</span></div>
<div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="idi_8c.html#a7a7a8212bf3a00a8a97ac4fd9d8b0f29">  372</a></span>&#160;<span class="preprocessor">#define FRAM_BLOCK_SIZE      256</span></div>
<div class="line"><a name="l00373"></a><span class="lineno"><a class="line" href="idi_8c.html#a46af412eb7225c2d98d4816555cd3da6">  373</a></span>&#160;<span class="preprocessor">#define IDI_MESSAGE_SIZE     256</span></div>
<div class="line"><a name="l00374"></a><span class="lineno"><a class="line" href="idi_8c.html#a2b82f3c0a4c5c1a46da4c23f43fe1832">  374</a></span>&#160;<span class="preprocessor">#define SPI_BLOCK_SIZE       256</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div>
<div class="line"><a name="l00376"></a><span class="lineno"><a class="line" href="structidi__dataset.html">  376</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structidi__dataset.html">idi_dataset</a></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;{</div>
<div class="line"><a name="l00378"></a><span class="lineno"><a class="line" href="structidi__dataset.html#a295c955273759b0f83aaabe50bd981f0">  378</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdin__cfg.html">din_cfg</a>      <a class="code" href="structdin__cfg.html">din_cfg</a>;</div>
<div class="line"><a name="l00379"></a><span class="lineno"><a class="line" href="structidi__dataset.html#a524ca5c3ea3d76688ccecb7f299f31f4">  379</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structspi__cfg.html">spi_cfg</a>      <a class="code" href="structspi__cfg.html">spi_cfg</a>;</div>
<div class="line"><a name="l00380"></a><span class="lineno"><a class="line" href="structidi__dataset.html#aae9e92994011c0d276bdd28589d9aa71">  380</a></span>&#160;    uint8_t             <a class="code" href="structidi__dataset.html#aae9e92994011c0d276bdd28589d9aa71">bank_previous</a>;</div>
<div class="line"><a name="l00381"></a><span class="lineno"><a class="line" href="structidi__dataset.html#a27de55c6cee77e53ec9631f1f489a97a">  381</a></span>&#160;    uint16_t            <a class="code" href="structidi__dataset.html#a27de55c6cee77e53ec9631f1f489a97a">base_address</a>;</div>
<div class="line"><a name="l00382"></a><span class="lineno"><a class="line" href="structidi__dataset.html#a17f90bb8bd6a75c9d05d2df69b5e6ba3">  382</a></span>&#160;    uint16_t            <a class="code" href="structidi__dataset.html#a17f90bb8bd6a75c9d05d2df69b5e6ba3">spi_id</a>;</div>
<div class="line"><a name="l00383"></a><span class="lineno"><a class="line" href="structidi__dataset.html#a6513343c81785c28903fc3c4d1d50206">  383</a></span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>                <a class="code" href="structidi__dataset.html#a6513343c81785c28903fc3c4d1d50206">io_simulate</a>;</div>
<div class="line"><a name="l00384"></a><span class="lineno"><a class="line" href="structidi__dataset.html#ad5d4eafc81d2a1f443f9a5a09b56efe0">  384</a></span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>                <a class="code" href="structidi__dataset.html#ad5d4eafc81d2a1f443f9a5a09b56efe0">io_report</a>;</div>
<div class="line"><a name="l00385"></a><span class="lineno"><a class="line" href="structidi__dataset.html#a02b7232561c6ed9540ce106d328eedf8">  385</a></span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *        <a class="code" href="structidi__dataset.html#a02b7232561c6ed9540ce106d328eedf8">svn_revision_string</a>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="comment">/* this is a scratch pad for FRAM transactions */</span></div>
<div class="line"><a name="l00388"></a><span class="lineno"><a class="line" href="structidi__dataset.html#a4efa21fb4be298d529ae04ed2ca3466e">  388</a></span>&#160;    uint8_t             <a class="code" href="structidi__dataset.html#a4efa21fb4be298d529ae04ed2ca3466e">fram_block</a>[<a class="code" href="idi_8c.html#a7a7a8212bf3a00a8a97ac4fd9d8b0f29">FRAM_BLOCK_SIZE</a>];</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="comment">/* this is a scratch pad for SPI transactions */</span></div>
<div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="structidi__dataset.html#a4370ed563af116d0087bdf1285ef35ea">  391</a></span>&#160;    uint8_t             <a class="code" href="structidi__dataset.html#a4370ed563af116d0087bdf1285ef35ea">spi_block</a>[<a class="code" href="idi_8c.html#a2b82f3c0a4c5c1a46da4c23f43fe1832">SPI_BLOCK_SIZE</a>];</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">/* this is a scratch pad area for report generation */</span></div>
<div class="line"><a name="l00394"></a><span class="lineno"><a class="line" href="structidi__dataset.html#a90f8e8aa30448abeaead3953145c5ce6">  394</a></span>&#160;    <span class="keywordtype">char</span> *              <a class="code" href="structidi__dataset.html#a90f8e8aa30448abeaead3953145c5ce6">message</a>[<a class="code" href="idi_8c.html#a46af412eb7225c2d98d4816555cd3da6">IDI_MESSAGE_SIZE</a>];</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;};</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">/*** Software revision as determined by subversion commits */</span></div>
<div class="line"><a name="l00408"></a><span class="lineno"><a class="line" href="idi_8c.html#aff30ce3e78536dd65f538be3989eb9ea">  408</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="idi_8c.html#aff30ce3e78536dd65f538be3989eb9ea">idi_svn_revision_string</a>[] = { <a class="code" href="idi_8c.html#ac80cd7b02810a77973bd938d9c2871ad">IDI_REV</a> };</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">/*** Error code to human readable data structure */</span></div>
<div class="line"><a name="l00411"></a><span class="lineno"><a class="line" href="idi_8c.html#a1d16f5e8ad9dd6c76f321ac20a19f22b">  411</a></span>&#160;<span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structec__human__readable.html">ec_human_readable</a> <a class="code" href="structec__human__readable.html">ec_human_readable</a>[] =</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;{</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <a class="code" href="idi_8c.html#a016eb7133cd5c37fc3dda165251b102c">IDI_ERROR_CODES</a>( <a class="code" href="idi_8c.html#aae5ed8bffd35508eca131f4d030f8516">EC_EXTRACT_HUMAN_READABLE</a> )</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <a class="code" href="idi_8c.html#aca7b959740043bcdc341579d1de3b587">EC_HUMAN_READABLE_TERMINATE</a></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;};</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">/*** a read only list of bank names - same as enumerated values */</span></div>
<div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="idi_8c.html#a68ed5a64a223c6c9c2ef8114ca1b8140">  418</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="idi_8c.html#a68ed5a64a223c6c9c2ef8114ca1b8140">idi_bank_symbol_names</a>[] =</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;{</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="stringliteral">&quot;IDI_BANK_0&quot;</span>,</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="stringliteral">&quot;IDI_BANK_1&quot;</span>,</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="stringliteral">&quot;IDI_BANK_2&quot;</span>,</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="stringliteral">&quot;IDI_BANK_3&quot;</span>,</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="stringliteral">&quot;IDI_BANK_4&quot;</span>,</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="stringliteral">&quot;IDI_BANK_5&quot;</span>,</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="stringliteral">&quot;IDI_BANK_6&quot;</span>,</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="stringliteral">&quot;IDI_BANK_7&quot;</span>,</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="stringliteral">&quot;IDI_BANK_NONE&quot;</span>,</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="stringliteral">&quot;IDI_BANK_UNDEFINED&quot;</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;};</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">/*** a read only list of register parameters */</span></div>
<div class="line"><a name="l00433"></a><span class="lineno"><a class="line" href="idi_8c.html#aeb7b3b3e3ebcfb239c044d8107497cf6">  433</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structreg__definition.html">reg_definition</a> <a class="code" href="idi_8c.html#aeb7b3b3e3ebcfb239c044d8107497cf6">definitions</a>[] =</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;{</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <a class="code" href="idi_8c.html#a48b3568347bc557b3c8d24064ce40880">IDI_REGISTER_SET_DEFINITION</a>( <a class="code" href="idi_8c.html#adb4cfa517096778a767098b1bc2ebc86">REG_EXTRACT_DEFINITION</a> )</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;};</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">/*** Global data structure which is restored during initialization and saved</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment"> *   during application termination.</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00441"></a><span class="lineno"><a class="line" href="idi_8c.html#a6f70d49024561badc96c80f6dc08d02d">  441</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structidi__dataset.html">idi_dataset</a>  <a class="code" href="structidi__dataset.html">idi_dataset</a>;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">/*    &lt; &lt; &lt; &lt;  R E G I S T E R  R E P O R T I N G  A N D  B A N K I N G  F U N C T I O N S  &gt; &gt; &gt; &gt;       */</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">/**********************************************************************/</span></div>
<div class="line"><a name="l00456"></a><span class="lineno"><a class="line" href="idi_8c.html#ace0b0cdb3b5ab2c5c7bcf9a02b8a4f33">  456</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="idi_8c.html#ace0b0cdb3b5ab2c5c7bcf9a02b8a4f33">IDI_Symbol_Name_Bank</a>( <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77">IDI_BANK_ENUM</a> bank )</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;{</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordtype">int</span> index;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">switch</span>( bank )</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a8cce6fe14bba46446b1cde9350cd83d4">IDI_BANK_0</a>:            index = 0;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a8dc321bd5fd3c430335173151324376d">IDI_BANK_1</a>:            index = 1;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77afa67bc53e5d6a9d98d36c2ce6bd8da40">IDI_BANK_2</a>:            index = 2;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77ade572ed6d03459594d4d5d2705be720b">IDI_BANK_3</a>:            index = 3;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77ac9315aee24112e4f7e83204f839094ea">IDI_BANK_4</a>:            index = 4;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a1dfbcff1752c653cb399ae9419397b19">IDI_BANK_5</a>:            index = 5;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a742cd72c00ec6a6eff09eda64e6636a8">IDI_BANK_6</a>:            index = 6;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a1fc2d3667bde9f8fbfbbb4d1322eaa46">IDI_BANK_7</a>:            index = 7;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77abda1f233f58a0a0e1833d61214b1b4dc">IDI_BANK_NONE</a>:         index = 8;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a481a4f0500697fe87aaa02bb843ce052">IDI_BANK_UNDEFINED</a>:    index = 9;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="idi_8c.html#a68ed5a64a223c6c9c2ef8114ca1b8140">idi_bank_symbol_names</a>[index];</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;}</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">/**********************************************************************/</span></div>
<div class="line"><a name="l00485"></a><span class="lineno"><a class="line" href="idi_8c.html#a07717d410edbdf91e98db3fdb526a0cc">  485</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a07717d410edbdf91e98db3fdb526a0cc">IDI_Register_Report_CSV</a>( <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structreg__definition.html">reg_definition</a> * table, FILE * out )</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;{</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordtype">int</span> index = 0;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    fprintf( out, <span class="stringliteral">&quot;\&quot;acronym\&quot;,\&quot;symbol\&quot;,\&quot;bank\&quot;,\&quot;direction\&quot;,\&quot;physical_offset\&quot;\n&quot;</span> );</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        fprintf( out, <span class="stringliteral">&quot;\&quot;%s\&quot;,&quot;</span>, table[index].acronym     );</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        fprintf( out, <span class="stringliteral">&quot;\&quot;%s\&quot;,&quot;</span>, table[index].symbol_name );</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="keywordflow">switch</span>( table[index].bank )</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a8cce6fe14bba46446b1cde9350cd83d4">IDI_BANK_0</a>:            fprintf( out, <span class="stringliteral">&quot;IDI_BANK_0&quot;</span> );           <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a8dc321bd5fd3c430335173151324376d">IDI_BANK_1</a>:            fprintf( out, <span class="stringliteral">&quot;IDI_BANK_1&quot;</span> );           <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77afa67bc53e5d6a9d98d36c2ce6bd8da40">IDI_BANK_2</a>:            fprintf( out, <span class="stringliteral">&quot;IDI_BANK_2&quot;</span> );           <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77ade572ed6d03459594d4d5d2705be720b">IDI_BANK_3</a>:            fprintf( out, <span class="stringliteral">&quot;IDI_BANK_3&quot;</span> );           <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77ac9315aee24112e4f7e83204f839094ea">IDI_BANK_4</a>:            fprintf( out, <span class="stringliteral">&quot;IDI_BANK_4&quot;</span> );           <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a1dfbcff1752c653cb399ae9419397b19">IDI_BANK_5</a>:            fprintf( out, <span class="stringliteral">&quot;IDI_BANK_5&quot;</span> );           <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a742cd72c00ec6a6eff09eda64e6636a8">IDI_BANK_6</a>:            fprintf( out, <span class="stringliteral">&quot;IDI_BANK_6&quot;</span> );           <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a1fc2d3667bde9f8fbfbbb4d1322eaa46">IDI_BANK_7</a>:            fprintf( out, <span class="stringliteral">&quot;IDI_BANK_7&quot;</span> );           <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77abda1f233f58a0a0e1833d61214b1b4dc">IDI_BANK_NONE</a>:         fprintf( out, <span class="stringliteral">&quot;IDI_BANK_NONE&quot;</span> );        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a481a4f0500697fe87aaa02bb843ce052">IDI_BANK_UNDEFINED</a>:    fprintf( out, <span class="stringliteral">&quot;IDI_BANK_UNDEFINED&quot;</span> );   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        fprintf( out, <span class="stringliteral">&quot;,&quot;</span> );</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keywordflow">switch</span>( table[index].direction )</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5a74f81f4c5a0aed3f67492123def70753">REG_DIR_NONE</a>:          fprintf( out, <span class="stringliteral">&quot;REG_DIR_NONE&quot;</span> );         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5af1ec2b1dd9bbade4c573f07aec924113">REG_DIR_READ</a>:          fprintf( out, <span class="stringliteral">&quot;REG_DIR_READ&quot;</span> );         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5a4fed3284189cb712e0edee0c9f08446b">REG_DIR_WRITE</a>:         fprintf( out, <span class="stringliteral">&quot;REG_DIR_WRITE&quot;</span> );        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5adb0d7022466918b7b7481154bbce753a">REG_DIR_READ_WRITE</a>:    fprintf( out, <span class="stringliteral">&quot;REG_DIR_READ_WRITE&quot;</span> );   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        fprintf( out, <span class="stringliteral">&quot;,&quot;</span> );</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        fprintf( out, <span class="stringliteral">&quot;\&quot;%d\&quot;&quot;</span>, table[index].physical_offset );</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        fprintf( out, <span class="stringliteral">&quot;\n\r&quot;</span> ); <span class="comment">/* separate so we have flexibility to re-organize columns */</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        index++;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    } <span class="keywordflow">while</span> ( definitions[index].direction != <a class="code" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5a74f81f4c5a0aed3f67492123def70753">REG_DIR_NONE</a> );</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;}</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">/*    &lt; &lt; &lt; &lt;  M I S C E L L A N E O U S   F U N C T I O N S  &gt; &gt; &gt; &gt;                                     */</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00541"></a><span class="lineno"><a class="line" href="idi_8c.html#a95fbfdb665e1aa54eb081d7d5c7af6a8">  541</a></span>&#160;<a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> <a class="code" href="idi_8c.html#a95fbfdb665e1aa54eb081d7d5c7af6a8">String_To_Bool</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> * str )</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;{</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordflow">switch</span>( str[0] )</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;0&#39;</span>:</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;f&#39;</span>:</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;F&#39;</span>:</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;1&#39;</span>:</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>:</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;T&#39;</span>:</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;}</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00570"></a><span class="lineno"><a class="line" href="idi_8c.html#abc6126af1d45847bc59afa0aa3216b04a61beeb8caa7eef5ea8ccec0c05cd142e">  570</a></span>&#160;<span class="keyword">enum</span> { <a class="code" href="idi_8c.html#abc6126af1d45847bc59afa0aa3216b04a61beeb8caa7eef5ea8ccec0c05cd142e">HEX_DUMP_BYTES_PER_LINE</a> = 16 };</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div>
<div class="line"><a name="l00572"></a><span class="lineno"><a class="line" href="idi_8c.html#afe81fee380d83ce9efc1bca190b7d2ba">  572</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#afe81fee380d83ce9efc1bca190b7d2ba">Hex_Dump_Line</a>( uint16_t address, <span class="keywordtype">size_t</span> count, uint8_t * buffer, FILE * out )</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;{</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordtype">size_t</span>  index;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordtype">char</span>    str_temp[8];</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordtype">char</span>    str_ascii[20];</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordtype">char</span>    str_hex_list[64];</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="comment">//if ( count &gt; 16 ) return -EC_BUFFER_TOO_LARGE;</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">if</span> ( count &gt; <a class="code" href="idi_8c.html#abc6126af1d45847bc59afa0aa3216b04a61beeb8caa7eef5ea8ccec0c05cd142e">HEX_DUMP_BYTES_PER_LINE</a> ) <span class="keywordflow">return</span> -EC_HEX_DUMP_COUNT;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    sprintf( str_hex_list, <span class="stringliteral">&quot;%04X: &quot;</span>, ((<span class="keywordtype">int</span>) address) );</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    strcpy( str_ascii,    <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">for</span> ( index = 0; index &lt; count; index++ )</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    {   <span class="comment">/* append/build hex list */</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        sprintf( str_temp, <span class="stringliteral">&quot;%02X&quot;</span>, buffer[index] );</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        strcat( str_hex_list, str_temp );</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="comment">/* output spacer in the middle and end */</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="keywordflow">if</span> ( 0x07 == ( index &amp; 0x07 ) ) strcat( str_hex_list, <span class="stringliteral">&quot;  &quot;</span> );</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="comment">/* add a space after hex value and spacers */</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        strcat( str_hex_list, <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="comment">/* append/build ASCII list */</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="keywordflow">if</span> ( ( buffer[index] &lt; <span class="charliteral">&#39; &#39;</span> ) || ( buffer[index] &gt; <span class="charliteral">&#39;~&#39;</span> ) )</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        { <span class="comment">/* since these characters will not display replace them with a period */</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            strcat( str_ascii, <span class="stringliteral">&quot;.&quot;</span> );</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        }</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        { <span class="comment">/* print the character as is */</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            sprintf( str_temp, <span class="stringliteral">&quot;%c&quot;</span>, buffer[index] );</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            strcat( str_ascii, str_temp );</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="comment">/* compute any remaining filler required to properly align ASCII portion */</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    index = strlen( str_hex_list );</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="comment">/* total = ( 6 ) &#39;address characters&#39; + ( 16 * 3 ) &#39;hex characters&#39; + ( 2 * 3 ) &#39;spacers&#39;  = 60 */</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    count = 60 - index;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">while</span> ( count &gt; 0 )</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    { <span class="comment">/* add sufficient characters so that the ASCII portion is in the proper columns */</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        strcat( str_hex_list, <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        count--;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    }</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="comment">/* output the results */</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    fprintf( out, <span class="stringliteral">&quot;%s%s\n&quot;</span>, str_hex_list, str_ascii );</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;}</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00624"></a><span class="lineno"><a class="line" href="idi_8c.html#a5321c7cef8321867817b5c9008c27a1a">  624</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="idi_8c.html#a5321c7cef8321867817b5c9008c27a1a">ec_unknown</a>[] = <span class="stringliteral">&quot;unknown error code&quot;</span>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div>
<div class="line"><a name="l00626"></a><span class="lineno"><a class="line" href="idi_8c.html#a898d8519b441ee16e816759982951490">  626</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="idi_8c.html#a898d8519b441ee16e816759982951490">EC_Code_To_Human_Readable</a>( <a class="code" href="idi_8c.html#a16689154c729ce352ec6d746b8ab663e">EC_ENUM</a> error_code )</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;{</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordtype">int</span> index;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordflow">if</span> ( error_code &lt; 0 ) error_code = -error_code;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    index = 0;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">while</span>( NULL != ec_human_readable[index].<a class="code" href="structidi__dataset.html#a90f8e8aa30448abeaead3953145c5ce6">message</a> )</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    {</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <span class="keywordflow">if</span> ( ((<a class="code" href="idi_8c.html#a16689154c729ce352ec6d746b8ab663e">EC_ENUM</a>) error_code) == ec_human_readable[index].error_code )</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            <span class="keywordflow">return</span> ec_human_readable[index].<a class="code" href="structec__human__readable.html#a254bf0858da09c96a48daf64404eb4f8">message</a>;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        index++;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    }</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="idi_8c.html#a5321c7cef8321867817b5c9008c27a1a">ec_unknown</a>;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;}</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00652"></a><span class="lineno"><a class="line" href="idi_8c.html#ae02625dd3f93cc87fdab4b6e2c15ed6c">  652</a></span>&#160;<a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> <a class="code" href="idi_8c.html#ae02625dd3f93cc87fdab4b6e2c15ed6c">Character_Get</a>( <span class="keywordtype">int</span> * character )</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;{</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordtype">int</span>  char_temp;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="preprocessor">#ifdef __BORLANDC__</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">if</span> ( kbhit() )</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        char_temp = getch();</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        result    = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    }</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        char_temp = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    char_temp = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    result    = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordflow">if</span> ( NULL != character ) *character = char_temp;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;}</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment">/*    &lt; &lt; &lt; &lt;  I / O   P R O C E S S I N G   &gt; &gt; &gt; &gt;                                                      */</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div>
<div class="line"><a name="l00680"></a><span class="lineno"><a class="line" href="idi_8c.html#a89aafcecb31ea285f00ff64a436d570d">  680</a></span>&#160;<span class="preprocessor">#define IDI_IO_DIRECTION_TEST   1</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00692"></a><span class="lineno"><a class="line" href="idi_8c.html#a9708b509decc6f844ce474a85af2484b">  692</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> * <a class="code" href="idi_8c.html#a9708b509decc6f844ce474a85af2484b">IO_Get_Symbol_Name</a>( <a class="code" href="idi_8c.html#a3bd0ce53eda9237f7ec1a515f89e907b">IDI_REG_ENUM</a> location )</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;{</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordtype">int</span> index;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    index =  0;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordflow">while</span> ( definitions[index].direction != <a class="code" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5a74f81f4c5a0aed3f67492123def70753">REG_DIR_NONE</a> )</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    {</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="keywordflow">if</span> ( location == definitions[index].symbol  )</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            <span class="keywordflow">return</span> definitions[index].<a class="code" href="structreg__definition.html#a7e9d3f82b1d2ab1009d4df11f1ba7db6">symbol_name</a>;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        }</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        index++;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    }</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;}</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="preprocessor">#if defined( IDI_IO_DIRECTION_TEST )</span></div>
<div class="line"><a name="l00718"></a><span class="lineno"><a class="line" href="idi_8c.html#aa2a17a1eaf6d0b512863fffd9f03c571">  718</a></span>&#160;<span class="keyword">static</span> <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> <a class="code" href="idi_8c.html#aa2a17a1eaf6d0b512863fffd9f03c571">IO_Direction_IsNotValid</a>( <a class="code" href="idi_8c.html#a3bd0ce53eda9237f7ec1a515f89e907b">IDI_REG_ENUM</a> location, <a class="code" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5">REG_DIR_ENUM</a> direction )</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;{</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordtype">int</span> index;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    index =  0;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="keywordflow">while</span> ( definitions[index].direction != <a class="code" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5a74f81f4c5a0aed3f67492123def70753">REG_DIR_NONE</a> )</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <span class="keywordflow">if</span> ( location == definitions[index].symbol  )</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        {</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;            <span class="keywordflow">if</span> ( definitions[index].direction &amp; direction ) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;            <span class="keywordflow">else</span>                                            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        }</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        index++;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    }</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;}</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00746"></a><span class="lineno"><a class="line" href="idi_8c.html#a335ac0f174d3cfe042d9bda97426616b">  746</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a335ac0f174d3cfe042d9bda97426616b">IO_Write_U8</a>( <a class="code" href="idi_8c.html#a3bd0ce53eda9237f7ec1a515f89e907b">IDI_REG_ENUM</a> location, uint8_t value )</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;{</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    uint8_t     bank;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    uint8_t     offset;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    uint16_t    address;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="preprocessor">#if defined( IDI_IO_DIRECTION_TEST )</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="idi_8c.html#aa2a17a1eaf6d0b512863fffd9f03c571">IO_Direction_IsNotValid</a>( location, <a class="code" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5a4fed3284189cb712e0edee0c9f08446b">REG_DIR_WRITE</a> ) )</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    {</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        printf( <span class="stringliteral">&quot;IO_Write_U8: %s, error in direction\n&quot;</span>, <a class="code" href="idi_8c.html#a9708b509decc6f844ce474a85af2484b">IO_Get_Symbol_Name</a>( location ) );</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="keywordflow">return</span> -EC_DIRECTION;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    }</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    bank   = (uint8_t) <a class="code" href="idi_8c.html#a1f8d0d21d4d226982f2ad9a4916a0f3d">REG_LOCATION_BANK_GET</a>( location );</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">if</span> ( ( <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77abda1f233f58a0a0e1833d61214b1b4dc">IDI_BANK_NONE</a> != bank ) &amp;&amp; ( bank != <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#aae9e92994011c0d276bdd28589d9aa71">bank_previous</a> ) )</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    {   <span class="comment">/* write to bank register only if different -- don&#39;t bother even checking it, will take too much time. */</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        offset = (uint8_t) <a class="code" href="idi_8c.html#ab8bf1943ccafe17f91e3a09dc431fd44">REG_LOCATION_OFFSET_GET</a>( IDI_BANK );</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        address = <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a27de55c6cee77e53ec9631f1f489a97a">base_address</a> + offset;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#aae9e92994011c0d276bdd28589d9aa71">bank_previous</a> = bank;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="keywordflow">if</span> ( !<a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a6513343c81785c28903fc3c4d1d50206">io_simulate</a> )</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="preprocessor">#if defined( __MSDOS__ )</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        outportb( address, bank );</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        }</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="keywordflow">if</span> ( ( <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#ad5d4eafc81d2a1f443f9a5a09b56efe0">io_report</a> ) || ( <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a6513343c81785c28903fc3c4d1d50206">io_simulate</a> ) )</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        printf( <span class="stringliteral">&quot;IO_Write_U8: %s, address = 0x%04X, bank = %s\n&quot;</span>, <a class="code" href="idi_8c.html#a9708b509decc6f844ce474a85af2484b">IO_Get_Symbol_Name</a>( IDI_BANK ), address, <a class="code" href="idi_8c.html#ace0b0cdb3b5ab2c5c7bcf9a02b8a4f33">IDI_Symbol_Name_Bank</a>( bank ) );</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        }</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    }</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    offset = (uint8_t) <a class="code" href="idi_8c.html#ab8bf1943ccafe17f91e3a09dc431fd44">REG_LOCATION_OFFSET_GET</a>(location);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    address = <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a27de55c6cee77e53ec9631f1f489a97a">base_address</a> + offset;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a6513343c81785c28903fc3c4d1d50206">io_simulate</a> )</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="preprocessor">#if defined( __MSDOS__ )</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    outportb( address, value );</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    }</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keywordflow">if</span> ( ( <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#ad5d4eafc81d2a1f443f9a5a09b56efe0">io_report</a> ) || ( <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a6513343c81785c28903fc3c4d1d50206">io_simulate</a> ) )</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    printf( <span class="stringliteral">&quot;IO_Write_U8: %s, address = 0x%04X, value = 0x%02X\n&quot;</span>, <a class="code" href="idi_8c.html#a9708b509decc6f844ce474a85af2484b">IO_Get_Symbol_Name</a>( location ), address, value );</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;}</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00802"></a><span class="lineno"><a class="line" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">  802</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( <a class="code" href="idi_8c.html#a3bd0ce53eda9237f7ec1a515f89e907b">IDI_REG_ENUM</a> location, uint8_t * value )</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;{</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    uint8_t     bank;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keywordtype">int</span>         offset;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="keywordtype">int</span>         address;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="preprocessor">#if defined( IDI_IO_DIRECTION_TEST )</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="idi_8c.html#aa2a17a1eaf6d0b512863fffd9f03c571">IO_Direction_IsNotValid</a>( location, <a class="code" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5af1ec2b1dd9bbade4c573f07aec924113">REG_DIR_READ</a> ) )</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        printf( <span class="stringliteral">&quot;IO_Read_U8: %s, error in direction\n&quot;</span>, <a class="code" href="idi_8c.html#a9708b509decc6f844ce474a85af2484b">IO_Get_Symbol_Name</a>( location ) );</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <span class="keywordflow">return</span> -EC_DIRECTION;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    }</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    bank   = (uint8_t) <a class="code" href="idi_8c.html#a1f8d0d21d4d226982f2ad9a4916a0f3d">REG_LOCATION_BANK_GET</a>( location );</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="keywordflow">if</span> ( ( <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77abda1f233f58a0a0e1833d61214b1b4dc">IDI_BANK_NONE</a> != bank ) &amp;&amp; ( bank != <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#aae9e92994011c0d276bdd28589d9aa71">bank_previous</a> ) )</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    {   <span class="comment">/* write to bank register only if different -- don&#39;t bother even checking it, will take too much time. */</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        offset = (int) <a class="code" href="idi_8c.html#ab8bf1943ccafe17f91e3a09dc431fd44">REG_LOCATION_OFFSET_GET</a>( IDI_BANK );</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        address = ((int) <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a27de55c6cee77e53ec9631f1f489a97a">base_address</a>) + offset;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#aae9e92994011c0d276bdd28589d9aa71">bank_previous</a> = bank;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <span class="keywordflow">if</span> ( !<a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a6513343c81785c28903fc3c4d1d50206">io_simulate</a> )</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        {</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="preprocessor">#if defined( __MSDOS__ )</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        outportb( address, bank );</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        }</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <span class="keywordflow">if</span> ( ( <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#ad5d4eafc81d2a1f443f9a5a09b56efe0">io_report</a> ) || ( <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a6513343c81785c28903fc3c4d1d50206">io_simulate</a> ) )</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        {</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        printf( <span class="stringliteral">&quot;IO_Read_U8: %s, address = 0x%04X, bank = %s\n&quot;</span>, <a class="code" href="idi_8c.html#a9708b509decc6f844ce474a85af2484b">IO_Get_Symbol_Name</a>( IDI_BANK ), address, <a class="code" href="idi_8c.html#ace0b0cdb3b5ab2c5c7bcf9a02b8a4f33">IDI_Symbol_Name_Bank</a>( bank ) );</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        }</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    }</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    offset = (int) <a class="code" href="idi_8c.html#ab8bf1943ccafe17f91e3a09dc431fd44">REG_LOCATION_OFFSET_GET</a>(location);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    address = ((int) <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a27de55c6cee77e53ec9631f1f489a97a">base_address</a>) + offset;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a6513343c81785c28903fc3c4d1d50206">io_simulate</a> )</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    {</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="preprocessor">#if defined( __MSDOS__ )</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    *value = inportb( address );</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    }</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="keywordflow">if</span> ( ( <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#ad5d4eafc81d2a1f443f9a5a09b56efe0">io_report</a> ) || ( <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a6513343c81785c28903fc3c4d1d50206">io_simulate</a> ) )</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    {</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    printf( <span class="stringliteral">&quot;IO_Read_U8: %s, address = 0x%04X, &quot;</span>, <a class="code" href="idi_8c.html#a9708b509decc6f844ce474a85af2484b">IO_Get_Symbol_Name</a>( location ), address );</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="preprocessor">#if defined( __MSDOS__ )</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    printf( <span class="stringliteral">&quot;value = 0x%02X\n&quot;</span>, *value );</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    printf( <span class="stringliteral">&quot;value = unknown\n&quot;</span> );</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    }</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;}</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00866"></a><span class="lineno"><a class="line" href="idi_8c.html#a5369340b886768c5898ee924ac8c4a7e">  866</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="idi_8c.html#a5369340b886768c5898ee924ac8c4a7e">IO_Write_U16_Address_Increment</a>( <a class="code" href="idi_8c.html#a3bd0ce53eda9237f7ec1a515f89e907b">IDI_REG_ENUM</a> location, uint16_t value )</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;{</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="comment">//TODO: assumes little endian.</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <a class="code" href="idi_8c.html#a335ac0f174d3cfe042d9bda97426616b">IO_Write_U8</a>( (<a class="code" href="idi_8c.html#a3bd0ce53eda9237f7ec1a515f89e907b">IDI_REG_ENUM</a>)(((<span class="keywordtype">int</span>) location) + 0), (uint8_t)(   value        &amp; 0xFF ) );</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <a class="code" href="idi_8c.html#a335ac0f174d3cfe042d9bda97426616b">IO_Write_U8</a>( (<a class="code" href="idi_8c.html#a3bd0ce53eda9237f7ec1a515f89e907b">IDI_REG_ENUM</a>)(((<span class="keywordtype">int</span>) location) + 1), (uint8_t)( ( value &gt;&gt; 8 ) &amp; 0xFF ) );</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;}</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00887"></a><span class="lineno"><a class="line" href="idi_8c.html#a75115c9cbc48b9ccd8c73dc4d69128cd">  887</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="idi_8c.html#a75115c9cbc48b9ccd8c73dc4d69128cd">IO_Read_U16_Address_Increment</a>( <a class="code" href="idi_8c.html#a3bd0ce53eda9237f7ec1a515f89e907b">IDI_REG_ENUM</a> location, uint16_t * value )</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;{</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">//TODO: assumes little endian.</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    uint8_t lsb, msb;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( (<a class="code" href="idi_8c.html#a3bd0ce53eda9237f7ec1a515f89e907b">IDI_REG_ENUM</a>)(((<span class="keywordtype">int</span>) location) + 0), &amp;lsb );</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( (<a class="code" href="idi_8c.html#a3bd0ce53eda9237f7ec1a515f89e907b">IDI_REG_ENUM</a>)(((<span class="keywordtype">int</span>) location) + 1), &amp;msb );</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    *value = ( ((uint16_t) msb) &lt;&lt; 8 ) | ( ((uint16_t) lsb) &amp; 0xFF );</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;}</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00910"></a><span class="lineno"><a class="line" href="idi_8c.html#a1b725a3b4e3895892e9cb3e41abc9218">  910</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="idi_8c.html#a1b725a3b4e3895892e9cb3e41abc9218">IO_Write_U16_Address_Fixed</a>( <a class="code" href="idi_8c.html#a3bd0ce53eda9237f7ec1a515f89e907b">IDI_REG_ENUM</a> location, uint16_t value )</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;{</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">//TODO: assumes little endian.</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <a class="code" href="idi_8c.html#a335ac0f174d3cfe042d9bda97426616b">IO_Write_U8</a>( (<a class="code" href="idi_8c.html#a3bd0ce53eda9237f7ec1a515f89e907b">IDI_REG_ENUM</a>)(((<span class="keywordtype">int</span>) location) + 0), (uint8_t)(     value      &amp; 0xFF ) );</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <a class="code" href="idi_8c.html#a335ac0f174d3cfe042d9bda97426616b">IO_Write_U8</a>( (<a class="code" href="idi_8c.html#a3bd0ce53eda9237f7ec1a515f89e907b">IDI_REG_ENUM</a>)(((<span class="keywordtype">int</span>) location) + 0), (uint8_t)( ( value &gt;&gt; 8 ) &amp; 0xFF ) );</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;}</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00931"></a><span class="lineno"><a class="line" href="idi_8c.html#a34fb89e26c5f0f9ae01c0d1c779397bf">  931</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="idi_8c.html#a34fb89e26c5f0f9ae01c0d1c779397bf">IO_Read_U16_Address_Fixed</a>( <a class="code" href="idi_8c.html#a3bd0ce53eda9237f7ec1a515f89e907b">IDI_REG_ENUM</a> location, uint16_t * value )</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;{</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment">//TODO: assumes little endian.</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    uint8_t lsb, msb;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( (<a class="code" href="idi_8c.html#a3bd0ce53eda9237f7ec1a515f89e907b">IDI_REG_ENUM</a>)(((<span class="keywordtype">int</span>) location) + 0), &amp;lsb );</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( (<a class="code" href="idi_8c.html#a3bd0ce53eda9237f7ec1a515f89e907b">IDI_REG_ENUM</a>)(((<span class="keywordtype">int</span>) location) + 0), &amp;msb );</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    *value = ( ((uint16_t) msb) &lt;&lt; 8 ) | ( ((uint16_t) lsb) &amp; 0xFF );</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;}</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="comment">/*    &lt; &lt; &lt; &lt;  D I G I T A L  I N P U T   F U N C T I O N S   &gt; &gt; &gt; &gt;                                     */</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00955"></a><span class="lineno"><a class="line" href="idi_8c.html#add0101e04ad7058fb979ef395febe68e">  955</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#add0101e04ad7058fb979ef395febe68e">IDI_DIN_ID_Get</a>( uint16_t * <span class="keywordtype">id</span> )</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;{</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    uint8_t     lsb, msb;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( IDI_ID_LSB, &amp;lsb );</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( IDI_ID_MSB, &amp;msb );</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    *<span class="keywordtype">id</span> = ( ((uint16_t) msb) &lt;&lt; 8 ) | ((uint16_t) lsb);</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="preprocessor">#if defined( ID_ALWAYS_REPORT_AS_GOOD )</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    *<span class="keywordtype">id</span> = <a class="code" href="idi_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a9d8ebe0a43a1971e6e3d738d0877f066">ID_DIN</a>;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;}</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00975"></a><span class="lineno"><a class="line" href="idi_8c.html#aad52cf9d5215e8c1e3387967b91c02fd">  975</a></span>&#160;<a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> <a class="code" href="idi_8c.html#aad52cf9d5215e8c1e3387967b91c02fd">IDI_DIN_IsNotPresent</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;{</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    uint16_t id;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <a class="code" href="idi_8c.html#add0101e04ad7058fb979ef395febe68e">IDI_DIN_ID_Get</a>( &amp;<span class="keywordtype">id</span> );</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="idi_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a9d8ebe0a43a1971e6e3d738d0877f066">ID_DIN</a> == <span class="keywordtype">id</span> ) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;}</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l00992"></a><span class="lineno"><a class="line" href="idi_8c.html#abbe4aec5ed66dae530dd2a8c8c6c1c92">  992</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#abbe4aec5ed66dae530dd2a8c8c6c1c92">IDI_DIN_Channel_Get</a>( <span class="keywordtype">size_t</span> channel, <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> * value )</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;{</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="keywordtype">size_t</span>  group;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="keywordtype">size_t</span>  bit;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    uint8_t reg_value;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    group = channel &gt;&gt; <a class="code" href="idi_8c.html#a1672fbebd0a87ba0ad4abbaaf4d7cb56">IDI_DIN_SHIFT_RIGHT</a>;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    bit   = channel - group * <a class="code" href="idi_8c.html#a3176ade75a5108d4b5e4f61ca2c1e842">IDI_DIN_GROUP_SIZE</a>;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( IDI_DI_GROUP0 + group, &amp;reg_value );</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="keywordflow">if</span> ( 0 != ( reg_value &amp; ( 0x01 &lt;&lt; bit ) ) ) *value = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="keywordflow">else</span>                                        *value = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;}</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"><a class="line" href="idi_8c.html#ad96039e3c434110fc30781b9e82f735f"> 1018</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#ad96039e3c434110fc30781b9e82f735f">IDI_DIN_Group_Get</a>( <span class="keywordtype">size_t</span> group, uint8_t * value )</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;{</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( IDI_DI_GROUP0 + group, value );</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;}</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment">/*    &lt; &lt; &lt; &lt;  S P I   F U N C T I O N S    &gt; &gt; &gt; &gt;                                                       */</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"><a class="line" href="idi_8c.html#a880aef745d1398d7deb49b45e988ad84"> 1041</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a880aef745d1398d7deb49b45e988ad84">SPI_ID_Get</a>( uint16_t * <span class="keywordtype">id</span> )</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;{</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    uint8_t     lsb, msb;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( SPI_ID_LSB, &amp;lsb );</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( SPI_ID_MSB, &amp;msb );</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    *<span class="keywordtype">id</span> = ( ((uint16_t) msb) &lt;&lt; 8 ) | ((uint16_t) lsb);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="preprocessor">#if defined( ID_ALWAYS_REPORT_AS_GOOD )</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    *<span class="keywordtype">id</span> = <a class="code" href="idi_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ade57b137e54adb85a4eedad470a8a87d">ID_SPI</a>;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;}</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"><a class="line" href="idi_8c.html#ac9892490c6b2d5ee1f3490323aa00965"> 1062</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#ac9892490c6b2d5ee1f3490323aa00965">SPI_IsNotPresent</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;{</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    uint16_t id;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <a class="code" href="idi_8c.html#a880aef745d1398d7deb49b45e988ad84">SPI_ID_Get</a>( &amp;<span class="keywordtype">id</span> );</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="idi_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ade57b137e54adb85a4eedad470a8a87d">ID_SPI</a> == <span class="keywordtype">id</span> ) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;}</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"><a class="line" href="idi_8c.html#a5a1a4138a3312745363773553003149d"> 1084</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a5a1a4138a3312745363773553003149d">SPI_Calculate_Half_Clock</a>( <span class="keywordtype">double</span>     half_clock_request_sec, <span class="comment">/* requested half clock interval           */</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                              <span class="keywordtype">double</span> *   half_clock_actual_sec,  <span class="comment">/*  computed actual half clock interval    */</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                              <span class="keywordtype">double</span> *   error,                  <span class="comment">/* error between actual and desired        */</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                              uint16_t * hci                     <span class="comment">/* computed count                          */</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                            )</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;{</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordtype">double</span>      scratch;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="keywordtype">int</span>         hci_temp;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="comment">/* spi_half_clock_interval_sec = CLOCK_PERIOD_SEC * ( 4.0 + ( (double) hci ) ) */</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    scratch = ( half_clock_request_sec / <a class="code" href="idi_8c.html#a2a635742326b18bb61d409dfdb7f294b">CLOCK_PERIOD_SEC</a> ) - 4.0;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    hci_temp = (int) scratch;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <span class="keywordflow">if</span> ( ( hci_temp &gt; 4095 ) || ( hci_temp &lt; 0 ) ) <span class="keywordflow">return</span> -EC_SPI_HALF_CLOCK_OUT_OF_RANGE;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="comment">/* compute actual */</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    scratch = <a class="code" href="idi_8c.html#a2a635742326b18bb61d409dfdb7f294b">CLOCK_PERIOD_SEC</a> * ( 4.0 + ((double) hci_temp) );</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="keywordflow">if</span> ( NULL != error                 ) *error                 = ( scratch - half_clock_request_sec ) / half_clock_request_sec;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <span class="keywordflow">if</span> ( NULL != half_clock_actual_sec ) *half_clock_actual_sec = scratch;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordflow">if</span> ( NULL != hci                   ) *hci                   = (uint16_t) hci_temp;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;}</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"><a class="line" href="idi_8c.html#ad86d10585f6c367cfc4490a5366f1d25"> 1121</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#ad86d10585f6c367cfc4490a5366f1d25">SPI_Calculate_Clock</a>( <span class="keywordtype">double</span>     clock_request_hz,   <span class="comment">/* requested spi clock frequency            */</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                         <span class="keywordtype">double</span> *   clock_actual_hz,    <span class="comment">/* computed actual clock frequency          */</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                         <span class="keywordtype">double</span> *   error,              <span class="comment">/* error between actual and desired         */</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                         uint16_t * hci                 <span class="comment">/* computed count                           */</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                        )</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;{</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordtype">int</span>      error_code;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="keywordtype">double</span>   half_clock_request_sec;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="keywordtype">double</span>   half_clock_actual_sec;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="keywordtype">double</span>   error_internal;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="keywordtype">double</span>   scratch;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    uint16_t hci_internal;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    half_clock_request_sec = 1.0 / ( 2.0 * clock_request_hz );</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    error_code = <a class="code" href="idi_8c.html#a5a1a4138a3312745363773553003149d">SPI_Calculate_Half_Clock</a>( half_clock_request_sec,</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                                           &amp;half_clock_actual_sec,</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                                           &amp;error_internal,</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                                           &amp;hci_internal</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                                          );</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="comment">/* compute actual frequency */</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    scratch = 1.0 / ( 2.0 * half_clock_actual_sec );</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keywordflow">if</span> ( NULL != error           ) *error           = ( scratch - clock_request_hz ) / clock_request_hz;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="keywordflow">if</span> ( NULL != clock_actual_hz ) *clock_actual_hz = scratch;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="keywordflow">if</span> ( NULL != hci             ) *hci             = (uint16_t) hci_internal;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;}</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"><a class="line" href="idi_8c.html#a8130129973acaff19c9b1cfd5955d12d"> 1158</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="idi_8c.html#a8130129973acaff19c9b1cfd5955d12d">SPI_Calculate_Half_Clock_Interval_Sec</a>( uint16_t half_clock_interval <span class="comment">/* hci */</span> )</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;{</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="keywordtype">double</span> half_clock_interval_sec;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    half_clock_interval_sec = <a class="code" href="idi_8c.html#a2a635742326b18bb61d409dfdb7f294b">CLOCK_PERIOD_SEC</a> * ( 4.0 + ((double) half_clock_interval ) );</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="keywordflow">return</span> half_clock_interval_sec;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;}</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01178"></a><span class="lineno"><a class="line" href="idi_8c.html#a50b862cbcc29146e70e7543208ca7e81"> 1178</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a50b862cbcc29146e70e7543208ca7e81">SPI_Calculate_End_Cycle_Delay</a>( <span class="keywordtype">double</span>    spi_half_clock_interval_sec, <span class="comment">/* calculated half-clock interval     */</span></div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                                   <span class="keywordtype">double</span>    delay_request_sec,           <span class="comment">/* requested end-delay interval       */</span></div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                                   <span class="keywordtype">double</span> *  delay_actual_sec,            <span class="comment">/*  computed actual delay             */</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                                   <span class="keywordtype">double</span> *  error,                       <span class="comment">/* error between actual and desired   */</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                                   uint8_t * ecd                          <span class="comment">/* computed count                     */</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                                )</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;{</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="comment">//double        delay_between_words_sec;</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="keywordtype">double</span>      scratch;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="keywordtype">int</span>         ecd_temp;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="comment">/* delay_sec = CLOCK_PERIOD_SEC * 4 + ECD * spi_half_clock_interval_sec  */</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    scratch = ( delay_request_sec - 4.0 * <a class="code" href="idi_8c.html#a2a635742326b18bb61d409dfdb7f294b">CLOCK_PERIOD_SEC</a> ) / spi_half_clock_interval_sec;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    ecd_temp = (int) scratch;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keywordflow">if</span> ( ( ecd_temp &gt; 255 ) || ( ecd_temp &lt; 0 ) ) <span class="keywordflow">return</span> -EC_SPI_ECD_OUT_OF_RANGE;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="comment">/* compute actual */</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    scratch = <a class="code" href="idi_8c.html#a2a635742326b18bb61d409dfdb7f294b">CLOCK_PERIOD_SEC</a> * 4.0 + ((double) ecd_temp) * spi_half_clock_interval_sec;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="keywordflow">if</span> ( NULL != error            ) *error            = ( scratch - delay_request_sec ) / delay_request_sec;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="keywordflow">if</span> ( NULL != delay_actual_sec ) *delay_actual_sec = scratch;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="keywordflow">if</span> ( NULL != ecd              ) *ecd              = (uint8_t) ecd_temp;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;}</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"><a class="line" href="idi_8c.html#a7fcdc0355d1d9273d7ac18bd6e8a6763"> 1211</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a7fcdc0355d1d9273d7ac18bd6e8a6763">SPI_Configuration_Chip_Select_Behavior_Get</a>( <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101d">SPI_CSB_ENUM</a> * chip_select_behavior )</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;{</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    uint8_t     scratch;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="idi_8c.html#ac9892490c6b2d5ee1f3490323aa00965">SPI_IsNotPresent</a>() ) <span class="keywordflow">return</span> -EC_SPI_NOT_FOUND;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( SPI_CONFIG, &amp;scratch );</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    *chip_select_behavior = (<a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101d">SPI_CSB_ENUM</a>) ( scratch &gt;&gt; 4 ) &amp; 0x07;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;}</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"><a class="line" href="idi_8c.html#a09d78e0d3846eef0f05a56ac361bbfeb"> 1231</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a09d78e0d3846eef0f05a56ac361bbfeb">SPI_Configuration_Chip_Select_Behavior_Set</a>( <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101d">SPI_CSB_ENUM</a> chip_select_behavior )</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;{</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    uint8_t     scratch;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="idi_8c.html#ac9892490c6b2d5ee1f3490323aa00965">SPI_IsNotPresent</a>() ) <span class="keywordflow">return</span> -EC_SPI_NOT_FOUND;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( SPI_CONFIG, &amp;scratch );</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    scratch &amp;= 0x70;</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    scratch |= (uint8_t) ( ( chip_select_behavior &amp; 0x07 ) &lt;&lt; 4 );</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <a class="code" href="idi_8c.html#a335ac0f174d3cfe042d9bda97426616b">IO_Write_U8</a>( SPI_CONFIG, scratch );</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;}</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"><a class="line" href="idi_8c.html#a5817326fd7bd59487a4fefc89ecbc4d3"> 1254</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a5817326fd7bd59487a4fefc89ecbc4d3">SPI_Configuration_Set</a>( <span class="keyword">struct</span> <a class="code" href="structspi__cfg.html">spi_cfg</a> * cfg )</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;{</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <span class="keywordtype">int</span>         error_code;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="keywordtype">double</span>      scratch;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="keywordtype">double</span>      hci_sec;     <span class="comment">/* half clock interval in seconds */</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    uint8_t     config;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="idi_8c.html#ac9892490c6b2d5ee1f3490323aa00965">SPI_IsNotPresent</a>() ) <span class="keywordflow">return</span> -EC_SPI_NOT_FOUND;</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    config = (uint8_t) ( ( cfg-&gt;<a class="code" href="structspi__cfg.html#aede15f437dcd3a33a5605c71b3bf3801">chip_select_behavior</a> &amp; 0x07 ) &lt;&lt; 4 );</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <span class="keywordflow">if</span> ( cfg-&gt;<a class="code" href="structspi__cfg.html#a08a45f7aec9d8b6e59e91a56dc889384">sclk_polarity</a> ) config |= 0x01;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <span class="keywordflow">if</span> ( cfg-&gt;<a class="code" href="structspi__cfg.html#a2613a037b4632a6d74e89aeb62d12344">sclk_phase</a>    ) config |= 0x02;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="keywordflow">if</span> ( cfg-&gt;<a class="code" href="structspi__cfg.html#a010045ad60dc510daa368259399de229">sdi_polarity</a>  ) config |= 0x04;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="keywordflow">if</span> ( cfg-&gt;<a class="code" href="structspi__cfg.html#abbceffb19dd814b30b890c4c3710a229">sdo_polarity</a>  ) config |= 0x08;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keywordflow">if</span> ( cfg-&gt;<a class="code" href="structspi__cfg.html#a7cd0897d273b604ea90aaf525ca5d318">sdio_wrap</a>     ) config |= 0x80;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <a class="code" href="idi_8c.html#a335ac0f174d3cfe042d9bda97426616b">IO_Write_U8</a>( SPI_CONFIG, config );</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="keywordflow">if</span> ( cfg-&gt;<a class="code" href="structspi__cfg.html#aaed71f77ad7200a8f4bf0f1cdd0fb328">clock_hz</a> &gt; 0 )</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    { <span class="comment">/* compute half_clock_interval */</span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        <span class="comment">//scratch = ( 1.0 - ( 8.0 * CLOCK_PERIOD_SEC * cfg-&gt;clock_hz ) ) / (  2.0 * CLOCK_PERIOD_SEC * cfg-&gt;clock_hz );</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        error_code = <a class="code" href="idi_8c.html#ad86d10585f6c367cfc4490a5366f1d25">SPI_Calculate_Clock</a>( cfg-&gt;<a class="code" href="structspi__cfg.html#aaed71f77ad7200a8f4bf0f1cdd0fb328">clock_hz</a>, NULL, NULL, &amp;(cfg-&gt;<a class="code" href="structspi__cfg.html#ad8d6adceadaec7f4c92349ec8beb720d">half_clock_interval</a>) );</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    }</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    hci_sec = <a class="code" href="idi_8c.html#a8130129973acaff19c9b1cfd5955d12d">SPI_Calculate_Half_Clock_Interval_Sec</a>( cfg-&gt;<a class="code" href="structspi__cfg.html#ad8d6adceadaec7f4c92349ec8beb720d">half_clock_interval</a> );</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <span class="keywordflow">if</span> ( cfg-&gt;<a class="code" href="structspi__cfg.html#adc10d917ca7551b41164711a54684a51">end_delay_ns</a> &gt; 0 )</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    {</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        scratch    = cfg-&gt;<a class="code" href="structspi__cfg.html#adc10d917ca7551b41164711a54684a51">end_delay_ns</a> * 1.0e-9;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        error_code = <a class="code" href="idi_8c.html#a50b862cbcc29146e70e7543208ca7e81">SPI_Calculate_End_Cycle_Delay</a>( hci_sec,                <span class="comment">/* calculated half-clock interval     */</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;                                                    scratch,                <span class="comment">/* requested end-delay interval       */</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;                                                    NULL,                   <span class="comment">/*  computed actual delay             */</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;                                                    NULL,                   <span class="comment">/* error between actual and desired   */</span></div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                                                    &amp;(cfg-&gt;<a class="code" href="structspi__cfg.html#a0b6f06a341aa4e9fbbbb33b417b5f722">end_cycle_delay</a>) <span class="comment">/* computed count                     */</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                                                   );</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    }</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <a class="code" href="idi_8c.html#a335ac0f174d3cfe042d9bda97426616b">IO_Write_U8</a>( SPI_HCI_LSB, (uint8_t)( cfg-&gt;<a class="code" href="structspi__cfg.html#ad8d6adceadaec7f4c92349ec8beb720d">half_clock_interval</a> &amp; 0xFF ) );</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <a class="code" href="idi_8c.html#a335ac0f174d3cfe042d9bda97426616b">IO_Write_U8</a>( SPI_HCI_MSB, (uint8_t)( cfg-&gt;<a class="code" href="structspi__cfg.html#ad8d6adceadaec7f4c92349ec8beb720d">half_clock_interval</a> &gt;&gt; 8   ) );</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <a class="code" href="idi_8c.html#a335ac0f174d3cfe042d9bda97426616b">IO_Write_U8</a>( SPI_ECD, cfg-&gt;<a class="code" href="structspi__cfg.html#a0b6f06a341aa4e9fbbbb33b417b5f722">end_cycle_delay</a> );</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    memcpy( &amp;(<a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a524ca5c3ea3d76688ccecb7f299f31f4">spi_cfg</a>), &amp;cfg, <span class="keyword">sizeof</span>( <span class="keyword">struct</span> <a class="code" href="structspi__cfg.html">spi_cfg</a> ) );</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;}</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"><a class="line" href="idi_8c.html#a59b98a79cf5c0821e12ab088d76f355f"> 1309</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a59b98a79cf5c0821e12ab088d76f355f">SPI_Configuration_Get</a>( <span class="keyword">struct</span> <a class="code" href="structspi__cfg.html">spi_cfg</a> * cfg )</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;{</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    uint8_t     scratch;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="idi_8c.html#ac9892490c6b2d5ee1f3490323aa00965">SPI_IsNotPresent</a>() ) <span class="keywordflow">return</span> -EC_SPI_NOT_FOUND;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( SPI_CONFIG, &amp;scratch );</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    cfg-&gt;<a class="code" href="structspi__cfg.html#aede15f437dcd3a33a5605c71b3bf3801">chip_select_behavior</a>   = (<a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101d">SPI_CSB_ENUM</a>) ( scratch &gt;&gt; 4 ) &amp; 0x07;</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    cfg-&gt;<a class="code" href="structspi__cfg.html#a08a45f7aec9d8b6e59e91a56dc889384">sclk_polarity</a>          = (<a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>) ( scratch &amp; 0x01 );</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    cfg-&gt;<a class="code" href="structspi__cfg.html#a2613a037b4632a6d74e89aeb62d12344">sclk_phase</a>             = (<a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>) ( scratch &amp; 0x02 );</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    cfg-&gt;<a class="code" href="structspi__cfg.html#a010045ad60dc510daa368259399de229">sdi_polarity</a>           = (<a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>) ( scratch &amp; 0x04 );</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    cfg-&gt;<a class="code" href="structspi__cfg.html#abbceffb19dd814b30b890c4c3710a229">sdo_polarity</a>           = (<a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>) ( scratch &amp; 0x08 );</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    cfg-&gt;<a class="code" href="structspi__cfg.html#a7cd0897d273b604ea90aaf525ca5d318">sdio_wrap</a>              = (<a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>) ( scratch &amp; 0x80 );</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( SPI_HCI_LSB, &amp;scratch );</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    cfg-&gt;<a class="code" href="structspi__cfg.html#ad8d6adceadaec7f4c92349ec8beb720d">half_clock_interval</a> = (uint16_t) scratch;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( SPI_HCI_MSB, &amp;scratch );</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    cfg-&gt;<a class="code" href="structspi__cfg.html#ad8d6adceadaec7f4c92349ec8beb720d">half_clock_interval</a> |= ( (uint16_t) scratch) &lt;&lt; 8;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( SPI_ECD, &amp;(cfg-&gt;<a class="code" href="structspi__cfg.html#a0b6f06a341aa4e9fbbbb33b417b5f722">end_cycle_delay</a>) );</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    cfg-&gt;<a class="code" href="structspi__cfg.html#aaed71f77ad7200a8f4bf0f1cdd0fb328">clock_hz</a> = 1.0 / ( 2.0 * <a class="code" href="idi_8c.html#a2a635742326b18bb61d409dfdb7f294b">CLOCK_PERIOD_SEC</a> * ( 4.0 + ((double) cfg-&gt;<a class="code" href="structspi__cfg.html#ad8d6adceadaec7f4c92349ec8beb720d">half_clock_interval</a>) ) );</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    cfg-&gt;<a class="code" href="structspi__cfg.html#adc10d917ca7551b41164711a54684a51">end_delay_ns</a> = 1.0e9 * <a class="code" href="idi_8c.html#a2a635742326b18bb61d409dfdb7f294b">CLOCK_PERIOD_SEC</a> * 4.0 + 0.5 * ((double) cfg-&gt;<a class="code" href="structspi__cfg.html#a0b6f06a341aa4e9fbbbb33b417b5f722">end_cycle_delay</a>) / cfg-&gt;<a class="code" href="structspi__cfg.html#aaed71f77ad7200a8f4bf0f1cdd0fb328">clock_hz</a>;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    memcpy( &amp;(<a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a524ca5c3ea3d76688ccecb7f299f31f4">spi_cfg</a>), &amp;cfg, <span class="keyword">sizeof</span>( <span class="keyword">struct</span> <a class="code" href="structspi__cfg.html">spi_cfg</a> ) );</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;}</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"><a class="line" href="idi_8c.html#a9f519b04b7593c82d4037ead8f0e6623"> 1346</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a9f519b04b7593c82d4037ead8f0e6623">SPI_Report_Configuration_Text</a>( <span class="keyword">struct</span> <a class="code" href="structspi__cfg.html">spi_cfg</a> * cfg, FILE * out )</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;{</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    fprintf( out, <span class="stringliteral">&quot;################################### SPI Configuration:\n&quot;</span> );</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    fprintf( out, <span class="stringliteral">&quot;sdio_wrap             = %s\n&quot;</span>, cfg-&gt;<a class="code" href="structspi__cfg.html#a08a45f7aec9d8b6e59e91a56dc889384">sclk_polarity</a>    ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span> );</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    fprintf( out, <span class="stringliteral">&quot;sdo_polarity          = %s\n&quot;</span>, cfg-&gt;<a class="code" href="structspi__cfg.html#a08a45f7aec9d8b6e59e91a56dc889384">sclk_polarity</a>    ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span> );</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    fprintf( out, <span class="stringliteral">&quot;sdi_polarity          = %s\n&quot;</span>, cfg-&gt;<a class="code" href="structspi__cfg.html#a010045ad60dc510daa368259399de229">sdi_polarity</a>     ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span> );</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    fprintf( out, <span class="stringliteral">&quot;sclk_phase            = %s\n&quot;</span>, cfg-&gt;<a class="code" href="structspi__cfg.html#a2613a037b4632a6d74e89aeb62d12344">sclk_phase</a>       ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span> );</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    fprintf( out, <span class="stringliteral">&quot;sclk_polarity         = %s\n&quot;</span>, cfg-&gt;<a class="code" href="structspi__cfg.html#a08a45f7aec9d8b6e59e91a56dc889384">sclk_polarity</a>    ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span> );</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    fprintf( out, <span class="stringliteral">&quot;chip_select_behavior  = &quot;</span> );</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="keywordflow">switch</span>( cfg-&gt;<a class="code" href="structspi__cfg.html#aede15f437dcd3a33a5605c71b3bf3801">chip_select_behavior</a> )</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    {</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101da473588067cbc33d34ebe1f6815dcdd4f">IDI_CSB_SOFTWARE</a>:      fprintf( out, <span class="stringliteral">&quot;IDI_CSB_SOFTWARE&quot;</span> );         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101dab45e8afa970f342353f60ca217b37253">IDI_CSB_BUFFER</a>:        fprintf( out, <span class="stringliteral">&quot;IDI_CSB_BUFFER&quot;</span> );           <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101da72c215ca12871c8b04f9a1324f80cb2e">IDI_CSB_UINT8</a>:         fprintf( out, <span class="stringliteral">&quot;IDI_CSB_UINT8&quot;</span> );            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101dac825304c7d28288091e65b0e0bfeb440">IDI_CSB_UINT16</a>:        fprintf( out, <span class="stringliteral">&quot;IDI_CSB_UINT16&quot;</span> );           <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        <span class="keywordflow">default</span>:                    fprintf( out, <span class="stringliteral">&quot;undefined&quot;</span> );                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    }</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    fprintf( out, <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    fprintf( out, <span class="stringliteral">&quot;end_cycle_delay       = 0x%02X  (%d)\n&quot;</span>, cfg-&gt;<a class="code" href="structspi__cfg.html#a0b6f06a341aa4e9fbbbb33b417b5f722">end_cycle_delay</a>,     cfg-&gt;<a class="code" href="structspi__cfg.html#a0b6f06a341aa4e9fbbbb33b417b5f722">end_cycle_delay</a>     );</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    fprintf( out, <span class="stringliteral">&quot;half_clock_interval   = 0x%04X  (%d)\n&quot;</span>, cfg-&gt;<a class="code" href="structspi__cfg.html#ad8d6adceadaec7f4c92349ec8beb720d">half_clock_interval</a>, cfg-&gt;<a class="code" href="structspi__cfg.html#ad8d6adceadaec7f4c92349ec8beb720d">half_clock_interval</a> );</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    fprintf( out, <span class="stringliteral">&quot;clock_hz              = %f Hz\n&quot;</span>, cfg-&gt;<a class="code" href="structspi__cfg.html#aaed71f77ad7200a8f4bf0f1cdd0fb328">clock_hz</a> );</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    fprintf( out, <span class="stringliteral">&quot;end_delay_ns          = %f ns\n&quot;</span>, cfg-&gt;<a class="code" href="structspi__cfg.html#adc10d917ca7551b41164711a54684a51">end_delay_ns</a> );</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    fprintf( out, <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;}</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"><a class="line" href="idi_8c.html#af783ed809568388ad1d1e0b990458811"> 1384</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#af783ed809568388ad1d1e0b990458811">SPI_Report_Status_Text</a>( <span class="keyword">struct</span> <a class="code" href="structspi__status.html">spi_status</a> * status, FILE * out )</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;{</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    fprintf( out, <span class="stringliteral">&quot;################################### SPI &quot;</span> );</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="keywordflow">if</span> ( status-&gt;<a class="code" href="structspi__status.html#a234b821e581a221369b67154e3e7cfa8">tx_status</a> ) fprintf( out, <span class="stringliteral">&quot;TX&quot;</span> );</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <span class="keywordflow">else</span>                     fprintf( out, <span class="stringliteral">&quot;RX&quot;</span> );</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    fprintf( out, <span class="stringliteral">&quot; Status:\n&quot;</span> );</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    fprintf( out, <span class="stringliteral">&quot;full       = %s\n&quot;</span>, status-&gt;<a class="code" href="structspi__status.html#a3b60b3c5cbe0736af58dccbde4e3161d">full</a>  ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span> );</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    fprintf( out, <span class="stringliteral">&quot;empty      = %s\n&quot;</span>, status-&gt;<a class="code" href="structspi__status.html#a68f61f8d0fb7e552cf463bb4926b5f1d">empty</a> ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span> );</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    fprintf( out, <span class="stringliteral">&quot;fifo size  = %d\n&quot;</span>, status-&gt;<a class="code" href="structspi__status.html#a771649fbbbbf3161bbddd4d49db51552">fifo_size</a>                );</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    fprintf( out, <span class="stringliteral">&quot;fifo count = %d\n&quot;</span>, status-&gt;<a class="code" href="structspi__status.html#a1515bdf17aa69c23285df7f9637ca30e">fifo_count</a>               );</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;}</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01408"></a><span class="lineno"><a class="line" href="idi_8c.html#a3e3475d2cc10efb49b125c2abb27ca09"> 1408</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a3e3475d2cc10efb49b125c2abb27ca09">SPI_Configuration_Initialize</a>( <span class="keyword">struct</span> <a class="code" href="structspi__cfg.html">spi_cfg</a> * cfg )</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;{</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    cfg-&gt;<a class="code" href="structspi__cfg.html#a7cd0897d273b604ea90aaf525ca5d318">sdio_wrap</a>              = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    cfg-&gt;<a class="code" href="structspi__cfg.html#abbceffb19dd814b30b890c4c3710a229">sdo_polarity</a>           = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    cfg-&gt;<a class="code" href="structspi__cfg.html#a010045ad60dc510daa368259399de229">sdi_polarity</a>           = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <span class="comment">/*  Mode    CPOL    CPHA</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="comment">     *   0       0       0</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;<span class="comment">     *   1       0       1</span></div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;<span class="comment">     *   2       1       0</span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;<span class="comment">     *   3       1       1</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    cfg-&gt;<a class="code" href="structspi__cfg.html#a2613a037b4632a6d74e89aeb62d12344">sclk_phase</a>             = <span class="keyword">false</span>;   <span class="comment">/* the FRAM uses SPI Mode 0 or 3 */</span></div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    cfg-&gt;<a class="code" href="structspi__cfg.html#a08a45f7aec9d8b6e59e91a56dc889384">sclk_polarity</a>          = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    cfg-&gt;<a class="code" href="structspi__cfg.html#aede15f437dcd3a33a5605c71b3bf3801">chip_select_behavior</a>   = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    cfg-&gt;<a class="code" href="structspi__cfg.html#a0b6f06a341aa4e9fbbbb33b417b5f722">end_cycle_delay</a>        = 0;        <span class="comment">/* shortest delay possible      */</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    cfg-&gt;<a class="code" href="structspi__cfg.html#ad8d6adceadaec7f4c92349ec8beb720d">half_clock_interval</a>    = 0;        <span class="comment">/* shortest interval possible   */</span></div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    cfg-&gt;<a class="code" href="structspi__cfg.html#aaed71f77ad7200a8f4bf0f1cdd0fb328">clock_hz</a>               = 0.0;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    cfg-&gt;<a class="code" href="structspi__cfg.html#adc10d917ca7551b41164711a54684a51">end_delay_ns</a>           = 0.0;</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;}</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01449"></a><span class="lineno"><a class="line" href="idi_8c.html#a26d9db16a301c85b1fc35dbb1bba9997"> 1449</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a26d9db16a301c85b1fc35dbb1bba9997">SPI_Status_Write</a>( <span class="keyword">struct</span> <a class="code" href="structspi__status.html">spi_status</a> * status )</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;{</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    uint8_t reg_value;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="idi_8c.html#ac9892490c6b2d5ee1f3490323aa00965">SPI_IsNotPresent</a>() ) <span class="keywordflow">return</span> -EC_SPI_NOT_FOUND;</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( SPI_TX_STATUS, &amp;reg_value );</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    status-&gt;<a class="code" href="structspi__status.html#a1515bdf17aa69c23285df7f9637ca30e">fifo_count</a> = (int)( reg_value &amp; 0x1F );</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    status-&gt;<a class="code" href="structspi__status.html#a3b60b3c5cbe0736af58dccbde4e3161d">full</a>       = (<a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>)( reg_value &amp; 0x80 );</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    status-&gt;<a class="code" href="structspi__status.html#a771649fbbbbf3161bbddd4d49db51552">fifo_size</a>  = (int) <a class="code" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a>;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    status-&gt;<a class="code" href="structspi__status.html#a68f61f8d0fb7e552cf463bb4926b5f1d">empty</a>      = (<a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>)( reg_value &amp; 0x40 );</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    status-&gt;<a class="code" href="structspi__status.html#a234b821e581a221369b67154e3e7cfa8">tx_status</a>  = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;}</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01480"></a><span class="lineno"><a class="line" href="idi_8c.html#a547a51422c2fdfe3201983874dfa1a38"> 1480</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="idi_8c.html#a547a51422c2fdfe3201983874dfa1a38">SPI_Status_Write_FIFO_Status</a>( <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> * full, <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> * empty, <span class="keywordtype">size_t</span> * bytes_in_fifo )</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;{</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    uint8_t reg_value;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( SPI_TX_STATUS, &amp;reg_value );</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <span class="keywordflow">switch</span>( reg_value &amp; 0xC0 )</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    {</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;        <span class="keywordflow">case</span> 0x00: *full = <span class="keyword">false</span>;   *empty = <span class="keyword">false</span>;     <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        <span class="keywordflow">case</span> 0x40: *full = <span class="keyword">false</span>;   *empty = <span class="keyword">true</span>;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;        <span class="keywordflow">case</span> 0x80: *full = <span class="keyword">true</span>;    *empty = <span class="keyword">false</span>;     <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        <span class="keywordflow">case</span> 0xC0: *full = <span class="keyword">true</span>;    *empty = <span class="keyword">true</span>;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    }</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    *bytes_in_fifo = (size_t) <a class="code" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a> - (<span class="keywordtype">size_t</span>)( reg_value &amp; 0x1F );</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;}</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"><a class="line" href="idi_8c.html#aa1471598d3657b31cd7ef4f354011212"> 1501</a></span>&#160;<a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> <a class="code" href="idi_8c.html#aa1471598d3657b31cd7ef4f354011212">SPI_Status_Write_FIFO_Is_Full</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;{</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    uint8_t reg_value;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( SPI_TX_STATUS, &amp;reg_value );</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <span class="keywordflow">if</span> ( reg_value &amp; 0x80 ) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;}</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01524"></a><span class="lineno"><a class="line" href="idi_8c.html#a4f457883748297218a1a747a01671790"> 1524</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="idi_8c.html#a4f457883748297218a1a747a01671790">SPI_Status_Read_FIFO_Status</a>( <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> * empty, <span class="keywordtype">size_t</span> * bytes_available )</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;{</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    uint8_t reg_value;</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( SPI_RX_STATUS, &amp;reg_value );</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    *bytes_available = (size_t)( reg_value &amp; 0x1F );</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    *empty           = (<a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>)( reg_value &amp; 0x40 );</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;}</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01550"></a><span class="lineno"><a class="line" href="idi_8c.html#a0d405a6006a6ef14c53c330e618bc1df"> 1550</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a0d405a6006a6ef14c53c330e618bc1df">SPI_Status_Read</a>( <span class="keyword">struct</span> <a class="code" href="structspi__status.html">spi_status</a> * status )</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;{</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    uint8_t reg_value;</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="idi_8c.html#ac9892490c6b2d5ee1f3490323aa00965">SPI_IsNotPresent</a>() ) <span class="keywordflow">return</span> -EC_SPI_NOT_FOUND;</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( SPI_RX_STATUS, &amp;reg_value );</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    status-&gt;<a class="code" href="structspi__status.html#a1515bdf17aa69c23285df7f9637ca30e">fifo_count</a> = (int)( reg_value &amp; 0x1F );</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    status-&gt;<a class="code" href="structspi__status.html#a3b60b3c5cbe0736af58dccbde4e3161d">full</a>       = (<a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>)( reg_value &amp; 0x80 );</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    status-&gt;<a class="code" href="structspi__status.html#a771649fbbbbf3161bbddd4d49db51552">fifo_size</a>  = (int) <a class="code" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a>;</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    status-&gt;<a class="code" href="structspi__status.html#a68f61f8d0fb7e552cf463bb4926b5f1d">empty</a>      = (<a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>)( reg_value &amp; 0x40 );</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    status-&gt;<a class="code" href="structspi__status.html#a234b821e581a221369b67154e3e7cfa8">tx_status</a>  = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;}</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"><a class="line" href="idi_8c.html#a8ed95935ad595c4e5dde98ffa26a4689"> 1572</a></span>&#160;<a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> <a class="code" href="idi_8c.html#a8ed95935ad595c4e5dde98ffa26a4689">SPI_Status_Write_FIFO_Is_Not_Empty</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;{</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    uint8_t reg_value;</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( SPI_TX_STATUS, &amp;reg_value );</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keywordflow">if</span> ( reg_value &amp; 0x40 ) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;}</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01587"></a><span class="lineno"><a class="line" href="idi_8c.html#a9f8f3754c67705b230c1f04d390a5900"> 1587</a></span>&#160;<a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> <a class="code" href="idi_8c.html#a9f8f3754c67705b230c1f04d390a5900">SPI_Status_Read_FIFO_Is_Not_Empty</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;{</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    uint8_t reg_value;</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( SPI_RX_STATUS, &amp;reg_value );</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <span class="keywordflow">if</span> ( reg_value &amp; 0x40 ) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;}</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01606"></a><span class="lineno"><a class="line" href="idi_8c.html#afa3ba21357311aece5c1f86706a36338"> 1606</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#afa3ba21357311aece5c1f86706a36338">SPI_Commit</a>( uint8_t chip_select )</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;{</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="idi_8c.html#ac9892490c6b2d5ee1f3490323aa00965">SPI_IsNotPresent</a>() ) <span class="keywordflow">return</span> -EC_SPI_NOT_FOUND;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <a class="code" href="idi_8c.html#a335ac0f174d3cfe042d9bda97426616b">IO_Write_U8</a>( SPI_COMMIT, chip_select );</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;}</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"><a class="line" href="idi_8c.html#a674bbccb1f788936c394607cd75c59f7"> 1628</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a674bbccb1f788936c394607cd75c59f7">SPI_FIFO_Write</a>( <span class="keyword">const</span> <span class="keywordtype">void</span> * buffer, <span class="keywordtype">size_t</span> size, <span class="keywordtype">size_t</span> count, FILE * fd_log )</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;{</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <span class="keywordtype">int</span>     error_code;       <span class="comment">/* used primarily for debug purposes */</span></div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <span class="keywordtype">size_t</span>  bytes_in_fifo;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>    empty;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>    full;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <span class="keywordtype">size_t</span>  index;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <span class="keywordtype">size_t</span>  qty_objects;</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="keywordtype">size_t</span>  qty_bytes;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    error_code = SUCCESS;</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <span class="keywordflow">if</span> ( (size * count) &gt; <a class="code" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a> ) <span class="keywordflow">return</span> -EC_PARAMETER;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="idi_8c.html#ac9892490c6b2d5ee1f3490323aa00965">SPI_IsNotPresent</a>() ) <span class="keywordflow">return</span> -EC_SPI_NOT_FOUND;</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    <a class="code" href="idi_8c.html#a547a51422c2fdfe3201983874dfa1a38">SPI_Status_Write_FIFO_Status</a>( &amp;full, &amp;empty, &amp;bytes_in_fifo );</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    qty_objects =  (<a class="code" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a> - bytes_in_fifo) / size; <span class="comment">/* max number of objects that can be processed */</span></div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <span class="keywordflow">if</span> ( count &gt; qty_objects ) count = qty_objects;</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    qty_bytes = count * size;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <span class="keywordflow">for</span> ( index = 0; index &lt; qty_bytes; index++ ) <a class="code" href="idi_8c.html#a335ac0f174d3cfe042d9bda97426616b">IO_Write_U8</a>( SPI_DATA, ((uint8_t *) buffer)[index] );</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    <span class="keywordflow">if</span> ( NULL != fd_log )</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    {</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;        error_code = fwrite( buffer, size, qty_objects, fd_log );</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    }</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <span class="keywordflow">if</span> ( SUCCESS == error_code ) error_code = ( (int) qty_objects );</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;}</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01677"></a><span class="lineno"><a class="line" href="idi_8c.html#acc51bf8337741aa0f73036c6707efc84"> 1677</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#acc51bf8337741aa0f73036c6707efc84">SPI_FIFO_Read</a>( <span class="keyword">const</span> <span class="keywordtype">void</span> * buffer, <span class="keywordtype">size_t</span> size, <span class="keywordtype">size_t</span> count, FILE * fd_log )</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;{</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <span class="keywordtype">int</span>     error_code;       <span class="comment">/* used primarily for debug purposes */</span></div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <span class="keywordtype">size_t</span>  bytes_available;</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>    empty;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>    full;</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    <span class="keywordtype">size_t</span>  index;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="keywordtype">size_t</span>  qty_objects;</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="keywordtype">size_t</span>  qty_bytes;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    error_code = SUCCESS;</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    <span class="keywordflow">if</span> ( (size * count) &gt; <a class="code" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a> ) <span class="keywordflow">return</span> -EC_PARAMETER;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="idi_8c.html#ac9892490c6b2d5ee1f3490323aa00965">SPI_IsNotPresent</a>() ) <span class="keywordflow">return</span> -EC_SPI_NOT_FOUND;</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    <a class="code" href="idi_8c.html#a4f457883748297218a1a747a01671790">SPI_Status_Read_FIFO_Status</a>( &amp;empty, &amp;bytes_available );</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    qty_objects =  bytes_available / size; <span class="comment">/* max number of objects that can be processed */</span></div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    <span class="keywordflow">if</span> ( count &gt; qty_objects ) count = qty_objects;</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    qty_bytes = count * size;</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <span class="keywordflow">for</span> ( index = 0; index &lt; qty_bytes; index++ ) <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( SPI_DATA, &amp;(((uint8_t *) buffer)[index]) );</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    <span class="keywordflow">if</span> ( NULL != fd_log )</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    {</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;        error_code = fwrite( buffer, size, qty_objects, fd_log );</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    }</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <span class="keywordflow">if</span> ( SUCCESS == error_code ) error_code = ( (int) qty_objects );</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;}</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01716"></a><span class="lineno"><a class="line" href="idi_8c.html#a3bbc3691f100386d03819418bd7f7a59"> 1716</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a3bbc3691f100386d03819418bd7f7a59">SPI_Data_Write_Read_Helper</a>(  <span class="keywordtype">size_t</span>          size,       </div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;                                        <span class="keywordtype">size_t</span>          tx_count,   </div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;                                        <span class="keyword">const</span> <span class="keywordtype">void</span> *    tx_buffer,</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;                                        <span class="keywordtype">size_t</span>          rx_size,    </div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;                                        <span class="keyword">const</span> <span class="keywordtype">void</span> *    rx_buffer,</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;                                        <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>            active_tx,</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;                                        <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>            active_rx,</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;                                        <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101d">SPI_CSB_ENUM</a>    csb</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;                                    )</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;{</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    <span class="keywordtype">size_t</span>  rx_bytes_available;</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>    rx_empty;</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>    tx_full;</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>    tx_empty;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    <span class="keywordtype">size_t</span>  tx_bytes_available;</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    <span class="keywordtype">size_t</span>  tx_index;</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    <span class="keywordtype">size_t</span>  rx_index;</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    <span class="keywordtype">size_t</span>  index;</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>    commit_valid;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    uint8_t bit_bucket; <span class="comment">/* tossed */</span></div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    <span class="comment">/* verify size information */</span></div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    <span class="keywordflow">switch</span> ( size )</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    {</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;        <span class="keywordflow">case</span> <span class="keyword">sizeof</span>( uint8_t  ):</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;        <span class="keywordflow">case</span> <span class="keyword">sizeof</span>( uint16_t ):</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;            <span class="keywordflow">break</span>; <span class="comment">/* these sizes are OK */</span></div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;            <span class="keywordflow">return</span> -EC_SPI_OBJECT_SIZE;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    }</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="comment">/* initially need to make sure that both TX and RX are empty */</span></div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    { <span class="comment">//TODO: need a time out of some sort here and then return an error code.</span></div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;        <a class="code" href="idi_8c.html#a547a51422c2fdfe3201983874dfa1a38">SPI_Status_Write_FIFO_Status</a>( &amp;tx_full, &amp;tx_empty, &amp;tx_bytes_available );</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        <span class="keywordflow">if</span> ( <span class="keyword">false</span> == tx_empty ) <a class="code" href="idi_8c.html#afa3ba21357311aece5c1f86706a36338">SPI_Commit</a>( 0xFF );</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    } <span class="keywordflow">while</span> ( <span class="keyword">false</span> == tx_empty );</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    { <span class="comment">//TODO: need a time out of some sort here and then return an error code.</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;        <a class="code" href="idi_8c.html#a4f457883748297218a1a747a01671790">SPI_Status_Read_FIFO_Status</a>( &amp;rx_empty, &amp;rx_bytes_available );</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        <span class="keywordflow">if</span> ( <span class="keyword">false</span> == rx_empty ) <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( SPI_DATA, &amp;bit_bucket  ); <span class="comment">/* toss */</span></div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    } <span class="keywordflow">while</span> ( <span class="keyword">false</span> == rx_empty );</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    tx_index     = 0;</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    rx_index     = 0;</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    commit_valid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    <span class="keywordflow">while</span> ( tx_index &lt; tx_count )</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    {</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;        <span class="comment">/* get status simultaneously */</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;        <a class="code" href="idi_8c.html#a547a51422c2fdfe3201983874dfa1a38">SPI_Status_Write_FIFO_Status</a>( &amp;tx_full, &amp;tx_empty, &amp;tx_bytes_available );</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;        <span class="keywordflow">if</span> ( (<span class="keyword">true</span> == tx_full) &amp;&amp; (<span class="keyword">false</span> == commit_valid) )</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        {</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101da473588067cbc33d34ebe1f6815dcdd4f">IDI_CSB_SOFTWARE</a> != csb ) <a class="code" href="idi_8c.html#afa3ba21357311aece5c1f86706a36338">SPI_Commit</a>( 0xFF ); <span class="comment">/* does not matter what is written */</span></div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;            commit_valid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;        }</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;        <span class="keywordflow">if</span> ( (<span class="keyword">true</span> == tx_empty) &amp;&amp; (<span class="keyword">true</span> == commit_valid) )</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;        {</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;            commit_valid = <span class="keyword">false</span>; <span class="comment">/* will need to restart the buffer transmission */</span></div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;        }</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;        <span class="comment">/* Write Data</span></div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;        <span class="keywordflow">if</span> ( tx_bytes_available &gt; size )</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        {   <span class="comment">/* write data */</span></div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;            <span class="keywordflow">if</span> ( active_tx )</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;            {</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;            <span class="keywordflow">for</span> ( index = 0; index &lt; size; index++ ) <a class="code" href="idi_8c.html#a335ac0f174d3cfe042d9bda97426616b">IO_Write_U8</a>( SPI_DATA, ((uint8_t *) tx_buffer)[tx_index] );</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;            }</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;            {</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;            <span class="keywordflow">for</span> ( index = 0; index &lt; size; index++ ) <a class="code" href="idi_8c.html#a335ac0f174d3cfe042d9bda97426616b">IO_Write_U8</a>( SPI_DATA, 0x00 ); <span class="comment">/* send anything */</span></div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;            }</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;            tx_index = tx_index + size;</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;        }</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        <span class="comment">/* Read Data</span></div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;<span class="comment">         *  This function will play catch up with respect to the transmit side.</span></div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;        <span class="comment">/* get status simultaneously */</span></div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;        <a class="code" href="idi_8c.html#a4f457883748297218a1a747a01671790">SPI_Status_Read_FIFO_Status</a>( &amp;rx_empty, &amp;rx_bytes_available );</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;        <span class="keywordflow">if</span> ( rx_bytes_available &gt;= size )</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;        { <span class="comment">/* read data */</span></div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;            <span class="keywordflow">if</span> ( active_rx )</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;            {</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;            <span class="keywordflow">for</span> ( index = 0; index &lt; size; index++ ) <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( SPI_DATA, &amp;(((uint8_t *) rx_buffer)[rx_index]) );</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;            }</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;            {</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;            <span class="keywordflow">for</span> ( index = 0; index &lt; size; index++ ) <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( SPI_DATA, &amp;bit_bucket ); <span class="comment">/* toss */</span></div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;            }</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;            rx_index = rx_index + size;</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;        }</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    }</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <a class="code" href="idi_8c.html#a547a51422c2fdfe3201983874dfa1a38">SPI_Status_Write_FIFO_Status</a>( &amp;tx_full, &amp;tx_empty, &amp;tx_bytes_available );</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="keywordflow">if</span> ( (<span class="keyword">false</span> == commit_valid) &amp;&amp; (<span class="keyword">false</span> == tx_empty) )</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    { <span class="comment">/* data has not been transmitted yet */</span></div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101da473588067cbc33d34ebe1f6815dcdd4f">IDI_CSB_SOFTWARE</a> != csb ) <a class="code" href="idi_8c.html#afa3ba21357311aece5c1f86706a36338">SPI_Commit</a>( 0xFF ); <span class="comment">/* does not matter what is written */</span></div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;        <span class="comment">/* wait for the buffer to empty */</span></div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;        { <span class="comment">//TODO: need a timeout and return error code if timeout exceeded.</span></div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;            <a class="code" href="idi_8c.html#a547a51422c2fdfe3201983874dfa1a38">SPI_Status_Write_FIFO_Status</a>( &amp;tx_full, &amp;tx_empty, &amp;tx_bytes_available );</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;        } <span class="keywordflow">while</span> ( <span class="keyword">false</span> == tx_empty );</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    }</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    <span class="comment">/* retrieve the remaining read data and don&#39;t return until we are done */</span></div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    <span class="keywordflow">while</span> ( rx_index != tx_index )</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    { <span class="comment">//TODO: timeout mechanism????</span></div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        <a class="code" href="idi_8c.html#a4f457883748297218a1a747a01671790">SPI_Status_Read_FIFO_Status</a>( &amp;rx_empty, &amp;rx_bytes_available );</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        <span class="keywordflow">if</span> ( rx_bytes_available &gt;= size )</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        { <span class="comment">/* read data */</span></div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;            <span class="keywordflow">if</span> ( active_rx )</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;            {</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;            <span class="keywordflow">for</span> ( index = 0; index &lt; size; index++ ) <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( SPI_DATA, &amp;(((uint8_t *) rx_buffer)[rx_index]) );</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;            }</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;            {</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;            <span class="keywordflow">for</span> ( index = 0; index &lt; size; index++ ) <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( SPI_DATA, &amp;bit_bucket ); <span class="comment">/* toss */</span></div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;            }</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;            rx_index = rx_index + size;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        }</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;    }</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;}</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01856"></a><span class="lineno"><a class="line" href="idi_8c.html#aef976bb6ba5348e01e604c1165de7842"> 1856</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#aef976bb6ba5348e01e604c1165de7842">SPI_Data_Write_Read</a>(    <span class="keywordtype">size_t</span>       size,     </div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;                            <span class="keywordtype">size_t</span>       tx_count, </div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;                            <span class="keyword">const</span> <span class="keywordtype">void</span> * tx_buffer,</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;                            <span class="keywordtype">size_t</span>       rx_size,  </div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;                            <span class="keyword">const</span> <span class="keywordtype">void</span> * rx_buffer</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;                        )</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;{</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    <span class="keywordtype">int</span>                 error_code;</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    <span class="keywordtype">int</span>                 index;</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>                active_tx;</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>                active_rx;</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101d">SPI_CSB_ENUM</a>        csb_copy;</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101d">SPI_CSB_ENUM</a>        csb;</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>                csb_buffer_mode_override;</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;<span class="comment">/* TEST FOR VALIDITY OF PARAMETERS */</span></div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    <span class="comment">/* see if there is anything to do */</span></div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;    <span class="keywordflow">if</span> ( ( NULL == tx_buffer ) &amp;&amp; ( NULL == rx_buffer ) ) <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="idi_8c.html#ac9892490c6b2d5ee1f3490323aa00965">SPI_IsNotPresent</a>() ) <span class="keywordflow">return</span> -EC_SPI_NOT_FOUND;</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    <span class="comment">/* initialize parameters */</span></div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    error_code = <a class="code" href="idi_8c.html#a7fcdc0355d1d9273d7ac18bd6e8a6763">SPI_Configuration_Chip_Select_Behavior_Get</a>( &amp;csb );</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;    <span class="comment">//error_code = SPI_Status_Write( &amp;status_tx );</span></div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    <span class="comment">//if ( error_code ) return error_code;</span></div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    <span class="comment">//error_code = SPI_Status_Read( &amp;status_rx );</span></div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    <span class="comment">//if ( error_code ) return error_code;</span></div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    active_rx = <span class="keyword">false</span>; <span class="comment">/* assume that we toss any data to be read out */</span></div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    active_tx = <span class="keyword">false</span>; <span class="comment">/* assume that we have no valid data to write  */</span></div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    <span class="keywordflow">if</span> ( NULL != tx_buffer ) active_tx = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <span class="keywordflow">else</span>                     tx_count  = rx_size;</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <span class="keywordflow">if</span> ( NULL != rx_buffer ) active_rx = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    <span class="keywordflow">else</span>                     rx_size   = tx_count;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101dac825304c7d28288091e65b0e0bfeb440">IDI_CSB_UINT16</a> == csb )</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    { <span class="comment">/* test for even quantity of bytes to transceive */</span></div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;        <span class="keywordflow">if</span> ( ( tx_count &amp; 0x01 ) || ( rx_size &amp; 0x01 ) )</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;        { <span class="comment">/* odd number of bytes detected for buffers */</span></div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;            <span class="keywordflow">return</span> -EC_SPI_BUFFER_SIZE_ODD;</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;        }</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    }</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    csb_buffer_mode_override = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101dab45e8afa970f342353f60ca217b37253">IDI_CSB_BUFFER</a> == csb )</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    { <span class="comment">/* test for object size */</span></div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;        <span class="keywordflow">if</span> ( size &gt; <a class="code" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a> ) <span class="keywordflow">return</span> -EC_SPI_OBJECT_SIZE;</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    }</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    {</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;        <span class="comment">/* test object sizes */</span></div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;        index = <a class="code" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a>;  <span class="comment">/* assumed to be a 2^N number */</span></div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        <span class="keywordflow">while</span> ( index &gt; <span class="keyword">sizeof</span>( uint16_t ) )</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;        {</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;            <span class="keywordflow">if</span> ( size == ( size &amp; index ) )</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;            {</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;                csb_buffer_mode_override = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;            }</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;            index = index &gt;&gt; 1;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;        }</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;        <span class="keywordflow">if</span> ( ( size &gt; 2 ) &amp;&amp; ( <span class="keyword">false</span> == csb_buffer_mode_override ) )</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;        {</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;            <span class="keywordflow">return</span> -EC_SPI_OBJECT_SIZE; <span class="comment">/* not a power of 2 */</span></div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;        }</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <span class="keyword">true</span> == csb_buffer_mode_override )</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;        { <span class="comment">/* OK, go ahead and change to buffer mode */</span></div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;            csb_copy   = csb;</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;            csb        = <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101dab45e8afa970f342353f60ca217b37253">IDI_CSB_BUFFER</a>;</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;            error_code = <a class="code" href="idi_8c.html#a09d78e0d3846eef0f05a56ac361bbfeb">SPI_Configuration_Chip_Select_Behavior_Set</a>( csb );</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;        }</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    }</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;<span class="comment">/* PERFORM TRANSACTIONS */</span></div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    <span class="keywordflow">switch</span>( csb )</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    {</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101da473588067cbc33d34ebe1f6815dcdd4f">IDI_CSB_SOFTWARE</a>:</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101da72c215ca12871c8b04f9a1324f80cb2e">IDI_CSB_UINT8</a>:</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101dac825304c7d28288091e65b0e0bfeb440">IDI_CSB_UINT16</a>:</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;            error_code = <a class="code" href="idi_8c.html#a3bbc3691f100386d03819418bd7f7a59">SPI_Data_Write_Read_Helper</a>( size,</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;                                                     tx_count,</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;                                                     tx_buffer,</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;                                                     rx_size,</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;                                                     rx_buffer,</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;                                                     active_tx,</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;                                                     active_rx,</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;                                                     csb</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;                                                   );</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101dab45e8afa970f342353f60ca217b37253">IDI_CSB_BUFFER</a>:</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;            <span class="keywordflow">for</span> ( index = 0; index &lt; tx_count; index++ )</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;            {</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;                error_code = <a class="code" href="idi_8c.html#a3bbc3691f100386d03819418bd7f7a59">SPI_Data_Write_Read_Helper</a>( size,</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;                                                         1,</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;                                                         active_tx ? &amp;(((uint8_t *) tx_buffer)[index*size]) : NULL,</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;                                                         1,</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;                                                         active_rx ? &amp;(((uint8_t *) rx_buffer)[index*size]) : NULL,</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;                                                         active_tx,</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;                                                         active_rx,</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;                                                         csb</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;                                                       );</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;            }</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;            <span class="keywordflow">if</span> ( csb_buffer_mode_override )</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;            { <span class="comment">/* restore to original csb */</span></div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;                error_code = <a class="code" href="idi_8c.html#a09d78e0d3846eef0f05a56ac361bbfeb">SPI_Configuration_Chip_Select_Behavior_Set</a>( csb_copy );</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;            }</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;            <span class="keywordflow">return</span> -EC_SPI_CSB_OUT_OF_RANGE;</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    }</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;}</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l01987"></a><span class="lineno"><a class="line" href="idi_8c.html#a7e1e8c7428f97d95c1048515aa248ab0"> 1987</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a7e1e8c7428f97d95c1048515aa248ab0">SPI_Data_Write</a>( <span class="keyword">const</span> <span class="keywordtype">void</span> *    tx_buffer,</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;                    <span class="keywordtype">size_t</span>          size,       </div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;                    <span class="keywordtype">size_t</span>          tx_count,   </div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;                    FILE *          fd_log      </div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;                  )</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;{</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;    <span class="keywordtype">int</span> error_code;</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    error_code = <a class="code" href="idi_8c.html#aef976bb6ba5348e01e604c1165de7842">SPI_Data_Write_Read</a>(   size,</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;                                        tx_count,</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;                                        tx_buffer,</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;                                        0,          <span class="comment">/* nothing to receive */</span></div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;                                        NULL        <span class="comment">/* nothing to receive */</span></div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;                                    );</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    <span class="keywordflow">if</span> ( NULL != fd_log )</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;    {</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;        error_code = fwrite( tx_buffer, size, tx_count, fd_log );</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    }</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;}</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02023"></a><span class="lineno"><a class="line" href="idi_8c.html#a0dc0c4180557014ec4c687dcc8d326e7"> 2023</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a0dc0c4180557014ec4c687dcc8d326e7">SPI_Data_Read</a>(  <span class="keyword">const</span> <span class="keywordtype">void</span> *    rx_buffer,</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;                    <span class="keywordtype">size_t</span>          size,       </div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;                    <span class="keywordtype">size_t</span>          rx_size,    </div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                    FILE *          fd_log      </div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;                 )</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;{</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <span class="keywordtype">int</span> error_code;</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    error_code = <a class="code" href="idi_8c.html#aef976bb6ba5348e01e604c1165de7842">SPI_Data_Write_Read</a>(   size,</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;                                        0,      <span class="comment">/* nothing to transmit */</span></div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;                                        NULL,   <span class="comment">/* nothing to transmit */</span></div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;                                        rx_size,</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;                                        rx_buffer</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;                                    );</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    <span class="keywordflow">if</span> ( NULL != fd_log )</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    {</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;        error_code = fwrite( rx_buffer, size, rx_size, fd_log );</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    }</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;}</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;<span class="comment">/*    &lt; &lt; &lt; &lt;  F R A M   F U N C T I O N S  &gt; &gt; &gt; &gt;                                                       */</span></div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02059"></a><span class="lineno"><a class="line" href="idi_8c.html#adc29c2ff13d900c2f185ee95427fb06cab1ed491f47f766d02b4c8d5e8de3339b"> 2059</a></span>&#160;<span class="keyword">enum</span> { <a class="code" href="idi_8c.html#adc29c2ff13d900c2f185ee95427fb06cab1ed491f47f766d02b4c8d5e8de3339b">FRAM_DENSITY_BYTES</a> = 8192 };</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02069"></a><span class="lineno"><a class="line" href="idi_8c.html#a478c7200a60ec93c9195e44fc2b294f7"> 2069</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a478c7200a60ec93c9195e44fc2b294f7">FRAM__Write_Enable_Latch_Set</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;{</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;    uint8_t tx_buf[1] = { 0x06 }; <span class="comment">/* opcode: WREN = 0x06 */</span></div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    <a class="code" href="idi_8c.html#a09d78e0d3846eef0f05a56ac361bbfeb">SPI_Configuration_Chip_Select_Behavior_Set</a>( <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101dab45e8afa970f342353f60ca217b37253">IDI_CSB_BUFFER</a> );</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="idi_8c.html#aef976bb6ba5348e01e604c1165de7842">SPI_Data_Write_Read</a>( <span class="keyword">sizeof</span>( uint8_t ), 1, tx_buf, 0, NULL );</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;}</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02083"></a><span class="lineno"><a class="line" href="idi_8c.html#a82f93449bb944b1e52db87e360bb620c"> 2083</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a82f93449bb944b1e52db87e360bb620c">FRAM__Write_Disable</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;{</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    uint8_t tx_buf[1] = { 0x04 }; <span class="comment">/* opcode: WRDI = 0x04 */</span></div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;    <a class="code" href="idi_8c.html#a09d78e0d3846eef0f05a56ac361bbfeb">SPI_Configuration_Chip_Select_Behavior_Set</a>( <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101dab45e8afa970f342353f60ca217b37253">IDI_CSB_BUFFER</a> );</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="idi_8c.html#aef976bb6ba5348e01e604c1165de7842">SPI_Data_Write_Read</a>( <span class="keyword">sizeof</span>( uint8_t ), 1, tx_buf, 0, NULL );</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;}</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02098"></a><span class="lineno"><a class="line" href="idi_8c.html#ae5af3fdd5b69319183d08077dbf622f4"> 2098</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#ae5af3fdd5b69319183d08077dbf622f4">FRAM__Read_Status_Register</a>( uint8_t * status )</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;{</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;    <span class="keywordtype">int</span>     error_code;</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;    uint8_t tx_buf[2] = { 0x05, 0x00 }; <span class="comment">/* opcode: RDSR = 0x04 */</span></div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;    uint8_t rx_buf[2];</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    <a class="code" href="idi_8c.html#a09d78e0d3846eef0f05a56ac361bbfeb">SPI_Configuration_Chip_Select_Behavior_Set</a>( <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101dab45e8afa970f342353f60ca217b37253">IDI_CSB_BUFFER</a> );</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;    error_code = <a class="code" href="idi_8c.html#aef976bb6ba5348e01e604c1165de7842">SPI_Data_Write_Read</a>( <span class="keyword">sizeof</span>( uint8_t ), 2, tx_buf, 2, rx_buf );</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    *status = rx_buf[1];</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;}</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02119"></a><span class="lineno"><a class="line" href="idi_8c.html#a9a0f7ac60fdc2ff32c1cf9cfb7bfdad3"> 2119</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a9a0f7ac60fdc2ff32c1cf9cfb7bfdad3">FRAM__Write_Status_Register</a>( uint8_t status )</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;{</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    <span class="keywordtype">int</span>     error_code;</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;    uint8_t tx_buf[2] = { 0x05, 0x00 }; <span class="comment">/* opcode: RDSR = 0x04 */</span></div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    uint8_t rx_buf[2];</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    tx_buf[1] = status;</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;    <a class="code" href="idi_8c.html#a09d78e0d3846eef0f05a56ac361bbfeb">SPI_Configuration_Chip_Select_Behavior_Set</a>( <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101dab45e8afa970f342353f60ca217b37253">IDI_CSB_BUFFER</a> );</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    error_code = <a class="code" href="idi_8c.html#aef976bb6ba5348e01e604c1165de7842">SPI_Data_Write_Read</a>( <span class="keyword">sizeof</span>( uint8_t ), 2, tx_buf, 2, rx_buf );</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;}</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02142"></a><span class="lineno"><a class="line" href="idi_8c.html#a64361bd44229521030aaf0c373dbfaa3"> 2142</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a64361bd44229521030aaf0c373dbfaa3">FRAM__Memory_Read</a>( uint16_t address, <span class="keywordtype">size_t</span> count, uint8_t * buffer )</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;{</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;    <span class="keywordtype">int</span>             error_code;</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;<span class="comment">//  SPI_CSB_ENUM    csb_copy;</span></div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;    uint8_t         tx_buf[3] = { 0x03, 0x00, 0x00 }; <span class="comment">/* opcode: READ = 0x03 */</span></div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    <span class="comment">//uint8_t rx_buf[3];</span></div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;    tx_buf[1] = (uint8_t)( address &amp; 0xFF );</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    tx_buf[2] = (uint8_t)( address &gt;&gt;   8 );</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;<span class="comment">//  /* retain an existing copy of the actual csb value */</span></div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;<span class="comment">//  error_code = SPI_Configuration_Chip_Select_Behavior_Get( &amp;csb_copy );</span></div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;<span class="comment">//  if ( error_code ) return error_code;</span></div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    <span class="comment">/* over-ride and set it to what we wish it to be */</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    error_code = <a class="code" href="idi_8c.html#a09d78e0d3846eef0f05a56ac361bbfeb">SPI_Configuration_Chip_Select_Behavior_Set</a>( <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101da473588067cbc33d34ebe1f6815dcdd4f">IDI_CSB_SOFTWARE</a> );</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;    <a class="code" href="idi_8c.html#afa3ba21357311aece5c1f86706a36338">SPI_Commit</a>( 1 );</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;    error_code = <a class="code" href="idi_8c.html#aef976bb6ba5348e01e604c1165de7842">SPI_Data_Write_Read</a>( <span class="keyword">sizeof</span>( uint8_t ), 3, tx_buf, 0, NULL );</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    error_code = <a class="code" href="idi_8c.html#aef976bb6ba5348e01e604c1165de7842">SPI_Data_Write_Read</a>( <span class="keyword">sizeof</span>( uint8_t ), 0, NULL, count, buffer );</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    <span class="keywordflow">while</span> ( <a class="code" href="idi_8c.html#a8ed95935ad595c4e5dde98ffa26a4689">SPI_Status_Write_FIFO_Is_Not_Empty</a>() ); <span class="comment">/* wait for buffer to empty */</span></div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;    <a class="code" href="idi_8c.html#afa3ba21357311aece5c1f86706a36338">SPI_Commit</a>( 0 );</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;<span class="comment">//  /* restore the csb */</span></div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;<span class="comment">//  error_code = SPI_Configuration_Chip_Select_Behavior_Set( csb_copy );</span></div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;<span class="comment">//  if ( error_code ) return error_code;</span></div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;}</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02187"></a><span class="lineno"><a class="line" href="idi_8c.html#a8cf2cdb8e3ac9dd8cdbefa57b91b487d"> 2187</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a8cf2cdb8e3ac9dd8cdbefa57b91b487d">FRAM__Memory_Write</a>( uint16_t address, <span class="keywordtype">size_t</span> count, uint8_t * buffer )</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;{</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    <span class="keywordtype">int</span>             error_code;</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;<span class="comment">//  SPI_CSB_ENUM    csb_copy;</span></div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    uint8_t         tx_buf[3] = { 0x02, 0x00, 0x00 }; <span class="comment">/* opcode: WRITE = 0x02 */</span></div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;    tx_buf[1] = (uint8_t)( address &amp; 0xFF );</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    tx_buf[2] = (uint8_t)( address &gt;&gt;   8 );</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;<span class="comment">//  /* retain an existing copy of the actual csb value */</span></div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;<span class="comment">//  error_code = SPI_Configuration_Chip_Select_Behavior_Get( &amp;csb_copy );</span></div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;<span class="comment">//  if ( error_code ) return error_code;</span></div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    <span class="comment">/* over-ride and set it to what we wish it to be */</span></div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    error_code = <a class="code" href="idi_8c.html#a09d78e0d3846eef0f05a56ac361bbfeb">SPI_Configuration_Chip_Select_Behavior_Set</a>( <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101da473588067cbc33d34ebe1f6815dcdd4f">IDI_CSB_SOFTWARE</a> );</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    <a class="code" href="idi_8c.html#afa3ba21357311aece5c1f86706a36338">SPI_Commit</a>( 1 );</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;    error_code = <a class="code" href="idi_8c.html#aef976bb6ba5348e01e604c1165de7842">SPI_Data_Write_Read</a>( <span class="keyword">sizeof</span>( uint8_t ), 3, tx_buf, 0, NULL );</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    error_code = <a class="code" href="idi_8c.html#aef976bb6ba5348e01e604c1165de7842">SPI_Data_Write_Read</a>( <span class="keyword">sizeof</span>( uint8_t ), count, buffer, 0, NULL );</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;    <span class="keywordflow">while</span> ( <a class="code" href="idi_8c.html#a8ed95935ad595c4e5dde98ffa26a4689">SPI_Status_Write_FIFO_Is_Not_Empty</a>() ); <span class="comment">/* wait for buffer to empty */</span></div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;    <a class="code" href="idi_8c.html#afa3ba21357311aece5c1f86706a36338">SPI_Commit</a>( 0 );</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;<span class="comment">//  /* restore the csb */</span></div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;<span class="comment">//  error_code = SPI_Configuration_Chip_Select_Behavior_Set( csb_copy );</span></div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;<span class="comment">//  if ( error_code ) return error_code;</span></div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;}</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02228"></a><span class="lineno"><a class="line" href="idi_8c.html#a7e74342366750cf212bced8dcccb433d"> 2228</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a7e74342366750cf212bced8dcccb433d">FRAM__Read_ID</a>( uint32_t * <span class="keywordtype">id</span> )</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;{</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;    <span class="keywordtype">int</span>         error_code;</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;    uint8_t     tx_buf[5] = { 0x9F, 0x00, 0x00, 0x00, 0x00 }; <span class="comment">/* opcode: RDID = 0x9F */</span></div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;    uint8_t     rx_buf[5];</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;    <a class="code" href="idi_8c.html#a09d78e0d3846eef0f05a56ac361bbfeb">SPI_Configuration_Chip_Select_Behavior_Set</a>( <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101dab45e8afa970f342353f60ca217b37253">IDI_CSB_BUFFER</a> );</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    error_code = <a class="code" href="idi_8c.html#aef976bb6ba5348e01e604c1165de7842">SPI_Data_Write_Read</a>( <span class="keyword">sizeof</span>( uint8_t ), 5, tx_buf, 5, rx_buf );</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    {</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;        <span class="keywordtype">int</span> id_scratch = 0;</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;        <span class="keywordtype">int</span> index;</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;        <span class="keywordflow">for</span> ( index = 4; index &gt; 0; index-- )</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;        {</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;            id_scratch = ( id_scratch &lt;&lt; 8 ) | ( (uint32_t) rx_buf[index] );</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;        }</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;        *<span class="keywordtype">id</span> = id_scratch;</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    }</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;}</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02273"></a><span class="lineno"><a class="line" href="idi_8c.html#a9486d70eec81c27defc04c1e0ebbcf71"> 2273</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a9486d70eec81c27defc04c1e0ebbcf71">FRAM_Set</a>( <span class="keywordtype">size_t</span> count, uint8_t * buffer )</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;{</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;    <span class="keywordtype">int</span>         error_code;</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;    <span class="keywordtype">int</span>         block_count;</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    <span class="keywordtype">int</span>         block_remainder;</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;    uint16_t    address;</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    uint32_t    id;</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;    error_code = <a class="code" href="idi_8c.html#a7e74342366750cf212bced8dcccb433d">FRAM__Read_ID</a>( &amp;<span class="keywordtype">id</span> );</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    address = 0;</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    <span class="keywordflow">if</span> ( count &gt; 1 )</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    { <span class="comment">/* */</span></div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;        block_count     = ((int) <a class="code" href="idi_8c.html#adc29c2ff13d900c2f185ee95427fb06cab1ed491f47f766d02b4c8d5e8de3339b">FRAM_DENSITY_BYTES</a>) / ((int) count );</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;        block_remainder = ((int) <a class="code" href="idi_8c.html#adc29c2ff13d900c2f185ee95427fb06cab1ed491f47f766d02b4c8d5e8de3339b">FRAM_DENSITY_BYTES</a>) - ( block_count * ((int) <a class="code" href="idi_8c.html#a7a7a8212bf3a00a8a97ac4fd9d8b0f29">FRAM_BLOCK_SIZE</a>) );</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;    }</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;    { <span class="comment">/* only one fill character, so we create a buffer of it to make things a bit faster */</span></div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;        <span class="keywordtype">int</span>         index;</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span>   block_size = <a class="code" href="idi_8c.html#a7a7a8212bf3a00a8a97ac4fd9d8b0f29">FRAM_BLOCK_SIZE</a>;</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;        <span class="comment">/* prefill */</span></div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;        <span class="keywordflow">if</span> ( NULL == buffer )</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;        {</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;            <span class="keywordflow">for</span> ( index = 0; index &lt; block_size; index++ ) <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a4efa21fb4be298d529ae04ed2ca3466e">fram_block</a>[index]= 0;</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;        }</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;        {</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;            <span class="keywordflow">for</span> ( index = 0; index &lt; block_size; index++ ) <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a4efa21fb4be298d529ae04ed2ca3466e">fram_block</a>[index]= buffer[0];</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;        }</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;        block_count     = ((int) <a class="code" href="idi_8c.html#adc29c2ff13d900c2f185ee95427fb06cab1ed491f47f766d02b4c8d5e8de3339b">FRAM_DENSITY_BYTES</a>) / block_size;</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;        block_remainder = ((int) <a class="code" href="idi_8c.html#adc29c2ff13d900c2f185ee95427fb06cab1ed491f47f766d02b4c8d5e8de3339b">FRAM_DENSITY_BYTES</a>) - ( block_count * block_size );</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;        buffer          = <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a4efa21fb4be298d529ae04ed2ca3466e">fram_block</a>;</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    }</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;    <span class="keywordflow">while</span> ( block_count &gt; 0 )</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    {</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;        error_code = <a class="code" href="idi_8c.html#a8cf2cdb8e3ac9dd8cdbefa57b91b487d">FRAM__Memory_Write</a>( address, ((<span class="keywordtype">int</span>) count), buffer );</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;        address += (uint16_t) count;</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;        block_count--;</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    }</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    <span class="keywordflow">if</span> ( block_remainder &gt; 0 )</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;    {</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;        error_code = <a class="code" href="idi_8c.html#a8cf2cdb8e3ac9dd8cdbefa57b91b487d">FRAM__Memory_Write</a>( address, block_remainder, buffer );</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;        <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    }</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;}</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02329"></a><span class="lineno"><a class="line" href="idi_8c.html#abea0d9db987eaf2b5f6a6696bbed5993"> 2329</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#abea0d9db987eaf2b5f6a6696bbed5993">FRAM_Report</a>( uint16_t address, <span class="keywordtype">size_t</span> length, FILE * out )</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;{</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    <span class="keywordtype">int</span>         error_code;</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span>   block_size = <a class="code" href="idi_8c.html#abc6126af1d45847bc59afa0aa3216b04a61beeb8caa7eef5ea8ccec0c05cd142e">HEX_DUMP_BYTES_PER_LINE</a>;</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    <span class="keywordtype">size_t</span>      block_count;</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    <span class="keywordtype">size_t</span>      block_remainder;</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;    block_count = ((size_t) length) / block_size;</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    block_remainder = ((size_t) length) - ( block_count * block_size );</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    <span class="keywordflow">while</span> ( block_count &gt; 0 )</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    { <span class="comment">/* output a line at a time */</span></div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;        error_code = <a class="code" href="idi_8c.html#a64361bd44229521030aaf0c373dbfaa3">FRAM__Memory_Read</a>( address, block_size, <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a4efa21fb4be298d529ae04ed2ca3466e">fram_block</a> );</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;        error_code = <a class="code" href="idi_8c.html#afe81fee380d83ce9efc1bca190b7d2ba">Hex_Dump_Line</a>( address, block_size, <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a4efa21fb4be298d529ae04ed2ca3466e">fram_block</a>, out );</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;        address += block_size;</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;        block_count--;</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;    }</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;    <span class="keywordflow">if</span> ( block_remainder &gt; 0 )</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    { <span class="comment">/* output any remaining portion */</span></div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;        error_code = <a class="code" href="idi_8c.html#a64361bd44229521030aaf0c373dbfaa3">FRAM__Memory_Read</a>( address, block_remainder, <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a4efa21fb4be298d529ae04ed2ca3466e">fram_block</a> );</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;        error_code = <a class="code" href="idi_8c.html#afe81fee380d83ce9efc1bca190b7d2ba">Hex_Dump_Line</a>( address, block_remainder, <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a4efa21fb4be298d529ae04ed2ca3466e">fram_block</a>, out );</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;        <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    }</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;}</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02362"></a><span class="lineno"><a class="line" href="idi_8c.html#ae0b87251c6439330b9287fc12cc306dd"> 2362</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#ae0b87251c6439330b9287fc12cc306dd">FRAM_Memory_To_File</a>( uint16_t address, <span class="keywordtype">size_t</span> length, FILE * binary )</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;{</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;    <span class="keywordtype">int</span>         error_code;</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    <span class="keywordtype">size_t</span>      block_count;</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;    <span class="keywordtype">size_t</span>      block_remainder;</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    block_count = length / ((size_t) <a class="code" href="idi_8c.html#a7a7a8212bf3a00a8a97ac4fd9d8b0f29">FRAM_BLOCK_SIZE</a>);</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;    block_remainder = length - ( block_count * ((size_t) <a class="code" href="idi_8c.html#a7a7a8212bf3a00a8a97ac4fd9d8b0f29">FRAM_BLOCK_SIZE</a>) );</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;    <span class="keywordflow">while</span> ( block_count &gt; 0 )</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    {</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;        error_code = <a class="code" href="idi_8c.html#a64361bd44229521030aaf0c373dbfaa3">FRAM__Memory_Read</a>( address, ((<span class="keywordtype">size_t</span>) <a class="code" href="idi_8c.html#a7a7a8212bf3a00a8a97ac4fd9d8b0f29">FRAM_BLOCK_SIZE</a>), <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a4efa21fb4be298d529ae04ed2ca3466e">fram_block</a> );</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;        fwrite( <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a4efa21fb4be298d529ae04ed2ca3466e">fram_block</a>, 1, ((<span class="keywordtype">size_t</span>) FRAM_BLOCK_SIZE), binary );</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;        address += <a class="code" href="idi_8c.html#a7a7a8212bf3a00a8a97ac4fd9d8b0f29">FRAM_BLOCK_SIZE</a>;</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;        block_count--;</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;    }</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    <span class="keywordflow">if</span> ( block_remainder &gt; 0 )</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    {</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;        error_code = <a class="code" href="idi_8c.html#a64361bd44229521030aaf0c373dbfaa3">FRAM__Memory_Read</a>( address, block_remainder, <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a4efa21fb4be298d529ae04ed2ca3466e">fram_block</a> );</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;        fwrite( <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a4efa21fb4be298d529ae04ed2ca3466e">fram_block</a>, 1, block_remainder, binary );</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;        <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;    }</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;}</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02393"></a><span class="lineno"><a class="line" href="idi_8c.html#acfdd9db9e4fd5406b6024cf5ac492b95"> 2393</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#acfdd9db9e4fd5406b6024cf5ac492b95">FRAM_File_To_Memory</a>( uint16_t address, <span class="keywordtype">size_t</span> length, FILE * binary )</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;{</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;    <span class="keywordtype">int</span>     error_code;</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;    <span class="keywordtype">size_t</span>  count_read;</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    <span class="keywordtype">size_t</span>  count_total;</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;    <span class="keywordtype">size_t</span>  count_actual;</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;    count_total = 0;</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;    count_read  = <a class="code" href="idi_8c.html#a7a7a8212bf3a00a8a97ac4fd9d8b0f29">FRAM_BLOCK_SIZE</a>;</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    <span class="keywordflow">if</span> ( 0 == length )</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;    {</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;        {</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;            count_actual = fread( <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a4efa21fb4be298d529ae04ed2ca3466e">fram_block</a>, 1, count_read, binary );</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;            error_code   = <a class="code" href="idi_8c.html#a8cf2cdb8e3ac9dd8cdbefa57b91b487d">FRAM__Memory_Write</a>( address, count_read, <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a4efa21fb4be298d529ae04ed2ca3466e">fram_block</a> );</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;            <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;            count_total += count_actual;</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;            <span class="keywordflow">if</span> ( count_actual != count_read ) count_read = 0; <span class="comment">/* must be at end of file */</span></div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;        } <span class="keywordflow">while</span> ( count_read &gt; 0 );</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;    }</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;    {</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;        <span class="keywordflow">if</span> ( length &lt; count_read ) count_read = length;</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;        {</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;            count_actual = fread( <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a4efa21fb4be298d529ae04ed2ca3466e">fram_block</a>, 1, count_read, binary );</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;            error_code   = <a class="code" href="idi_8c.html#a8cf2cdb8e3ac9dd8cdbefa57b91b487d">FRAM__Memory_Write</a>( address, count_read, <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a4efa21fb4be298d529ae04ed2ca3466e">fram_block</a> );</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;            <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;            count_total += count_actual;</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;            length      -= count_actual;</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;            <span class="keywordflow">if</span> ( count_actual != count_read ) count_read = 0; <span class="comment">/* must be at end of file */</span></div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;            <span class="keywordflow">if</span> ( length &lt; count_read ) count_read = length;</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;        } <span class="keywordflow">while</span> ( count_read &gt; 0 );</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;    }</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;}</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02440"></a><span class="lineno"><a class="line" href="structcommand__line.html"> 2440</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structcommand__line.html">command_line</a></div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;{</div>
<div class="line"><a name="l02442"></a><span class="lineno"><a class="line" href="structcommand__line.html#a62417f2e64cfcb563974afad3cd84c8f"> 2442</a></span>&#160;    int ( * <a class="code" href="structcommand__line.html#a62417f2e64cfcb563974afad3cd84c8f">cmd_fnc</a> )( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] );</div>
<div class="line"><a name="l02443"></a><span class="lineno"><a class="line" href="structcommand__line.html#a5ac083a645d964373f022d03df4849c8"> 2443</a></span>&#160;    <span class="keywordtype">char</span> *  <a class="code" href="structcommand__line.html#a5ac083a645d964373f022d03df4849c8">name</a>;</div>
<div class="line"><a name="l02444"></a><span class="lineno"><a class="line" href="structcommand__line.html#a67b7e976c6444c3d7fab151527bdae33"> 2444</a></span>&#160;    <span class="keywordtype">char</span> *  <a class="code" href="structcommand__line.html#a67b7e976c6444c3d7fab151527bdae33">help</a>;</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;};</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;<span class="comment">/*    &lt; &lt; &lt; &lt;  S P I  C O M M A N D   F U N C T I O N S  &gt; &gt; &gt; &gt;                                          */</span></div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02461"></a><span class="lineno"><a class="line" href="idi_8c.html#a668e4784c156d76f27de8e047391007e"> 2461</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a668e4784c156d76f27de8e047391007e">IDI_CMD__SPI_ID</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;{ <span class="comment">/*  idi spi id */</span></div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;    uint16_t    id;</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;    (void)      argc;</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;    (void)      argv;</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    <a class="code" href="idi_8c.html#a880aef745d1398d7deb49b45e988ad84">SPI_ID_Get</a>( &amp;<span class="keywordtype">id</span> );</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;    printf( <span class="stringliteral">&quot;SPI ID: 0x%04X\n&quot;</span>, <span class="keywordtype">id</span> );</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;}</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02477"></a><span class="lineno"><a class="line" href="idi_8c.html#af8816b167342609f62dea85684c8668b"> 2477</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#af8816b167342609f62dea85684c8668b">IDI_CMD__SPI_Config_Get</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;{ <span class="comment">/*  idi spi cfg */</span></div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;    <span class="keywordtype">int</span>     error_code;</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;    <span class="keyword">struct  </span><a class="code" href="structspi__cfg.html">spi_cfg</a> cfg;</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;    (void)  argc;</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;    (void)  argv;</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;    error_code = <a class="code" href="idi_8c.html#a59b98a79cf5c0821e12ab088d76f355f">SPI_Configuration_Get</a>( &amp;cfg );</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;    error_code = <a class="code" href="idi_8c.html#a9f519b04b7593c82d4037ead8f0e6623">SPI_Report_Configuration_Text</a>( &amp;cfg, stdout );</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;    printf( <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;}</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02499"></a><span class="lineno"><a class="line" href="idi_8c.html#a99f6186befa8e74608716454a91c44bd"> 2499</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a99f6186befa8e74608716454a91c44bd">IDI_CMD__SPI_Config_Clock_Hz</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;{ <span class="comment">/*  idi spi clk [&lt;freq_hz&gt;] */</span></div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;    <span class="keywordtype">int</span>      error_code;</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;    <span class="keywordtype">double</span>   clock_request_hz;</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;    <span class="keywordtype">double</span>   clock_actual_hz;</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;    <span class="keywordtype">double</span>   error;</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;    uint16_t hci;</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    <span class="keyword">struct   </span><a class="code" href="structspi__cfg.html">spi_cfg</a> cfg;</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    <span class="comment">/* pull current configuration from the hardware -- allows for warm restore so to speak */</span></div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;    error_code = <a class="code" href="idi_8c.html#a59b98a79cf5c0821e12ab088d76f355f">SPI_Configuration_Get</a>( &amp;cfg );</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 )</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    { <span class="comment">/* read */</span></div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;        printf( <span class="stringliteral">&quot;SPI CLK: %f hz\n&quot;</span>, cfg.<a class="code" href="structspi__cfg.html#aaed71f77ad7200a8f4bf0f1cdd0fb328">clock_hz</a> );</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    }</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;    { <span class="comment">/* write */</span></div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;        clock_request_hz = atof( argv[0] );</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;        error_code = <a class="code" href="idi_8c.html#ad86d10585f6c367cfc4490a5366f1d25">SPI_Calculate_Clock</a>( clock_request_hz, &amp;clock_actual_hz, &amp;error, &amp;hci );</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;        <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;        <span class="comment">//cfg.half_clock_interval = hci;</span></div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;        <span class="comment">/* commit configuration to hardware */</span></div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;        cfg.<a class="code" href="structspi__cfg.html#aaed71f77ad7200a8f4bf0f1cdd0fb328">clock_hz</a> = clock_actual_hz;</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;        error_code   = <a class="code" href="idi_8c.html#a5817326fd7bd59487a4fefc89ecbc4d3">SPI_Configuration_Set</a>( &amp;cfg );</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;        <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;        printf( <span class="stringliteral">&quot;OK\n&quot;</span> );</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    }</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;}</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02536"></a><span class="lineno"><a class="line" href="idi_8c.html#a8e322fdc87a9fc7da0cebe8d074693e2"> 2536</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a8e322fdc87a9fc7da0cebe8d074693e2">IDI_CMD__SPI_Config_End_Cycle_Delay_Sec</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;{ <span class="comment">/*  idi spi ecd [&lt;time sec&gt;] */</span></div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    <span class="keywordtype">int</span>      error_code;</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    <span class="keywordtype">double</span>   request_sec;</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    <span class="keywordtype">double</span>   actual_sec;</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;    <span class="keywordtype">double</span>   error;</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;    uint8_t  ecd;</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    <span class="keyword">struct   </span><a class="code" href="structspi__cfg.html">spi_cfg</a> cfg;</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;    <span class="comment">/* pull current configuration from the hardware -- allows for warm restore so to speak */</span></div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;    error_code = <a class="code" href="idi_8c.html#a59b98a79cf5c0821e12ab088d76f355f">SPI_Configuration_Get</a>( &amp;cfg );</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 )</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;    { <span class="comment">/* read */</span></div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;        printf( <span class="stringliteral">&quot;SPI ECD: %g sec\n&quot;</span>, ( cfg.<a class="code" href="structspi__cfg.html#adc10d917ca7551b41164711a54684a51">end_delay_ns</a> * 1.0e-9 ) );</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;    }</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    { <span class="comment">/* write */</span></div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;        request_sec = atof( argv[0] );</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;        error_code = <a class="code" href="idi_8c.html#a50b862cbcc29146e70e7543208ca7e81">SPI_Calculate_End_Cycle_Delay</a>( <a class="code" href="idi_8c.html#a8130129973acaff19c9b1cfd5955d12d">SPI_Calculate_Half_Clock_Interval_Sec</a>( cfg.<a class="code" href="structspi__cfg.html#ad8d6adceadaec7f4c92349ec8beb720d">half_clock_interval</a> ),</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;                                                    request_sec,</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;                                                    &amp;actual_sec,</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;                                                    &amp;error,</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;                                                    &amp;ecd</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;                                                  );</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;        <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;        cfg.<a class="code" href="structspi__cfg.html#adc10d917ca7551b41164711a54684a51">end_delay_ns</a> = actual_sec * 1.0e9;</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;        <span class="comment">/* commit configuration to hardware */</span></div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;        error_code = <a class="code" href="idi_8c.html#a5817326fd7bd59487a4fefc89ecbc4d3">SPI_Configuration_Set</a>( &amp;cfg );</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;        <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;        printf( <span class="stringliteral">&quot;OK\n&quot;</span> );</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;    }</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;}</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02586"></a><span class="lineno"><a class="line" href="idi_8c.html#a356455eaafd272310dac8a96d94b179d"> 2586</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a356455eaafd272310dac8a96d94b179d">IDI_CMD__SPI_Config_Mode</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;{ <span class="comment">/*  idi spi mode [0/1/2/3] */</span></div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;    <span class="keywordtype">int</span>      error_code;</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;    <span class="keywordtype">int</span>      mode;</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;    <span class="keyword">struct   </span><a class="code" href="structspi__cfg.html">spi_cfg</a> cfg;</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;    <span class="comment">/* pull current configuration from the hardware -- allows for warm restore so to speak */</span></div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;    error_code = <a class="code" href="idi_8c.html#a59b98a79cf5c0821e12ab088d76f355f">SPI_Configuration_Get</a>( &amp;cfg );</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 )</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;    { <span class="comment">/* read */</span></div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;        <span class="keywordflow">if</span>      ( (<span class="keyword">false</span> == cfg.<a class="code" href="structspi__cfg.html#a08a45f7aec9d8b6e59e91a56dc889384">sclk_polarity</a> ) &amp;&amp; (<span class="keyword">false</span> == cfg.<a class="code" href="structspi__cfg.html#a2613a037b4632a6d74e89aeb62d12344">sclk_phase</a>) ) mode = 0;</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (<span class="keyword">false</span> == cfg.<a class="code" href="structspi__cfg.html#a08a45f7aec9d8b6e59e91a56dc889384">sclk_polarity</a> ) &amp;&amp; (<span class="keyword">true</span>  == cfg.<a class="code" href="structspi__cfg.html#a2613a037b4632a6d74e89aeb62d12344">sclk_phase</a>) ) mode = 1;</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (<span class="keyword">true</span>  == cfg.<a class="code" href="structspi__cfg.html#a08a45f7aec9d8b6e59e91a56dc889384">sclk_polarity</a> ) &amp;&amp; (<span class="keyword">false</span> == cfg.<a class="code" href="structspi__cfg.html#a2613a037b4632a6d74e89aeb62d12344">sclk_phase</a>) ) mode = 2;</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (<span class="keyword">true</span>  == cfg.<a class="code" href="structspi__cfg.html#a08a45f7aec9d8b6e59e91a56dc889384">sclk_polarity</a> ) &amp;&amp; (<span class="keyword">true</span>  == cfg.<a class="code" href="structspi__cfg.html#a2613a037b4632a6d74e89aeb62d12344">sclk_phase</a>) ) mode = 3;</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;        printf( <span class="stringliteral">&quot;SPI MODE: %d\n&quot;</span>, mode );</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    }</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;    { <span class="comment">/* write */</span></div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;        mode = (int) strtol( argv[0], NULL, 0 );</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;        <span class="keywordflow">switch</span> ( mode )</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;        {</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;            <span class="keywordflow">case</span> 0: cfg.<a class="code" href="structspi__cfg.html#a08a45f7aec9d8b6e59e91a56dc889384">sclk_polarity</a> = <span class="keyword">false</span>;  cfg.<a class="code" href="structspi__cfg.html#a2613a037b4632a6d74e89aeb62d12344">sclk_phase</a> = <span class="keyword">false</span>;     <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;            <span class="keywordflow">case</span> 1: cfg.<a class="code" href="structspi__cfg.html#a08a45f7aec9d8b6e59e91a56dc889384">sclk_polarity</a> = <span class="keyword">false</span>;  cfg.<a class="code" href="structspi__cfg.html#a2613a037b4632a6d74e89aeb62d12344">sclk_phase</a> = <span class="keyword">true</span>;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;            <span class="keywordflow">case</span> 2: cfg.<a class="code" href="structspi__cfg.html#a08a45f7aec9d8b6e59e91a56dc889384">sclk_polarity</a> = <span class="keyword">true</span>;   cfg.<a class="code" href="structspi__cfg.html#a2613a037b4632a6d74e89aeb62d12344">sclk_phase</a> = <span class="keyword">false</span>;     <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;            <span class="keywordflow">case</span> 3: cfg.<a class="code" href="structspi__cfg.html#a08a45f7aec9d8b6e59e91a56dc889384">sclk_polarity</a> = <span class="keyword">true</span>;   cfg.<a class="code" href="structspi__cfg.html#a2613a037b4632a6d74e89aeb62d12344">sclk_phase</a> = <span class="keyword">true</span>;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;        }</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;        <span class="comment">/* commit configuration to hardware */</span></div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;        error_code = <a class="code" href="idi_8c.html#a5817326fd7bd59487a4fefc89ecbc4d3">SPI_Configuration_Set</a>( &amp;cfg );</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;        <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;        printf( <span class="stringliteral">&quot;OK\n&quot;</span> );</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;    }</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;}</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02627"></a><span class="lineno"><a class="line" href="idi_8c.html#a0d601686f8bd8cf38104226abd0ae0e5"> 2627</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a0d601686f8bd8cf38104226abd0ae0e5">IDI_CMD__SPI_Config_SDI_Polarity</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;{ <span class="comment">/*  idi spi sdi [&lt;true/1/false/0&gt;] */</span></div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;    <span class="keywordtype">int</span>      error_code;</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;<span class="comment">//  BOOL     value;</span></div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;    <span class="keyword">struct   </span><a class="code" href="structspi__cfg.html">spi_cfg</a> cfg;</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;    <span class="comment">/* pull current configuration from the hardware -- allows for warm restore so to speak */</span></div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;    error_code = <a class="code" href="idi_8c.html#a59b98a79cf5c0821e12ab088d76f355f">SPI_Configuration_Get</a>( &amp;cfg );</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 )</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;    { <span class="comment">/* read */</span></div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;        printf( <span class="stringliteral">&quot;SPI SDI POLARITY: %s\n&quot;</span>, cfg.<a class="code" href="structspi__cfg.html#a010045ad60dc510daa368259399de229">sdi_polarity</a> ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span> );</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;    }</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;    { <span class="comment">/* write */</span></div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;        cfg.<a class="code" href="structspi__cfg.html#a010045ad60dc510daa368259399de229">sdi_polarity</a> = <a class="code" href="idi_8c.html#a95fbfdb665e1aa54eb081d7d5c7af6a8">String_To_Bool</a>( argv[0] );</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;        <span class="comment">/* commit configuration to hardware */</span></div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;        error_code = <a class="code" href="idi_8c.html#a5817326fd7bd59487a4fefc89ecbc4d3">SPI_Configuration_Set</a>( &amp;cfg );</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;        <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;        printf( <span class="stringliteral">&quot;OK\n&quot;</span> );</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;    }</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;}</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02657"></a><span class="lineno"><a class="line" href="idi_8c.html#a50de516119a8ca534f4aada4f825d443"> 2657</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a50de516119a8ca534f4aada4f825d443">IDI_CMD__SPI_Config_SDO_Polarity</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;{ <span class="comment">/*  idi spi sdo [&lt;true/1/false/0&gt;] */</span></div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;    <span class="keywordtype">int</span>      error_code;</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;<span class="comment">//  BOOL     value;</span></div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;    <span class="keyword">struct   </span><a class="code" href="structspi__cfg.html">spi_cfg</a> cfg;</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;    <span class="comment">/* pull current configuration from the hardware -- allows for warm restore so to speak */</span></div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;    error_code = <a class="code" href="idi_8c.html#a59b98a79cf5c0821e12ab088d76f355f">SPI_Configuration_Get</a>( &amp;cfg );</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 )</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    { <span class="comment">/* read */</span></div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;        printf( <span class="stringliteral">&quot;SPI SDO POLARITY: %s\n&quot;</span>, cfg.<a class="code" href="structspi__cfg.html#abbceffb19dd814b30b890c4c3710a229">sdo_polarity</a> ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span> );</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;    }</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;    { <span class="comment">/* write */</span></div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;        cfg.<a class="code" href="structspi__cfg.html#abbceffb19dd814b30b890c4c3710a229">sdo_polarity</a> = <a class="code" href="idi_8c.html#a95fbfdb665e1aa54eb081d7d5c7af6a8">String_To_Bool</a>( argv[0] );</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;        <span class="comment">/* commit configuration to hardware */</span></div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;        error_code = <a class="code" href="idi_8c.html#a5817326fd7bd59487a4fefc89ecbc4d3">SPI_Configuration_Set</a>( &amp;cfg );</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;        <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;        printf( <span class="stringliteral">&quot;OK\n&quot;</span> );</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;    }</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;}</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02687"></a><span class="lineno"><a class="line" href="idi_8c.html#ac3529e3914f0c1f8e335a3843bed9744"> 2687</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#ac3529e3914f0c1f8e335a3843bed9744">IDI_CMD__SPI_Config_SDIO_Wrap</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;{ <span class="comment">/*  idi spi wrap [&lt;true/1/false/0&gt;] */</span></div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;    <span class="keywordtype">int</span>      error_code;</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;<span class="comment">//  BOOL     value;</span></div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;    <span class="keyword">struct   </span><a class="code" href="structspi__cfg.html">spi_cfg</a> cfg;</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    <span class="comment">/* pull current configuration from the hardware -- allows for warm restore so to speak */</span></div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;    error_code = <a class="code" href="idi_8c.html#a59b98a79cf5c0821e12ab088d76f355f">SPI_Configuration_Get</a>( &amp;cfg );</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 )</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;    { <span class="comment">/* read */</span></div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;        printf( <span class="stringliteral">&quot;SPI wrap: %s\n&quot;</span>, cfg.<a class="code" href="structspi__cfg.html#a7cd0897d273b604ea90aaf525ca5d318">sdio_wrap</a> ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span> );</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;    }</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;    { <span class="comment">/* write */</span></div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;        cfg.<a class="code" href="structspi__cfg.html#a7cd0897d273b604ea90aaf525ca5d318">sdio_wrap</a> = <a class="code" href="idi_8c.html#a95fbfdb665e1aa54eb081d7d5c7af6a8">String_To_Bool</a>( argv[0] );</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;        <span class="comment">/* commit configuration to hardware */</span></div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;        error_code = <a class="code" href="idi_8c.html#a5817326fd7bd59487a4fefc89ecbc4d3">SPI_Configuration_Set</a>( &amp;cfg );</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;        <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;        printf( <span class="stringliteral">&quot;OK\n&quot;</span> );</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;    }</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;}</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02717"></a><span class="lineno"><a class="line" href="idi_8c.html#ae8a4c4d867aba3d602dc4e74226b7587"> 2717</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#ae8a4c4d867aba3d602dc4e74226b7587">IDI_CMD__SPI_Config_Chip_Select_Behavior</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;{ <span class="comment">/*  idi spi mode [0/1/2/3/software/buffer/uint8/uint16] */</span></div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;    <span class="keywordtype">int</span>      error_code;</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;<span class="comment">//  int      csb;</span></div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;    <span class="keyword">struct   </span><a class="code" href="structspi__cfg.html">spi_cfg</a> cfg;</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    <span class="comment">/* pull current configuration from the hardware -- allows for warm restore so to speak */</span></div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    error_code = <a class="code" href="idi_8c.html#a59b98a79cf5c0821e12ab088d76f355f">SPI_Configuration_Get</a>( &amp;cfg );</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 )</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;    { <span class="comment">/* read */</span></div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;        printf( <span class="stringliteral">&quot;SPI CSB: &quot;</span>);</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;        <span class="keywordflow">switch</span> ( cfg.<a class="code" href="structspi__cfg.html#aede15f437dcd3a33a5605c71b3bf3801">chip_select_behavior</a> )</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;        {</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101da473588067cbc33d34ebe1f6815dcdd4f">IDI_CSB_SOFTWARE</a>:  printf( <span class="stringliteral">&quot;software&quot;</span> );   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101dab45e8afa970f342353f60ca217b37253">IDI_CSB_BUFFER</a>:    printf( <span class="stringliteral">&quot;buffer&quot;</span>   );   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101da72c215ca12871c8b04f9a1324f80cb2e">IDI_CSB_UINT8</a>:     printf( <span class="stringliteral">&quot;uint8&quot;</span>    );   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101dac825304c7d28288091e65b0e0bfeb440">IDI_CSB_UINT16</a>:    printf( <span class="stringliteral">&quot;uint16&quot;</span>   );   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;            <span class="keywordflow">default</span>:                printf( <span class="stringliteral">&quot;undefined&quot;</span>);   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;        }</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;        printf( <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;    }</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;    { <span class="comment">/* write */</span></div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;        <span class="keywordflow">if</span>      ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;software&quot;</span>, argv[0] ) ) cfg.<a class="code" href="structspi__cfg.html#aede15f437dcd3a33a5605c71b3bf3801">chip_select_behavior</a> = 0;</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;buffer&quot;</span>,   argv[0] ) ) cfg.<a class="code" href="structspi__cfg.html#aede15f437dcd3a33a5605c71b3bf3801">chip_select_behavior</a> = 1;</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;uint8&quot;</span>,    argv[0] ) ) cfg.<a class="code" href="structspi__cfg.html#aede15f437dcd3a33a5605c71b3bf3801">chip_select_behavior</a> = 2;</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;uint16&quot;</span>,   argv[0] ) ) cfg.<a class="code" href="structspi__cfg.html#aede15f437dcd3a33a5605c71b3bf3801">chip_select_behavior</a> = 3;</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;        {</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;            cfg.<a class="code" href="structspi__cfg.html#aede15f437dcd3a33a5605c71b3bf3801">chip_select_behavior</a> = (<a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101d">SPI_CSB_ENUM</a>) strtol( argv[0], NULL, 0 );</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;            <span class="keywordflow">switch</span> ( cfg.<a class="code" href="structspi__cfg.html#aede15f437dcd3a33a5605c71b3bf3801">chip_select_behavior</a> )</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;            {</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101da473588067cbc33d34ebe1f6815dcdd4f">IDI_CSB_SOFTWARE</a>:</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101dab45e8afa970f342353f60ca217b37253">IDI_CSB_BUFFER</a>:</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101da72c215ca12871c8b04f9a1324f80cb2e">IDI_CSB_UINT8</a>:</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="idi_8c.html#a4715fd103e903bf93238963a9623101dac825304c7d28288091e65b0e0bfeb440">IDI_CSB_UINT16</a>:</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;                    error_code = -EC_SPI_CSB_OUT_OF_RANGE;</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;            }</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;        }</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;         <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;        <span class="comment">/* commit configuration to hardware */</span></div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;        error_code = <a class="code" href="idi_8c.html#a5817326fd7bd59487a4fefc89ecbc4d3">SPI_Configuration_Set</a>( &amp;cfg );</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;        <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;        printf( <span class="stringliteral">&quot;OK\n&quot;</span> );</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;    }</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;}</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02775"></a><span class="lineno"><a class="line" href="idi_8c.html#a87f0e514a60de8610820fd7a83703e1c"> 2775</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a87f0e514a60de8610820fd7a83703e1c">IDI_CMD__SPI_Status</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;{ <span class="comment">/*  idi spi status [rx] [tx] ...  */</span></div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;    <span class="keywordtype">int</span>                 error_code;</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;    <span class="keywordtype">int</span>                 index;</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;    <span class="keyword">struct </span><a class="code" href="structspi__status.html">spi_status</a>   status;</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 )</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;    {</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;        error_code = <a class="code" href="idi_8c.html#a0d405a6006a6ef14c53c330e618bc1df">SPI_Status_Read</a>( &amp;status );</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;        <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;        <a class="code" href="idi_8c.html#af783ed809568388ad1d1e0b990458811">SPI_Report_Status_Text</a>( &amp;status, stdout );</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;    }</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;    {</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;        <span class="keywordflow">for</span> ( index = 0; index &lt; argc; index++ )</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;        {</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;            <span class="keywordflow">if</span> ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;rx&quot;</span>, argv[index] ) )</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;            {</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;                error_code = <a class="code" href="idi_8c.html#a0d405a6006a6ef14c53c330e618bc1df">SPI_Status_Read</a>( &amp;status );</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;                <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;                <a class="code" href="idi_8c.html#af783ed809568388ad1d1e0b990458811">SPI_Report_Status_Text</a>( &amp;status, stdout );</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;            }</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;tx&quot;</span>, argv[index] ) )</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;            {</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;                error_code = <a class="code" href="idi_8c.html#a26d9db16a301c85b1fc35dbb1bba9997">SPI_Status_Write</a>( &amp;status );</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;                <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;                <a class="code" href="idi_8c.html#af783ed809568388ad1d1e0b990458811">SPI_Report_Status_Text</a>( &amp;status, stdout );</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;            }</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;        }</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;    }</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;}</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02813"></a><span class="lineno"><a class="line" href="idi_8c.html#aeca81fe3de2af7764b438c3914b01b18"> 2813</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#aeca81fe3de2af7764b438c3914b01b18">IDI_CMD__SPI_Data</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;{ <span class="comment">/*  idi spi data [byte] [character] ... */</span></div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;    <span class="keywordtype">int</span>                 error_code;</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;    <span class="keywordtype">size_t</span>              index;</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;    <span class="keywordtype">size_t</span>              count;</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;    <span class="keywordtype">size_t</span>              transfer_count; <span class="comment">/* */</span></div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;    <span class="keywordtype">size_t</span>              lines;</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    uint8_t *           bp;             <span class="comment">/* buffer pointer */</span></div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;    uint8_t             tx_buffer[<a class="code" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a>];</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;    uint8_t             rx_buffer[<a class="code" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a>];</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 ) <span class="keywordflow">return</span> -EC_PARAMETER;</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;    index = 1;</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;    transfer_count = argc - 1;</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;    <span class="keywordflow">if</span> ( transfer_count &gt; <a class="code" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a> )</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;    {</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;        transfer_count = <a class="code" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a>;</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;        printf( <span class="stringliteral">&quot;Warning: ignored %d values\n&quot;</span>, argc - 1 - <a class="code" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a> );</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;    }</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;    count = transfer_count;</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;    <span class="keywordflow">while</span> ( count != 0 )</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;    {</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;        tx_buffer[index-1] = (uint8_t) strtol( argv[index], NULL, 0 );</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;        count--; index++;</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;    }</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;    error_code = <a class="code" href="idi_8c.html#aef976bb6ba5348e01e604c1165de7842">SPI_Data_Write_Read</a>( <span class="keyword">sizeof</span>( uint8_t ), transfer_count, tx_buffer, transfer_count, rx_buffer );</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;    lines = transfer_count / <a class="code" href="idi_8c.html#abc6126af1d45847bc59afa0aa3216b04a61beeb8caa7eef5ea8ccec0c05cd142e">HEX_DUMP_BYTES_PER_LINE</a>;</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;    <span class="keywordflow">if</span> ( 0 == ( transfer_count - lines * <a class="code" href="idi_8c.html#abc6126af1d45847bc59afa0aa3216b04a61beeb8caa7eef5ea8ccec0c05cd142e">HEX_DUMP_BYTES_PER_LINE</a> ) ) lines = lines - 1;</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;    <span class="keywordflow">for</span> ( index = 0; index &lt;= lines; index++ )</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;    {</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;        bp = &amp;(rx_buffer[index * <a class="code" href="idi_8c.html#abc6126af1d45847bc59afa0aa3216b04a61beeb8caa7eef5ea8ccec0c05cd142e">HEX_DUMP_BYTES_PER_LINE</a>]);</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;        <span class="keywordflow">if</span> ( transfer_count &lt; HEX_DUMP_BYTES_PER_LINE )</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;        {</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;            <a class="code" href="idi_8c.html#afe81fee380d83ce9efc1bca190b7d2ba">Hex_Dump_Line</a>( 0, transfer_count, bp, stdout );</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;        }</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;        {</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;            <a class="code" href="idi_8c.html#afe81fee380d83ce9efc1bca190b7d2ba">Hex_Dump_Line</a>( 0, HEX_DUMP_BYTES_PER_LINE, bp, stdout );</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;        }</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;    }</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;}</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02865"></a><span class="lineno"><a class="line" href="idi_8c.html#a5c3569de8003fff3301140897d842d79"> 2865</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a5c3569de8003fff3301140897d842d79">IDI_CMD__SPI_FIFO</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;{ <span class="comment">/*  idi spi data [byte] [character] ... */</span></div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;    <span class="keywordtype">int</span>                 error_code;</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;    <span class="keywordtype">int</span>                 index;</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;    <span class="keywordtype">int</span>                 count;</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;    <span class="keywordtype">int</span>                 read_count; <span class="comment">/* */</span></div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;    uint8_t             data_temp;</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;    uint8_t             tx_buffer[<a class="code" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a>];</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;    uint8_t             rx_buffer[<a class="code" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a>];</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;    read_count = 0;</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 )</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;    {</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;        read_count = <a class="code" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a>;</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;    }</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;    {</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;        <span class="keywordflow">if</span>      ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;rx&quot;</span>, argv[0] ) )</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;        {</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;            <span class="keywordflow">if</span> ( argc &gt; 1)</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;            {</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;                <span class="keywordflow">if</span> ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;all&quot;</span>, argv[1] ) ) read_count = <a class="code" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a>;</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;                <span class="keywordflow">else</span> read_count = (int) strtol( argv[1], NULL, 0 );</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;            }</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;        }</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;tx&quot;</span>, argv[0] ) )</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;        {</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;            <span class="keywordtype">char</span> * endptr;</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;            index = 1;</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;            count = argc - 1;</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;            <span class="keywordflow">if</span> ( count &gt; <a class="code" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a> )</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;            {</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;                count = <a class="code" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a>;</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;                printf( <span class="stringliteral">&quot;Warning: ignored %d values\n&quot;</span>, argc - 1 - <a class="code" href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a> );</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;            }</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;            <span class="keywordflow">while</span> ( count &gt; 0 )</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;            {</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;                data_temp = (uint8_t) strtol( argv[index], &amp;endptr, 0 );</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;                <span class="keywordflow">if</span> ( endptr == argv[index] ) data_temp = (uint8_t) argv[index][0];</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;                tx_buffer[index-1] = data_temp;</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;                count--; index++;</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;            }</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;            error_code = <a class="code" href="idi_8c.html#a674bbccb1f788936c394607cd75c59f7">SPI_FIFO_Write</a>( (<span class="keywordtype">void</span> *) tx_buffer, <span class="keyword">sizeof</span>( uint8_t ), count, NULL );</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;            <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;            printf( <span class="stringliteral">&quot;OK\n&quot;</span> );</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;            <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;        }</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;commit&quot;</span>, argv[0] ) )</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;        {</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;            <span class="keywordflow">if</span> ( argc &gt; 2 )</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;            {</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;                <span class="keywordflow">if</span> ( <a class="code" href="idi_8c.html#a95fbfdb665e1aa54eb081d7d5c7af6a8">String_To_Bool</a>( argv[1] ) ) <a class="code" href="idi_8c.html#afa3ba21357311aece5c1f86706a36338">SPI_Commit</a>( 0xFF );</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;                <span class="keywordflow">else</span>                             <a class="code" href="idi_8c.html#afa3ba21357311aece5c1f86706a36338">SPI_Commit</a>( 0x00 );</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;                printf( <span class="stringliteral">&quot;OK\n&quot;</span> );</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;                error_code = SUCCESS;</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;            }</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;            {</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;<span class="comment">//TODO: add ability to read-back the chip select under certain conditions.</span></div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;                error_code = -EC_PARAMETER_MISSING;</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;            }</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;            <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;        }</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;    }</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;    <span class="comment">/* wait for transmit data to empty out */</span></div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;    <span class="keywordflow">while</span> ( <a class="code" href="idi_8c.html#a8ed95935ad595c4e5dde98ffa26a4689">SPI_Status_Write_FIFO_Is_Not_Empty</a>() ) { <span class="comment">/* do nothing */</span> }</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;    <span class="keywordflow">if</span> ( read_count &gt; 0 )</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;    {</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;        <span class="keywordtype">int</span>       lines;</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;        uint8_t * bp; <span class="comment">/* buffer pointer */</span></div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="idi_8c.html#a9f8f3754c67705b230c1f04d390a5900">SPI_Status_Read_FIFO_Is_Not_Empty</a>() )</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;        {</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;            error_code = <a class="code" href="idi_8c.html#acc51bf8337741aa0f73036c6707efc84">SPI_FIFO_Read</a>( (<span class="keywordtype">void</span> *) rx_buffer, <span class="keyword">sizeof</span>( uint8_t ), read_count, NULL );</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;            <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;            lines = read_count / <a class="code" href="idi_8c.html#abc6126af1d45847bc59afa0aa3216b04a61beeb8caa7eef5ea8ccec0c05cd142e">HEX_DUMP_BYTES_PER_LINE</a>;</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;            <span class="keywordflow">if</span> ( 0 == ( read_count - lines * <a class="code" href="idi_8c.html#abc6126af1d45847bc59afa0aa3216b04a61beeb8caa7eef5ea8ccec0c05cd142e">HEX_DUMP_BYTES_PER_LINE</a> ) ) lines = lines - 1;</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;            <span class="keywordflow">for</span> ( index = 0; index &lt;= lines; index++ )</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;            {</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;                bp = &amp;(rx_buffer[index * <a class="code" href="idi_8c.html#abc6126af1d45847bc59afa0aa3216b04a61beeb8caa7eef5ea8ccec0c05cd142e">HEX_DUMP_BYTES_PER_LINE</a>]);</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;                <span class="keywordflow">if</span> ( read_count &lt; HEX_DUMP_BYTES_PER_LINE )</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;                {</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;                    <a class="code" href="idi_8c.html#afe81fee380d83ce9efc1bca190b7d2ba">Hex_Dump_Line</a>( 0, read_count, bp, stdout );</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;                }</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;                {</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;                    <a class="code" href="idi_8c.html#afe81fee380d83ce9efc1bca190b7d2ba">Hex_Dump_Line</a>( 0, HEX_DUMP_BYTES_PER_LINE, bp, stdout );</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;                }</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;            }</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;        }</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;        {</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;            printf( <span class="stringliteral">&quot;FIFO Empty\n&quot;</span> );</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;        }</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;    }</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;}</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02975"></a><span class="lineno"><a class="line" href="idi_8c.html#a4fa9a82ae726923baa736477d50d2589"> 2975</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a4fa9a82ae726923baa736477d50d2589">IDI_CMD__SPI_Commit</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;{ <span class="comment">/*  idi spi commit [&lt;true/1/false/0&gt;] */</span></div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;    <span class="keywordtype">int</span>      error_code;</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;    uint8_t  chip_select;</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;    <span class="keywordflow">if</span>      ( argc &lt; 1                  ) chip_select = 0x01;</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="idi_8c.html#a95fbfdb665e1aa54eb081d7d5c7af6a8">String_To_Bool</a>( argv[0] ) ) chip_select = 0x01;</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;    <span class="keywordflow">else</span>                                  chip_select = 0x00;</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;    error_code = <a class="code" href="idi_8c.html#afa3ba21357311aece5c1f86706a36338">SPI_Commit</a>( chip_select );</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;    printf( <span class="stringliteral">&quot;OK\n&quot;</span> );</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;}</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l02994"></a><span class="lineno"><a class="line" href="idi_8c.html#a152add15a07a391106c4f37efe492073"> 2994</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structcommand__line.html">command_line</a>  <a class="code" href="idi_8c.html#a152add15a07a391106c4f37efe492073">idi_cmd_spi</a>[] =</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;{</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;    {   <a class="code" href="idi_8c.html#a668e4784c156d76f27de8e047391007e">IDI_CMD__SPI_ID</a>,                            <span class="stringliteral">&quot;id&quot;</span>,       <span class="stringliteral">&quot;wishbone id: params: none&quot;</span>                             },</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;    {   <a class="code" href="idi_8c.html#af8816b167342609f62dea85684c8668b">IDI_CMD__SPI_Config_Get</a>,                    <span class="stringliteral">&quot;cfg&quot;</span>,      <span class="stringliteral">&quot;config dump: params: none&quot;</span>                             },</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;    {   <a class="code" href="idi_8c.html#a99f6186befa8e74608716454a91c44bd">IDI_CMD__SPI_Config_Clock_Hz</a>,               <span class="stringliteral">&quot;clk&quot;</span>,      <span class="stringliteral">&quot;clk:         params: [&lt;clock freq in hertz&gt;]&quot;</span>          },</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    {   <a class="code" href="idi_8c.html#a8e322fdc87a9fc7da0cebe8d074693e2">IDI_CMD__SPI_Config_End_Cycle_Delay_Sec</a>,    <span class="stringliteral">&quot;ecd&quot;</span>,      <span class="stringliteral">&quot;end delay:   params: [&lt;time in seconds&gt;]&quot;</span>              },</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;    {   <a class="code" href="idi_8c.html#a356455eaafd272310dac8a96d94b179d">IDI_CMD__SPI_Config_Mode</a>,                   <span class="stringliteral">&quot;mode&quot;</span>,     <span class="stringliteral">&quot;mode:        params: [&lt;0/1/2/3&gt;]&quot;</span>                      },</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;    {   <a class="code" href="idi_8c.html#a0d601686f8bd8cf38104226abd0ae0e5">IDI_CMD__SPI_Config_SDI_Polarity</a>,           <span class="stringliteral">&quot;sdi&quot;</span>,      <span class="stringliteral">&quot;sdi pol:     params: [&lt;true/1/false/0&gt;]&quot;</span>               },</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;    {   <a class="code" href="idi_8c.html#a50de516119a8ca534f4aada4f825d443">IDI_CMD__SPI_Config_SDO_Polarity</a>,           <span class="stringliteral">&quot;sdo&quot;</span>,      <span class="stringliteral">&quot;sdo pol:     params: [&lt;true/1/false/0&gt;]&quot;</span>               },</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;    {   <a class="code" href="idi_8c.html#ac3529e3914f0c1f8e335a3843bed9744">IDI_CMD__SPI_Config_SDIO_Wrap</a>,              <span class="stringliteral">&quot;wrap&quot;</span>,     <span class="stringliteral">&quot;sdo--&gt;sdi:   params: [&lt;true/1/false/0&gt;]&quot;</span>               },</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;    {   <a class="code" href="idi_8c.html#ae8a4c4d867aba3d602dc4e74226b7587">IDI_CMD__SPI_Config_Chip_Select_Behavior</a>,   <span class="stringliteral">&quot;csb&quot;</span>,      <span class="stringliteral">&quot;chip select behavior: params: [0/1/2/3/software/buffer/uint8/uint16]&quot;</span>  },</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;    {   <a class="code" href="idi_8c.html#a87f0e514a60de8610820fd7a83703e1c">IDI_CMD__SPI_Status</a>,                        <span class="stringliteral">&quot;status&quot;</span>,   <span class="stringliteral">&quot;status of both TX and RX buffers&quot;</span>                      },</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;    {   <a class="code" href="idi_8c.html#aeca81fe3de2af7764b438c3914b01b18">IDI_CMD__SPI_Data</a>,                          <span class="stringliteral">&quot;data&quot;</span>,     <span class="stringliteral">&quot;read/write:  params: [one or more bytes/characters]&quot;</span>   },</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;    {   <a class="code" href="idi_8c.html#a5c3569de8003fff3301140897d842d79">IDI_CMD__SPI_FIFO</a>,                          <span class="stringliteral">&quot;fifo&quot;</span>,     <span class="stringliteral">&quot;fifo r/w:    params: [one or more bytes/characters]&quot;</span>   },</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;    {   <a class="code" href="idi_8c.html#a4fa9a82ae726923baa736477d50d2589">IDI_CMD__SPI_Commit</a>,                        <span class="stringliteral">&quot;commit&quot;</span>    <span class="stringliteral">&quot;causes spi transactions to start&quot;</span>                      },</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;    {   NULL,                                   NULL,       NULL                                                    }</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;};</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03017"></a><span class="lineno"><a class="line" href="idi_8c.html#ab3d8b6fa8b84e23203bb0f2ee9b7654c"> 3017</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#ab3d8b6fa8b84e23203bb0f2ee9b7654c">IDI_Command_Line_SPI</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[] )</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;{</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;    <span class="keywordtype">int</span>         error_code;</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;    <span class="keywordtype">int</span>         index;</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;    <span class="keywordtype">int</span>         argc_new;</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;    <span class="keywordtype">char</span> **     argv_new;</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 ) <span class="keywordflow">return</span> -EC_NOT_FOUND;</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;    index = 0;</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;    <span class="keywordflow">while</span> ( NULL != idi_cmd_spi[index].<a class="code" href="structcommand__line.html#a62417f2e64cfcb563974afad3cd84c8f">cmd_fnc</a> )</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;    {</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;        <span class="keywordflow">if</span> ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( idi_cmd_spi[index].<a class="code" href="structcommand__line.html#a5ac083a645d964373f022d03df4849c8">name</a>, argv[0] )  )</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;        {</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;            argv_new = &amp;(argv[1]);</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;            argc_new = argc - 1;</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;            error_code = (* idi_cmd_spi[index].<a class="code" href="structcommand__line.html#a62417f2e64cfcb563974afad3cd84c8f">cmd_fnc</a> )( argc_new, argv_new );</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;        }</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;        index++;</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;    }</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;    <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;}</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;<span class="comment">/*    &lt; &lt; &lt; &lt;  F R A M  C O M M A N D   F U N C T I O N S  &gt; &gt; &gt; &gt;                                        */</span></div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03054"></a><span class="lineno"><a class="line" href="idi_8c.html#a1e853e6dd18470682ece747ece78f6cf"> 3054</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a1e853e6dd18470682ece747ece78f6cf">IDI_CMD__FRAM_Dump</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;{ <span class="comment">/* idi fram dump &lt;address&gt; &lt;length&gt;  */</span></div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;    uint16_t address;</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;    uint16_t length;</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 ) <span class="keywordflow">return</span> -EC_PARAMETER;</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;    address = (uint16_t) strtol( argv[0], NULL, 0 );</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 2 ) length = <a class="code" href="idi_8c.html#abc6126af1d45847bc59afa0aa3216b04a61beeb8caa7eef5ea8ccec0c05cd142e">HEX_DUMP_BYTES_PER_LINE</a>;</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;    <span class="keywordflow">else</span>            length  = (uint16_t) strtol( argv[1], NULL, 0 );</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;    <span class="keywordflow">if</span> ( ( address + length ) &gt; <a class="code" href="idi_8c.html#adc29c2ff13d900c2f185ee95427fb06cab1ed491f47f766d02b4c8d5e8de3339b">FRAM_DENSITY_BYTES</a> ) length = <a class="code" href="idi_8c.html#adc29c2ff13d900c2f185ee95427fb06cab1ed491f47f766d02b4c8d5e8de3339b">FRAM_DENSITY_BYTES</a> - address;</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="idi_8c.html#abea0d9db987eaf2b5f6a6696bbed5993">FRAM_Report</a>( address, length, stdout );</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;}</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03076"></a><span class="lineno"><a class="line" href="idi_8c.html#a11970f9c47b6ab73a9b61c5fddc97ffc"> 3076</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a11970f9c47b6ab73a9b61c5fddc97ffc">IDI_CMD__FRAM_Save</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;{ <span class="comment">/* idi fram save &lt;address&gt; &lt;length&gt; &lt;destination_file&gt; */</span></div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;    <span class="keywordtype">int</span>         error_code;</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;    uint16_t    address;</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;    <span class="keywordtype">size_t</span>      length;</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;    FILE *      out;</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 3 ) <span class="keywordflow">return</span> -EC_PARAMETER;</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;    address = (uint16_t) strtol( argv[0], NULL, 0 );</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;    length  = (uint16_t) strtol( argv[1], NULL, 0 );</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;    out = fopen( argv[2], <span class="stringliteral">&quot;w&quot;</span> );</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;    error_code = <a class="code" href="idi_8c.html#ae0b87251c6439330b9287fc12cc306dd">FRAM_Memory_To_File</a>( address, length, out );</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;    fclose( out );</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;    <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;}</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03098"></a><span class="lineno"><a class="line" href="idi_8c.html#ad08156aad04f93c2cd826c90b9b91566"> 3098</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#ad08156aad04f93c2cd826c90b9b91566">IDI_CMD__FRAM_Load</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;{ <span class="comment">/* idi fram load &lt;address&gt; &lt;source_file&gt; */</span></div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;    <span class="keywordtype">int</span>         error_code;</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;    uint16_t    address;</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;<span class="comment">//  uint16_t    length;</span></div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;    FILE *      out;</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 2 ) <span class="keywordflow">return</span> -EC_PARAMETER;</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;    address = (uint16_t) strtol( argv[0], NULL, 0 );</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;    out = fopen( argv[2], <span class="stringliteral">&quot;r&quot;</span> );</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;    error_code = <a class="code" href="idi_8c.html#acfdd9db9e4fd5406b6024cf5ac492b95">FRAM_File_To_Memory</a>( address, 0 <span class="comment">/* no length specified */</span>, out );</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;    fclose( out );</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;    <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;}</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03119"></a><span class="lineno"><a class="line" href="idi_8c.html#a148e18c77ccddbcf64525e077490f25a"> 3119</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a148e18c77ccddbcf64525e077490f25a">IDI_CMD__FRAM_Init</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;{ <span class="comment">/*  idi fram init &lt;pattern list: 0x55 0x33 &#39;3&#39; &#39;5&#39; &#39;q&#39; &gt;  */</span></div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;    <span class="keywordtype">int</span>         error_code;</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;    <span class="keywordtype">int</span>         index;</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;    uint8_t     buf[16];</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 )</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;    { <span class="comment">/* initialize all zeros */</span></div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;        error_code = <a class="code" href="idi_8c.html#a9486d70eec81c27defc04c1e0ebbcf71">FRAM_Set</a>( 0, NULL );</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;    }</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;    {</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;        <span class="keywordflow">if</span> ( argc &gt; 16 ) argc = 16;</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;        <span class="keywordflow">for</span> ( index = 0; index &lt; argc; index++ )</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;        {</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;            buf[index] = (uint8_t) strtol( argv[index], NULL, 0 );</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;        }</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;        error_code = <a class="code" href="idi_8c.html#a9486d70eec81c27defc04c1e0ebbcf71">FRAM_Set</a>( argc, buf );</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;    }</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;    <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;}</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03145"></a><span class="lineno"><a class="line" href="idi_8c.html#aa1120a9ab4e78d6c65dc4fd2a5445d2f"> 3145</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#aa1120a9ab4e78d6c65dc4fd2a5445d2f">IDI_CMD__FRAM_WREN</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;{ <span class="comment">/* idi fram WREN */</span></div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;    (void)      argc;</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;    (void)      argv;</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="idi_8c.html#a478c7200a60ec93c9195e44fc2b294f7">FRAM__Write_Enable_Latch_Set</a>();</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;}</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03157"></a><span class="lineno"><a class="line" href="idi_8c.html#aa2f4bfa13ac3db30467e75cd0f287e26"> 3157</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#aa2f4bfa13ac3db30467e75cd0f287e26">IDI_CMD__FRAM_WRDI</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;{ <span class="comment">/*  idi fram WRDI  */</span></div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;    (void)      argc;</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;    (void)      argv;</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="idi_8c.html#a82f93449bb944b1e52db87e360bb620c">FRAM__Write_Disable</a>();</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;}</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03169"></a><span class="lineno"><a class="line" href="idi_8c.html#a550c9fd5faeabbeb5e6b0ae9e6b2557a"> 3169</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a550c9fd5faeabbeb5e6b0ae9e6b2557a">IDI_CMD__FRAM_RDSR</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;{ <span class="comment">/* idi fram RDSR  */</span></div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;    <span class="keywordtype">int</span>         error_code;</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;    uint8_t     status;</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;    (void)      argc;</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;    (void)      argv;</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    error_code = <a class="code" href="idi_8c.html#ae5af3fdd5b69319183d08077dbf622f4">FRAM__Read_Status_Register</a>( &amp;status );</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;    printf( <span class="stringliteral">&quot;FRAM STATUS: 0x%02X\n&quot;</span>, ((<span class="keywordtype">int</span>) status) );</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;    <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;}</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03185"></a><span class="lineno"><a class="line" href="idi_8c.html#ad7a5bbb7485eb1a88ee66ff36d7c3d61"> 3185</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#ad7a5bbb7485eb1a88ee66ff36d7c3d61">IDI_CMD__FRAM_WRSR</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;{ <span class="comment">/*  idi fram WRSR &lt;value&gt;  */</span></div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;<span class="comment">//  int     error_code;</span></div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;    uint8_t status;</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 ) <span class="keywordflow">return</span> -EC_PARAMETER;</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;    status = (uint8_t) strtol( argv[0], NULL, 0 );</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="idi_8c.html#a9a0f7ac60fdc2ff32c1cf9cfb7bfdad3">FRAM__Write_Status_Register</a>( status );</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;}</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03200"></a><span class="lineno"><a class="line" href="idi_8c.html#aa0454405958e720573dfa6a8641f074e"> 3200</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#aa0454405958e720573dfa6a8641f074e">IDI_CMD__FRAM_RDID</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;{ <span class="comment">/*  idi fram RDID  */</span></div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;    uint32_t    id;</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;    (void)      argc;</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;    (void)      argv;</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;    <a class="code" href="idi_8c.html#a7e74342366750cf212bced8dcccb433d">FRAM__Read_ID</a>( &amp;<span class="keywordtype">id</span> );</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;    printf( <span class="stringliteral">&quot;FRAM ID: 0x%08X\n&quot;</span>, <span class="keywordtype">id</span> );</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;}</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03213"></a><span class="lineno"><a class="line" href="idi_8c.html#a9a96a5eb6fa78887e8b52982f2e33cc2"> 3213</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structcommand__line.html">command_line</a>  <a class="code" href="idi_8c.html#a9a96a5eb6fa78887e8b52982f2e33cc2">idi_cmd_fram</a>[] =</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;{</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;    {   <a class="code" href="idi_8c.html#a1e853e6dd18470682ece747ece78f6cf">IDI_CMD__FRAM_Dump</a>,     <span class="stringliteral">&quot;dump&quot;</span>,     <span class="stringliteral">&quot;params: &lt;address&gt; &lt;length&gt;&quot;</span>                            },</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;    {   <a class="code" href="idi_8c.html#a11970f9c47b6ab73a9b61c5fddc97ffc">IDI_CMD__FRAM_Save</a>,     <span class="stringliteral">&quot;save&quot;</span>      <span class="stringliteral">&quot;params: &lt;address&gt; &lt;length&gt; &lt;binary destination file&gt;&quot;</span>  },</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;    {   <a class="code" href="idi_8c.html#ad08156aad04f93c2cd826c90b9b91566">IDI_CMD__FRAM_Load</a>,     <span class="stringliteral">&quot;load&quot;</span>      <span class="stringliteral">&quot;params: &lt;address&gt; &lt;binary source file name&quot;</span>            },</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;    {   <a class="code" href="idi_8c.html#a148e18c77ccddbcf64525e077490f25a">IDI_CMD__FRAM_Init</a>,     <span class="stringliteral">&quot;init&quot;</span>      <span class="stringliteral">&quot;params: [byte/character] [byte/character] ...&quot;</span>         },</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;    {   <a class="code" href="idi_8c.html#aa1120a9ab4e78d6c65dc4fd2a5445d2f">IDI_CMD__FRAM_WREN</a>,     <span class="stringliteral">&quot;wren&quot;</span>      <span class="stringliteral">&quot;WRite Enable Latch Set&quot;</span>                                },</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;    {   <a class="code" href="idi_8c.html#aa2f4bfa13ac3db30467e75cd0f287e26">IDI_CMD__FRAM_WRDI</a>,     <span class="stringliteral">&quot;wrdi&quot;</span>      <span class="stringliteral">&quot;WRite DIsable&quot;</span>                                         },</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;    {   <a class="code" href="idi_8c.html#a550c9fd5faeabbeb5e6b0ae9e6b2557a">IDI_CMD__FRAM_RDSR</a>,     <span class="stringliteral">&quot;rdsr&quot;</span>      <span class="stringliteral">&quot;ReaD Status Register&quot;</span>                                  },</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;    {   <a class="code" href="idi_8c.html#ad7a5bbb7485eb1a88ee66ff36d7c3d61">IDI_CMD__FRAM_WRSR</a>,     <span class="stringliteral">&quot;wrsr&quot;</span>      <span class="stringliteral">&quot;WRite Status Register.  Params: &lt;status&gt;&quot;</span>              },</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;    {   <a class="code" href="idi_8c.html#aa0454405958e720573dfa6a8641f074e">IDI_CMD__FRAM_RDID</a>,     <span class="stringliteral">&quot;rdid&quot;</span>      <span class="stringliteral">&quot;ReaD ID Register&quot;</span>                                      },</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;    {   NULL,                   NULL,       NULL                                                    },</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;};</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03232"></a><span class="lineno"><a class="line" href="idi_8c.html#aaefc0ba72d5e1d1a732a55dd7b52c4e1"> 3232</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#aaefc0ba72d5e1d1a732a55dd7b52c4e1">IDI_Command_Line_FRAM</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[] )</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;{</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;    <span class="keywordtype">int</span>         error_code;</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;    <span class="keywordtype">int</span>         index;</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;    <span class="keywordtype">int</span>         argc_new;</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;    <span class="keywordtype">char</span> **     argv_new;</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 ) <span class="keywordflow">return</span> -EC_NOT_FOUND;</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;    index = 0;</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;    <span class="keywordflow">while</span> ( NULL != idi_cmd_fram[index].<a class="code" href="structcommand__line.html#a62417f2e64cfcb563974afad3cd84c8f">cmd_fnc</a> )</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;    {</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;        <span class="keywordflow">if</span> ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( idi_cmd_fram[index].<a class="code" href="structcommand__line.html#a5ac083a645d964373f022d03df4849c8">name</a>, argv[0] )  )</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;        {</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;            argv_new = &amp;(argv[1]);</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;            argc_new = argc - 1;</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;            error_code = (* idi_cmd_fram[index].<a class="code" href="structcommand__line.html#a62417f2e64cfcb563974afad3cd84c8f">cmd_fnc</a> )( argc_new, argv_new );</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;        }</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;        index++;</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;    }</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;    <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;}</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;<span class="comment">/*    &lt; &lt; &lt; &lt;  D I G I T A L  I N P U T   C O M M A N D   F U N C T I O N S  &gt; &gt; &gt; &gt;                      */</span></div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03269"></a><span class="lineno"><a class="line" href="idi_8c.html#a606ff80c6af794676d2609d022254961"> 3269</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a606ff80c6af794676d2609d022254961">IDI_CMD__DIN_ID</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;{ <span class="comment">/*  idi spi id */</span></div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;    uint16_t    id;</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;    (void)      argc;</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;    (void)      argv;</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;    <a class="code" href="idi_8c.html#add0101e04ad7058fb979ef395febe68e">IDI_DIN_ID_Get</a>( &amp;<span class="keywordtype">id</span> );</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;    printf( <span class="stringliteral">&quot;DIN ID: 0x%04X\n&quot;</span>, <span class="keywordtype">id</span> );</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;}</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03284"></a><span class="lineno"><a class="line" href="idi_8c.html#ad59aa9edce531ded7d34e236216d0c3c"> 3284</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#ad59aa9edce531ded7d34e236216d0c3c">IDI_CMD__DIN_All</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;{ <span class="comment">/* idi din all [&lt;binary/hex/group&gt;]  */</span></div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;    <span class="keywordtype">int</span>     error_code;            <span class="comment">/* used primarily for debug purposes */</span></div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;    <span class="keywordtype">int</span>     channel;</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;    <span class="comment">//BOOL  value;</span></div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;    <span class="keywordtype">int</span>     cp;</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;    <span class="keyword">enum</span> { MODE_NONE = 0, MODE_BINARY = 1, MODE_HEX = 2, MODE_ALL = 3 } mode_out;</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;    <span class="keywordtype">int</span>     group;</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;    <span class="keywordtype">char</span>    message[64];</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;    uint8_t din_grp[6];</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;    uint8_t mask;</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;    (void)  argc;</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;    (void)  argv;</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;    mode_out = MODE_ALL;</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;    <span class="keywordflow">if</span> ( argc &gt; 0 )</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;    {</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;        <span class="keywordtype">int</span> index;</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;        mode_out = MODE_NONE;</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;        <span class="keywordflow">for</span> ( index = 0; index &lt; argc; index++ )</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;        {</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;            <span class="keywordflow">if</span>      ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;binary&quot;</span>, argv[index] ) ) mode_out |= MODE_BINARY;</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;group&quot;</span>,  argv[index] ) ) mode_out |= MODE_HEX;</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;hex&quot;</span>,    argv[index] ) ) mode_out |= MODE_HEX;</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;            <span class="keywordflow">else</span>                                              mode_out |= MODE_ALL;</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;        }</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;    }</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;    <span class="comment">/* build in binary format */</span></div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;    cp    = 0;</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;    group = 0;</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;    <span class="keywordflow">for</span> ( group = 0; group &lt; <a class="code" href="idi_8c.html#a49429b2baa0cec368650dc945b1f77c7">IDI_DIN_GROUP_QTY</a>; group++ )</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;    {</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;        error_code = <a class="code" href="idi_8c.html#ad96039e3c434110fc30781b9e82f735f">IDI_DIN_Group_Get</a>( group, &amp;(din_grp[group]) );</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;        mask = 0x01;</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;        <span class="keywordflow">for</span> ( channel = 0; channel &lt; 8; channel++ )</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;        {</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;            message[cp++] = !!(din_grp[group] &amp; mask) ? <span class="charliteral">&#39;1&#39;</span> : <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;            mask = mask &lt;&lt; 1;</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;        }</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;        message[cp++] = <span class="charliteral">&#39; &#39;</span>;</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;    }</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;    message[cp] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;    <span class="keywordflow">if</span> ( MODE_BINARY == ( mode_out &amp; MODE_BINARY ) )</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;    {</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;        printf( <span class="stringliteral">&quot;DIN: %s\n&quot;</span>, message );</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;    }</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;    <span class="keywordflow">if</span> ( MODE_HEX == ( mode_out &amp; MODE_HEX ) )</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;    {</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;        printf( <span class="stringliteral">&quot;DIN:&quot;</span> );</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;        <span class="keywordflow">for</span> ( group = 0; group &lt; <a class="code" href="idi_8c.html#a49429b2baa0cec368650dc945b1f77c7">IDI_DIN_GROUP_QTY</a>; group++ ) printf( <span class="stringliteral">&quot; %02X&quot;</span>, din_grp[group] );</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;        printf( <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;    }</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;}</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03345"></a><span class="lineno"><a class="line" href="idi_8c.html#ac7fce67a17e18f47f5e72ca1c8820647"> 3345</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#ac7fce67a17e18f47f5e72ca1c8820647">IDI_CMD__DIN_Channel</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;{</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;    <span class="keywordtype">int</span>     error_code;            <span class="comment">/* used primarily for debug purposes */</span></div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;    <span class="keywordtype">int</span>     channel;</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;    <span class="keywordtype">char</span>    message[8];</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>    value;</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 ) <span class="keywordflow">return</span> -EC_NOT_FOUND;</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;    channel = (int) strtol( argv[0], NULL, 0 );</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;    error_code = <a class="code" href="idi_8c.html#abbe4aec5ed66dae530dd2a8c8c6c1c92">IDI_DIN_Channel_Get</a>( channel, &amp;value );</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;    message[0] = value ? <span class="charliteral">&#39;1&#39;</span> : <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;    message[1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;    printf( <span class="stringliteral">&quot;DIN%02d: %s\n&quot;</span>, channel, message );</div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;}</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03368"></a><span class="lineno"><a class="line" href="idi_8c.html#ac49acbd90fd55e5b6bfa1b9306c25efd"> 3368</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#ac49acbd90fd55e5b6bfa1b9306c25efd">IDI_CMD__DIN_Group</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;{</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;    <span class="keywordtype">int</span>     error_code;</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;<span class="comment">//  int     index;</span></div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;    <span class="keywordtype">int</span>     group;</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;    <span class="keywordtype">int</span>     group_count;</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;    <a class="code" href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>    do_all;</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;    uint8_t din_grp[6];</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 ) do_all = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;    <span class="keywordflow">else</span>            do_all = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;    <span class="keywordflow">if</span> ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;all&quot;</span>, argv[0] ) ) do_all = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;    <span class="keywordflow">if</span> ( do_all )</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;    { <span class="comment">/* all */</span></div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;        <span class="keywordflow">for</span> ( group = 0; group &lt; <a class="code" href="idi_8c.html#a49429b2baa0cec368650dc945b1f77c7">IDI_DIN_GROUP_QTY</a>; group ++ )</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;        {</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;            error_code = <a class="code" href="idi_8c.html#ad96039e3c434110fc30781b9e82f735f">IDI_DIN_Group_Get</a>( group, &amp;(din_grp[group]) );</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;        }</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;        group_count = <a class="code" href="idi_8c.html#a49429b2baa0cec368650dc945b1f77c7">IDI_DIN_GROUP_QTY</a>;</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;    }</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;    {</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;        group = (int) strtol( argv[0], NULL, 0 );</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;        error_code = <a class="code" href="idi_8c.html#ad96039e3c434110fc30781b9e82f735f">IDI_DIN_Group_Get</a>( group, &amp;(din_grp[0]) );</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;        group_count = 1;</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;    }</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;    printf( <span class="stringliteral">&quot;DIN_GROUP:&quot;</span> );</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;    <span class="keywordflow">for</span> ( group = 0; group &lt; group_count; group++ )</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;    {</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;        printf( <span class="stringliteral">&quot; 0x%02X&quot;</span>, ((<span class="keywordtype">int</span>) din_grp[group]) );</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;    }</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;    printf( <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;}</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03411"></a><span class="lineno"><a class="line" href="idi_8c.html#a8c2b4e5773d4dd8e0ea0623c2f27e02d"> 3411</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structcommand__line.html">command_line</a>  <a class="code" href="idi_8c.html#a8c2b4e5773d4dd8e0ea0623c2f27e02d">idi_cmd_din</a>[] =</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;{</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;    {   <a class="code" href="idi_8c.html#a606ff80c6af794676d2609d022254961">IDI_CMD__DIN_ID</a>,        <span class="stringliteral">&quot;id&quot;</span>,       <span class="stringliteral">&quot;params: none.  Reports the DIN board/component ID.&quot;</span>    },</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;    {   <a class="code" href="idi_8c.html#ac7fce67a17e18f47f5e72ca1c8820647">IDI_CMD__DIN_Channel</a>,   <span class="stringliteral">&quot;chan&quot;</span>,     <span class="stringliteral">&quot;params: &lt;channel&gt;&quot;</span>                                     },</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;    {   <a class="code" href="idi_8c.html#ac49acbd90fd55e5b6bfa1b9306c25efd">IDI_CMD__DIN_Group</a>,     <span class="stringliteral">&quot;group&quot;</span>,    <span class="stringliteral">&quot;params: [&lt;group_channel | all&gt;]&quot;</span>                       },</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;    {   <a class="code" href="idi_8c.html#ad59aa9edce531ded7d34e236216d0c3c">IDI_CMD__DIN_All</a>,       <span class="stringliteral">&quot;all&quot;</span>,      <span class="stringliteral">&quot;reports all digital inputs in binary and hex&quot;</span>          },</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;    {   NULL,                   NULL,       NULL                                                    },</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;};</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03425"></a><span class="lineno"><a class="line" href="idi_8c.html#acbd07590cc6312792765dd7ec17a614f"> 3425</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#acbd07590cc6312792765dd7ec17a614f">IDI_Command_Line_Digital_Input</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[] )</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;{ <span class="comment">/*  idi din &lt;channel/all&gt;  */</span></div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;    <span class="keywordtype">int</span>         error_code;</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;    <span class="keywordtype">int</span>         index;</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;    <span class="keywordtype">int</span>         argc_new;</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;    <span class="keywordtype">char</span> **     argv_new;</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;    <span class="keywordtype">char</span> *      endptr;</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;    <span class="comment">//int           channel;</span></div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 ) <span class="keywordflow">return</span> -EC_NOT_FOUND;</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;    error_code = -EC_SYNTAX;</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;    <span class="comment">//channel = (int) strtol( argv[0], &amp;endptr, 0 );</span></div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;    strtol( argv[0], &amp;endptr, 0 ); <span class="comment">/* just want to know where it fails */</span></div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;    <span class="keywordflow">if</span> ( argv[0] != endptr )</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;    {  <span class="comment">/* assume channel number */</span></div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;        error_code = (* idi_cmd_din[0].<a class="code" href="structcommand__line.html#a62417f2e64cfcb563974afad3cd84c8f">cmd_fnc</a> )( argc, argv );</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;    }</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;    { <span class="comment">/* otherwise a normal command */</span></div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;        index = 0;</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;        <span class="keywordflow">while</span> ( NULL != idi_cmd_din[index].<a class="code" href="structcommand__line.html#a62417f2e64cfcb563974afad3cd84c8f">cmd_fnc</a> )</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;        {</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;            <span class="keywordflow">if</span> ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( idi_cmd_din[index].<a class="code" href="structcommand__line.html#a5ac083a645d964373f022d03df4849c8">name</a>, argv[0] )  )</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;            {</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;                argv_new = &amp;(argv[1]);</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;                argc_new = argc - 1;</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;                error_code = (* idi_cmd_din[index].<a class="code" href="structcommand__line.html#a62417f2e64cfcb563974afad3cd84c8f">cmd_fnc</a> )( argc_new, argv_new );</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;            }</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;            index++;</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;        }</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;    }</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;    <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;}</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;<span class="comment">/*    &lt; &lt; &lt; &lt;  O T H E R   C O M M A N D   F U N C T I O N S  &gt; &gt; &gt; &gt;                                     */</span></div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;<span class="comment">/**********************************************************************/</span></div>
<div class="line"><a name="l03488"></a><span class="lineno"><a class="line" href="idi_8c.html#a59716a10cd7a8c42425e1ceaefd50dc4"> 3488</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a59716a10cd7a8c42425e1ceaefd50dc4">IDI_Command_Line_Register_Transaction</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[] )</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;{</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;    <span class="keywordtype">int</span> error_code;</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;    <span class="keywordtype">int</span> index;</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;    <span class="keywordtype">int</span> found;</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 ) <span class="keywordflow">return</span> -EC_NOT_FOUND;</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;    found = -1;</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;    index =  0;</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;    <span class="keywordflow">while</span> ( definitions[index].direction != <a class="code" href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5a74f81f4c5a0aed3f67492123def70753">REG_DIR_NONE</a> )</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;    {</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;        <span class="keywordflow">if</span> ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( definitions[index].acronym, argv[0] )  )</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;        {</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;            found = index;</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;        }</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;        index++;</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;    }</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;    <span class="keywordflow">if</span> ( found &lt; 0 )</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;    {</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;        <span class="comment">//printf( &quot;ER: \n&quot; );</span></div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;        <span class="keywordflow">return</span>  -EC_NOT_FOUND;</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;    }</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 2 )</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;    { <span class="comment">/* read operation */</span></div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;        uint8_t value;</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;        error_code = <a class="code" href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a>( definitions[index].symbol, &amp;value );</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;        <span class="keywordflow">if</span> ( SUCCESS == error_code )</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;        {</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;            printf( <span class="stringliteral">&quot;RD: %s=0x%02X\n&quot;</span>,  definitions[index].acronym, value );</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;        }</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;    }</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;    {</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;        uint8_t value;</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;        value = (uint8_t) strtol( argv[1], NULL, 0 );</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;        error_code = <a class="code" href="idi_8c.html#a335ac0f174d3cfe042d9bda97426616b">IO_Write_U8</a>( definitions[index].symbol, value );</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;        <span class="keywordflow">if</span> ( SUCCESS == error_code )</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;        {</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;            printf( <span class="stringliteral">&quot;WR: %s=0x%02X\n&quot;</span>, definitions[index].acronym, value );</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;        }</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;    }</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;}</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03543"></a><span class="lineno"><a class="line" href="idi_8c.html#a4aff859f461c01bde31699b10f2d602d"> 3543</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a4aff859f461c01bde31699b10f2d602d">IDI_CMD__Main_IO_Behavior</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;{ <span class="comment">/*  idi spi ecd [&lt;time sec&gt;] */</span></div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;    <span class="keywordtype">int</span>      error_code;               <span class="comment">/* used primarily for debug purposes */</span></div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 )</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;    { <span class="comment">/* read */</span></div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;        printf( <span class="stringliteral">&quot;IO Simulate = %s\n&quot;</span>, <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a6513343c81785c28903fc3c4d1d50206">io_simulate</a> ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span> );</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;        printf( <span class="stringliteral">&quot;IO Report   = %s\n&quot;</span>, <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#ad5d4eafc81d2a1f443f9a5a09b56efe0">io_report</a>   ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span> );</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;    }</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( argc &gt; 1 )</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;    { <span class="comment">/* write */</span></div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;        <span class="keywordflow">if</span>       ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;simulate&quot;</span>, argv[0] ) )</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;        {</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;            <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a6513343c81785c28903fc3c4d1d50206">io_simulate</a> = <a class="code" href="idi_8c.html#a95fbfdb665e1aa54eb081d7d5c7af6a8">String_To_Bool</a>( argv[1] );</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;        }</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>  ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;report&quot;</span>, argv[0] ) )</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;        {</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;            <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#ad5d4eafc81d2a1f443f9a5a09b56efe0">io_report</a> = <a class="code" href="idi_8c.html#a95fbfdb665e1aa54eb081d7d5c7af6a8">String_To_Bool</a>( argv[1] );</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;        }</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;        printf( <span class="stringliteral">&quot;OK\n&quot;</span> );</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;    }</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;    { <span class="comment">/* read individual */</span></div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;        <span class="keywordflow">if</span>       ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;simulate&quot;</span>, argv[0] ) )</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;        {</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;            printf( <span class="stringliteral">&quot;IO Simulate = %s\n&quot;</span>, <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a6513343c81785c28903fc3c4d1d50206">io_simulate</a> ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span> );</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;        }</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>  ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;report&quot;</span>, argv[0] ) )</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;        {</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;            printf( <span class="stringliteral">&quot;IO Report   = %s\n&quot;</span>, <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#ad5d4eafc81d2a1f443f9a5a09b56efe0">io_report</a>   ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span> );</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;        }</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;    }</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;}</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03583"></a><span class="lineno"><a class="line" href="idi_8c.html#aed68a86ac0a1465fe0d35a3ab48079dd"> 3583</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="idi_8c.html#aed68a86ac0a1465fe0d35a3ab48079dd">IDI_CMD__Main_Base</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[] )</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;{ <span class="comment">/*  idi spi ecd [&lt;time sec&gt;] */</span></div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;    <span class="keywordtype">int</span>      error_code;               <span class="comment">/* used primarily for debug purposes */</span></div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 )</div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;    { <span class="comment">/* read */</span></div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;        printf( <span class="stringliteral">&quot;BASE_ADDRESS: 0x%04X\n&quot;</span>, <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a27de55c6cee77e53ec9631f1f489a97a">base_address</a> );</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;    }</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;    { <span class="comment">/* write */</span></div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;        <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a27de55c6cee77e53ec9631f1f489a97a">base_address</a> = (uint16_t) strtol( argv[0], NULL, 0 );</div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;        printf( <span class="stringliteral">&quot;OK\n&quot;</span> );</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;    }</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;}</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03604"></a><span class="lineno"><a class="line" href="idi_8c.html#a9a67f3933310bd9859d7e25eca8020bb"> 3604</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structcommand__line.html">command_line</a>  <a class="code" href="idi_8c.html#a9a67f3933310bd9859d7e25eca8020bb">idi_cmd_main</a>[] =</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;{</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;    {   <a class="code" href="idi_8c.html#aed68a86ac0a1465fe0d35a3ab48079dd">IDI_CMD__Main_Base</a>,             <span class="stringliteral">&quot;base&quot;</span>,     <span class="stringliteral">&quot;params: [&lt;address&gt;]&quot;</span>                                   },</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;    {   <a class="code" href="idi_8c.html#a4aff859f461c01bde31699b10f2d602d">IDI_CMD__Main_IO_Behavior</a>,      <span class="stringliteral">&quot;io&quot;</span>,       <span class="stringliteral">&quot;params: [&lt;simulate&gt;/&lt;report&gt;]&quot;</span>                         },</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;    {   NULL,                           NULL,       NULL                                                    },</div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;};</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03616"></a><span class="lineno"><a class="line" href="idi_8c.html#a5dfe12489f8e7e96a20e3dbe6810e90f"> 3616</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a5dfe12489f8e7e96a20e3dbe6810e90f">IDI_Command_Line_Set</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[] )</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;{</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;    <span class="keywordtype">int</span>         error_code;</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;    <span class="keywordtype">int</span>         index;</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;    <span class="keywordtype">int</span>         argc_new;</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;    <span class="keywordtype">char</span> **     argv_new;</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;    <span class="keywordflow">if</span> ( argc &lt; 1 ) <span class="keywordflow">return</span> -EC_NOT_FOUND;</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;    index = 0;</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;    <span class="keywordflow">while</span> ( NULL != idi_cmd_fram[index].<a class="code" href="structcommand__line.html#a62417f2e64cfcb563974afad3cd84c8f">cmd_fnc</a> )</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;    {</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;        <span class="keywordflow">if</span> ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( idi_cmd_main[index].<a class="code" href="structcommand__line.html#a5ac083a645d964373f022d03df4849c8">name</a>, argv[0] )  )</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;        {</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;            argv_new = &amp;(argv[1]);</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;            argc_new = argc - 1;</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;            error_code = (* idi_cmd_main[index].<a class="code" href="structcommand__line.html#a62417f2e64cfcb563974afad3cd84c8f">cmd_fnc</a> )( argc_new, argv_new );</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;        }</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;        index++;</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;    }</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;    <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;}</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;<span class="comment">/**********************************************************************/</span></div>
<div class="line"><a name="l03651"></a><span class="lineno"><a class="line" href="idi_8c.html#a2db447f8544aaf996c1f9526db749d54"> 3651</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a2db447f8544aaf996c1f9526db749d54">IDI_Command_Line_Main</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[] )</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;{</div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;    <span class="keywordtype">int</span>     error_code;</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;    <span class="keywordtype">int</span>     index;</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;    <span class="keywordtype">int</span>     argc_new;</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;    <span class="keywordtype">char</span> ** argv_new;</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;    index = 0; <span class="comment">/* offset into the string list */</span></div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;    <span class="keywordflow">if</span> ( argc &gt; 0 <span class="comment">/* at least one */</span> )</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;    {</div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;        <span class="keywordflow">if</span>      ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;set&quot;</span>, argv[index] ) )</div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;        { <span class="comment">/* idi set .... */</span></div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;            index++;</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;            argv_new = &amp;(argv[index]);</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;            argc_new = argc - index;</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;            error_code = <a class="code" href="idi_8c.html#a5dfe12489f8e7e96a20e3dbe6810e90f">IDI_Command_Line_Set</a>( argc_new, argv_new );</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;            <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">goto</span> IDI_COMMAND_LINE_MAIN_TERMINATE;</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;        }</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;dump&quot;</span>, argv[index] ) )</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;        { <span class="comment">/* idi dump .... */</span></div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;            FILE * fd_out;</div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;            index++;</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;            <span class="keywordflow">if</span> ( argc &gt; 2 )</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;            {</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;                fd_out = fopen( argv[index], <span class="stringliteral">&quot;w&quot;</span> );</div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;                <span class="keywordflow">if</span> ( NULL == fd_out ) fd_out = stdout;</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;            }</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;            {</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;                fd_out = stdout;</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;            }</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;            error_code = <a class="code" href="idi_8c.html#a07717d410edbdf91e98db3fdb526a0cc">IDI_Register_Report_CSV</a>( definitions, fd_out );</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;            <span class="keywordflow">if</span> ( (argc &gt; 2) &amp;&amp; (NULL != fd_out) &amp;&amp; (stdout != fd_out) )</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;            {</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;                fclose( fd_out );</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;            }</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;            <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">goto</span> IDI_COMMAND_LINE_MAIN_TERMINATE;</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;        }</div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;spi&quot;</span>, argv[index] ) )</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;        { <span class="comment">/* idi spi .... */</span></div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;            <span class="comment">// idi spi id</span></div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;            <span class="comment">// idi spi</span></div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;            index++;</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;            argv_new = &amp;(argv[index]);</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;            argc_new = argc - index;</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;            error_code = <a class="code" href="idi_8c.html#ab3d8b6fa8b84e23203bb0f2ee9b7654c">IDI_Command_Line_SPI</a>( argc_new, argv_new );</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;            <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">goto</span> IDI_COMMAND_LINE_MAIN_TERMINATE;</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;        }</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;fram&quot;</span>, argv[index] ) )</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;        { <span class="comment">/* idi fram .... */</span></div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;            index++;</div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;            argv_new = &amp;(argv[index]);</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;            argc_new = argc - index;</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;            error_code = <a class="code" href="idi_8c.html#aaefc0ba72d5e1d1a732a55dd7b52c4e1">IDI_Command_Line_FRAM</a>( argc_new, argv_new );</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;            <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">goto</span> IDI_COMMAND_LINE_MAIN_TERMINATE;</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;        }</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;din&quot;</span>, argv[index] ) )</div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;        { <span class="comment">/* idi din .... */</span></div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;            index++;</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;            argv_new = &amp;(argv[index]);</div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;            argc_new = argc - index;</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;            error_code = <a class="code" href="idi_8c.html#acbd07590cc6312792765dd7ec17a614f">IDI_Command_Line_Digital_Input</a>( argc_new, argv_new );</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;            <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">goto</span> IDI_COMMAND_LINE_MAIN_TERMINATE;</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;        }</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;        {</div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;            argv_new = &amp;(argv[index]);</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;            argc_new = argc - index;</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;            error_code = <a class="code" href="idi_8c.html#a59716a10cd7a8c42425e1ceaefd50dc4">IDI_Command_Line_Register_Transaction</a>( argc_new, argv_new );</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;            <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">goto</span> IDI_COMMAND_LINE_MAIN_TERMINATE;</div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;        }</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;    }</div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;IDI_COMMAND_LINE_MAIN_TERMINATE:</div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;    <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;}</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;<span class="comment">/**********************************************************************************************************/</span></div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;<span class="comment">/*                  &lt; &lt; &lt; &lt;  M A I N    F U N C T I O N S  &gt; &gt; &gt; &gt;                                        */</span></div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;<span class="comment">/**********************************************************************/</span></div>
<div class="line"><a name="l03746"></a><span class="lineno"><a class="line" href="idi_8c.html#aeee5af479713594f4032b36fdefc2ca5"> 3746</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="idi_8c.html#aeee5af479713594f4032b36fdefc2ca5">IDI_Help</a>( FILE * out )</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;{</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;    <span class="keywordtype">int</span> index;</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;    fprintf( out, <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;    fprintf( out, <span class="stringliteral">&quot;Isolated Digital Input Test Code\n&quot;</span> );</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;    fprintf( out, <span class="stringliteral">&quot;Apex Embedded Systems\n&quot;</span> );</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;    fprintf( out, <span class="stringliteral">&quot;Revision: %s\n&quot;</span>, <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a02b7232561c6ed9540ce106d328eedf8">svn_revision_string</a> );</div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;    fprintf( out, <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;    fprintf( out, <span class="stringliteral">&quot;help - outputs help information\n&quot;</span> );</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;    fprintf( out, <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;    fprintf( out, <span class="stringliteral">&quot;loop - any command below can run in a loop until key pressed\n&quot;</span> );</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;    fprintf( out, <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;    fprintf( out, <span class="stringliteral">&quot;dump - outputs register information in a comma delimited format\n&quot;</span> );</div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;    fprintf( out, <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;    fprintf( out, <span class="stringliteral">&quot;set  - Set/Get main parameters.\n&quot;</span> );</div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;    index = 0;</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;    <span class="keywordflow">while</span> ( NULL != idi_cmd_main[index].<a class="code" href="structcommand__line.html#a67b7e976c6444c3d7fab151527bdae33">help</a> )</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;    {</div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;    fprintf( out, <span class="stringliteral">&quot;       %8s - %s\n&quot;</span>, idi_cmd_main[index].<a class="code" href="structcommand__line.html#a5ac083a645d964373f022d03df4849c8">name</a>, idi_cmd_main[index].help );</div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;    index++;</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;    }</div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;    fprintf( out, <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;    fprintf( out, <span class="stringliteral">&quot;spi  - SPI related functions\n&quot;</span> );</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;    index = 0;</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;    <span class="keywordflow">while</span> ( NULL != idi_cmd_spi[index].help )</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;    {</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;    fprintf( out, <span class="stringliteral">&quot;       %8s - %s\n&quot;</span>, idi_cmd_spi[index].<a class="code" href="structcommand__line.html#a5ac083a645d964373f022d03df4849c8">name</a>, idi_cmd_spi[index].help );</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;    index++;</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;    }</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;    fprintf( out, <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;    fprintf( out, <span class="stringliteral">&quot;fram - FRAM related functions\n&quot;</span> );</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;    index = 0;</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;    <span class="keywordflow">while</span> ( NULL != idi_cmd_fram[index].help )</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;    {</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;    fprintf( out, <span class="stringliteral">&quot;       %8s - %s\n&quot;</span>, idi_cmd_fram[index].<a class="code" href="structcommand__line.html#a5ac083a645d964373f022d03df4849c8">name</a>, idi_cmd_fram[index].help );</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;    index++;</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;    }</div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;    fprintf( out, <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;    fprintf( out, <span class="stringliteral">&quot;din  - Digital input related functions\n&quot;</span> );</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;    index = 0;</div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;    <span class="keywordflow">while</span> ( NULL != idi_cmd_din[index].help )</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;    {</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;    fprintf( out, <span class="stringliteral">&quot;       %8s - %s\n&quot;</span>, idi_cmd_din[index].<a class="code" href="structcommand__line.html#a5ac083a645d964373f022d03df4849c8">name</a>, idi_cmd_din[index].help );</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;    index++;</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;    }</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;    fprintf( out, <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;}</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;<span class="comment">/**********************************************************************/</span></div>
<div class="line"><a name="l03809"></a><span class="lineno"><a class="line" href="idi_8c.html#a9b645d8637fdc45f72c0109fbd730209"> 3809</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a9b645d8637fdc45f72c0109fbd730209">IDI_Termination</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;{</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;    FILE * fd;</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;    <span class="comment">/* save the data set */</span></div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;    fd = fopen( <span class="stringliteral">&quot;idi_init.bin&quot;</span>, <span class="stringliteral">&quot;w&quot;</span> );</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;    <span class="keywordflow">if</span> ( NULL == fd )</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;    { <span class="comment">/* defaults */</span></div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;        <span class="keywordflow">return</span> -EC_INIT_FILE;</div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;    }</div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;    { <span class="comment">/* read in dataset */</span></div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;        fwrite( &amp;<a class="code" href="structidi__dataset.html">idi_dataset</a>, 1, <span class="keyword">sizeof</span>( <span class="keyword">struct</span> <a class="code" href="structidi__dataset.html">idi_dataset</a> ), fd );</div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;        fclose( fd );</div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;    }</div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;}</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;<span class="comment">/**********************************************************************/</span></div>
<div class="line"><a name="l03836"></a><span class="lineno"><a class="line" href="idi_8c.html#a89241c518880078575d736e7171ab068"> 3836</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a89241c518880078575d736e7171ab068">IDI_Initialization</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;{</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;    FILE * fd;</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;    <span class="comment">/* restore the data set, if we can otherwise initialize with defaults */</span></div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;    fd = fopen( <span class="stringliteral">&quot;idi_init.bin&quot;</span>, <span class="stringliteral">&quot;r&quot;</span> );</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;    <span class="keywordflow">if</span> ( NULL == fd )</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;    { <span class="comment">/* defaults */</span></div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;        memset( &amp;<a class="code" href="structidi__dataset.html">idi_dataset</a>, 0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structidi__dataset.html">idi_dataset</a>) );</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;        <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a27de55c6cee77e53ec9631f1f489a97a">base_address</a>        = 0xff00;</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;        <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#aae9e92994011c0d276bdd28589d9aa71">bank_previous</a>       = <a class="code" href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a8cce6fe14bba46446b1cde9350cd83d4">IDI_BANK_0</a>;</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;    }</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;    { <span class="comment">/* read in dataset */</span></div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;        fread( &amp;<a class="code" href="structidi__dataset.html">idi_dataset</a>, 1, <span class="keyword">sizeof</span>( <span class="keyword">struct</span> <a class="code" href="structidi__dataset.html">idi_dataset</a> ), fd );</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;        fclose( fd );</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;    }</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;    <a class="code" href="structidi__dataset.html">idi_dataset</a>.<a class="code" href="structidi__dataset.html#a02b7232561c6ed9540ce106d328eedf8">svn_revision_string</a> = <a class="code" href="idi_8c.html#aff30ce3e78536dd65f538be3989eb9ea">idi_svn_revision_string</a>;</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;    <span class="keywordflow">return</span> SUCCESS;</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;}</div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;<span class="comment">/**********************************************************************/</span></div>
<div class="line"><a name="l03871"></a><span class="lineno"><a class="line" href="idi_8c.html#a0ddf1224851353fc92bfbff6f499fa97"> 3871</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="idi_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[] )</div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;{</div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;    <span class="comment">//int index;</span></div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;    <span class="comment">//int count;</span></div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;    <span class="keywordtype">int</span>     error_code;</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;    <span class="keywordtype">int</span>     index;</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;    <span class="keywordtype">int</span>     argc_new;</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;    <span class="keywordtype">char</span> ** argv_new;</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;</div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;<span class="comment">/* used only for Win7 debugging sessions with cygwin */</span></div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;<span class="preprocessor">#if(1)</span></div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;    setvbuf(stdout, NULL, _IONBF, 0);</div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;    setvbuf(stderr, NULL, _IONBF, 0);</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;</div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;    error_code = <a class="code" href="idi_8c.html#a89241c518880078575d736e7171ab068">IDI_Initialization</a>();</div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">goto</span> Main_Termination;</div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;<span class="comment">//      printf( &quot;Hello\n&quot;);</span></div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;<span class="comment">//      return SUCCESS;</span></div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;<span class="preprocessor">#if(0)</span></div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;    count = argc;</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;    index = 0;     <span class="comment">/* OK, zero value is name of executable file  */</span></div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;    <span class="keywordflow">while</span> ( count &gt; 0 )</div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;    {</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;        printf( <span class="stringliteral">&quot;index = %d, str = &lt;%s&gt;\n&quot;</span>, index, argv[index] );</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;        index++;</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;        count--;</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;    }</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;    index = 1;</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;    <span class="keywordflow">if</span> ( argc &gt; 1 )</div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;    {</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;        <span class="keywordflow">if</span>      ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;help&quot;</span>, argv[index]) )</div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;        {</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;            <a class="code" href="idi_8c.html#aeee5af479713594f4032b36fdefc2ca5">IDI_Help</a>( stdout );</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;        }</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( 0 == <a class="code" href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a>( <span class="stringliteral">&quot;loop&quot;</span>, argv[index]) )</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;        { <span class="comment">/* loop until key is pressed */</span></div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;            <span class="keywordflow">if</span> ( argc &gt; 2 )</div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;            {</div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;                index++;</div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;                <span class="keywordflow">while</span> ( !<a class="code" href="idi_8c.html#ae02625dd3f93cc87fdab4b6e2c15ed6c">Character_Get</a>(NULL) )</div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;                { <span class="comment">/* assumes that all functions utilize arguments in read only fashion */</span></div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;                    argv_new = &amp;(argv[index]);</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;                    argc_new = argc - index;</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;                    error_code = <a class="code" href="idi_8c.html#a2db447f8544aaf996c1f9526db749d54">IDI_Command_Line_Main</a>( argc_new, argv_new );</div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;                    <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">goto</span> Main_Termination_Error_Codes;</div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;                }</div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;            }</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;        }</div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;        {</div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;            argv_new = &amp;(argv[index]);</div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;            argc_new = argc - index;</div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;            error_code = <a class="code" href="idi_8c.html#a2db447f8544aaf996c1f9526db749d54">IDI_Command_Line_Main</a>( argc_new, argv_new );</div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;            <span class="keywordflow">if</span> ( error_code ) <span class="keywordflow">goto</span> Main_Termination_Error_Codes;</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;        }</div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;    }</div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;    { <span class="comment">/* produce help */</span></div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;        <a class="code" href="idi_8c.html#aeee5af479713594f4032b36fdefc2ca5">IDI_Help</a>( stdout );</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;    }</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;</div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;Main_Termination:</div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;    <a class="code" href="idi_8c.html#a9b645d8637fdc45f72c0109fbd730209">IDI_Termination</a>();</div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;    <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;</div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;Main_Termination_Error_Codes:</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;    <a class="code" href="idi_8c.html#a9b645d8637fdc45f72c0109fbd730209">IDI_Termination</a>();</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;    printf( <span class="stringliteral">&quot;ERROR: %d, %s\n&quot;</span>,  error_code, <a class="code" href="idi_8c.html#a898d8519b441ee16e816759982951490">EC_Code_To_Human_Readable</a>( error_code ) );</div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;    <span class="keywordflow">return</span> error_code;</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;}</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;</div>
<div class="ttc" id="structspi__status_html_a234b821e581a221369b67154e3e7cfa8"><div class="ttname"><a href="structspi__status.html#a234b821e581a221369b67154e3e7cfa8">spi_status::tx_status</a></div><div class="ttdeci">BOOL tx_status</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00344">idi.c:344</a></div></div>
<div class="ttc" id="idi_8c_html_ab8bf1943ccafe17f91e3a09dc431fd44"><div class="ttname"><a href="idi_8c.html#ab8bf1943ccafe17f91e3a09dc431fd44">REG_LOCATION_OFFSET_GET</a></div><div class="ttdeci">#define REG_LOCATION_OFFSET_GET(location)</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00288">idi.c:288</a></div></div>
<div class="ttc" id="structreg__definition_html_a5f2826360f9ae88dfb5a673d9c4bfebe"><div class="ttname"><a href="structreg__definition.html#a5f2826360f9ae88dfb5a673d9c4bfebe">reg_definition::direction</a></div><div class="ttdeci">REG_DIR_ENUM direction</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00305">idi.c:305</a></div></div>
<div class="ttc" id="idi_8c_html_a0d601686f8bd8cf38104226abd0ae0e5"><div class="ttname"><a href="idi_8c.html#a0d601686f8bd8cf38104226abd0ae0e5">IDI_CMD__SPI_Config_SDI_Polarity</a></div><div class="ttdeci">static int IDI_CMD__SPI_Config_SDI_Polarity(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02627">idi.c:2627</a></div></div>
<div class="ttc" id="idi_8c_html_adb4cfa517096778a767098b1bc2ebc86"><div class="ttname"><a href="idi_8c.html#adb4cfa517096778a767098b1bc2ebc86">REG_EXTRACT_DEFINITION</a></div><div class="ttdeci">#define REG_EXTRACT_DEFINITION(symbol, index, offset, register_bytes, aperture_bytes, read_write, name, bank)</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00293">idi.c:293</a></div></div>
<div class="ttc" id="structcommand__line_html"><div class="ttname"><a href="structcommand__line.html">command_line</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02440">idi.c:2440</a></div></div>
<div class="ttc" id="idi_8c_html_acbd07590cc6312792765dd7ec17a614f"><div class="ttname"><a href="idi_8c.html#acbd07590cc6312792765dd7ec17a614f">IDI_Command_Line_Digital_Input</a></div><div class="ttdeci">int IDI_Command_Line_Digital_Input(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03425">idi.c:3425</a></div></div>
<div class="ttc" id="idi_8c_html_acfdd9db9e4fd5406b6024cf5ac492b95"><div class="ttname"><a href="idi_8c.html#acfdd9db9e4fd5406b6024cf5ac492b95">FRAM_File_To_Memory</a></div><div class="ttdeci">int FRAM_File_To_Memory(uint16_t address, size_t length, FILE *binary)</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02393">idi.c:2393</a></div></div>
<div class="ttc" id="idi_8c_html_ad08156aad04f93c2cd826c90b9b91566"><div class="ttname"><a href="idi_8c.html#ad08156aad04f93c2cd826c90b9b91566">IDI_CMD__FRAM_Load</a></div><div class="ttdeci">static int IDI_CMD__FRAM_Load(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03098">idi.c:3098</a></div></div>
<div class="ttc" id="idi_8c_html_a880aef745d1398d7deb49b45e988ad84"><div class="ttname"><a href="idi_8c.html#a880aef745d1398d7deb49b45e988ad84">SPI_ID_Get</a></div><div class="ttdeci">int SPI_ID_Get(uint16_t *id)</div><div class="ttdoc">Retrieves the SPI ID register value. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01041">idi.c:1041</a></div></div>
<div class="ttc" id="idi_8c_html_a87f0e514a60de8610820fd7a83703e1c"><div class="ttname"><a href="idi_8c.html#a87f0e514a60de8610820fd7a83703e1c">IDI_CMD__SPI_Status</a></div><div class="ttdeci">static int IDI_CMD__SPI_Status(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02775">idi.c:2775</a></div></div>
<div class="ttc" id="structcommand__line_html_a62417f2e64cfcb563974afad3cd84c8f"><div class="ttname"><a href="structcommand__line.html#a62417f2e64cfcb563974afad3cd84c8f">command_line::cmd_fnc</a></div><div class="ttdeci">int(* cmd_fnc)(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02442">idi.c:2442</a></div></div>
<div class="ttc" id="idi_8c_html_a35c55d31a7248223e061a0a57c5fa9c3"><div class="ttname"><a href="idi_8c.html#a35c55d31a7248223e061a0a57c5fa9c3">EC_EXTRACT_ENUM</a></div><div class="ttdeci">#define EC_EXTRACT_ENUM(symbol, code, message)</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00160">idi.c:160</a></div></div>
<div class="ttc" id="structspi__cfg_html"><div class="ttname"><a href="structspi__cfg.html">spi_cfg</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00327">idi.c:327</a></div></div>
<div class="ttc" id="idi_8c_html_aa0454405958e720573dfa6a8641f074e"><div class="ttname"><a href="idi_8c.html#aa0454405958e720573dfa6a8641f074e">IDI_CMD__FRAM_RDID</a></div><div class="ttdeci">static int IDI_CMD__FRAM_RDID(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03200">idi.c:3200</a></div></div>
<div class="ttc" id="structidi__dataset_html_a4370ed563af116d0087bdf1285ef35ea"><div class="ttname"><a href="structidi__dataset.html#a4370ed563af116d0087bdf1285ef35ea">idi_dataset::spi_block</a></div><div class="ttdeci">uint8_t spi_block[SPI_BLOCK_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00391">idi.c:391</a></div></div>
<div class="ttc" id="idi_8c_html_add0101e04ad7058fb979ef395febe68e"><div class="ttname"><a href="idi_8c.html#add0101e04ad7058fb979ef395febe68e">IDI_DIN_ID_Get</a></div><div class="ttdeci">int IDI_DIN_ID_Get(uint16_t *id)</div><div class="ttdoc">Obtains the DIN component (or board ID in this case) ID number. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00955">idi.c:955</a></div></div>
<div class="ttc" id="idi_8c_html_a1a51d688850609ce7bdd228893d5ce77ade572ed6d03459594d4d5d2705be720b"><div class="ttname"><a href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77ade572ed6d03459594d4d5d2705be720b">IDI_BANK_3</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00196">idi.c:196</a></div></div>
<div class="ttc" id="idi_8c_html_a335ac0f174d3cfe042d9bda97426616b"><div class="ttname"><a href="idi_8c.html#a335ac0f174d3cfe042d9bda97426616b">IO_Write_U8</a></div><div class="ttdeci">int IO_Write_U8(IDI_REG_ENUM location, uint8_t value)</div><div class="ttdoc">Writes uint8_t to I/O port. Macros are used to guide the target implementation. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00746">idi.c:746</a></div></div>
<div class="ttc" id="idi_8c_html_a4fa9a82ae726923baa736477d50d2589"><div class="ttname"><a href="idi_8c.html#a4fa9a82ae726923baa736477d50d2589">IDI_CMD__SPI_Commit</a></div><div class="ttdeci">static int IDI_CMD__SPI_Commit(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02975">idi.c:2975</a></div></div>
<div class="ttc" id="idi_8c_html_a016eb7133cd5c37fc3dda165251b102c"><div class="ttname"><a href="idi_8c.html#a016eb7133cd5c37fc3dda165251b102c">IDI_ERROR_CODES</a></div><div class="ttdeci">#define IDI_ERROR_CODES(_)</div><div class="ttdoc">An organized error code listing. This macro is used to build the complete error code enumeration list...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00139">idi.c:139</a></div></div>
<div class="ttc" id="structcommand__line_html_a67b7e976c6444c3d7fab151527bdae33"><div class="ttname"><a href="structcommand__line.html#a67b7e976c6444c3d7fab151527bdae33">command_line::help</a></div><div class="ttdeci">char * help</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02444">idi.c:2444</a></div></div>
<div class="ttc" id="idi_8c_html_a1a51d688850609ce7bdd228893d5ce77afa67bc53e5d6a9d98d36c2ce6bd8da40"><div class="ttname"><a href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77afa67bc53e5d6a9d98d36c2ce6bd8da40">IDI_BANK_2</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00195">idi.c:195</a></div></div>
<div class="ttc" id="structspi__cfg_html_ad8d6adceadaec7f4c92349ec8beb720d"><div class="ttname"><a href="structspi__cfg.html#ad8d6adceadaec7f4c92349ec8beb720d">spi_cfg::half_clock_interval</a></div><div class="ttdeci">uint16_t half_clock_interval</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00336">idi.c:336</a></div></div>
<div class="ttc" id="idi_8c_html_a06fc87d81c62e9abb8790b6e5713c55baa1e095cc966dbecf6a0d8aad75348d1a"><div class="ttname"><a href="idi_8c.html#a06fc87d81c62e9abb8790b6e5713c55baa1e095cc966dbecf6a0d8aad75348d1a">FALSE</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00074">idi.c:74</a></div></div>
<div class="ttc" id="idi_8c_html_afa3ba21357311aece5c1f86706a36338"><div class="ttname"><a href="idi_8c.html#afa3ba21357311aece5c1f86706a36338">SPI_Commit</a></div><div class="ttdeci">int SPI_Commit(uint8_t chip_select)</div><div class="ttdoc">Sets/Clears the chip select or used to commit the transmit/write FIFO to the spi interface. The mode of operation is dependent on the chip_select_behavior. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01606">idi.c:1606</a></div></div>
<div class="ttc" id="idi_8c_html_aeee5af479713594f4032b36fdefc2ca5"><div class="ttname"><a href="idi_8c.html#aeee5af479713594f4032b36fdefc2ca5">IDI_Help</a></div><div class="ttdeci">void IDI_Help(FILE *out)</div><div class="ttdoc">Outputs a help listing to the user. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03746">idi.c:3746</a></div></div>
<div class="ttc" id="idi_8c_html_ac7fce67a17e18f47f5e72ca1c8820647"><div class="ttname"><a href="idi_8c.html#ac7fce67a17e18f47f5e72ca1c8820647">IDI_CMD__DIN_Channel</a></div><div class="ttdeci">static int IDI_CMD__DIN_Channel(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03345">idi.c:3345</a></div></div>
<div class="ttc" id="idi_8c_html_a06fc87d81c62e9abb8790b6e5713c55baa82764c3079aea4e60c80e45befbb839"><div class="ttname"><a href="idi_8c.html#a06fc87d81c62e9abb8790b6e5713c55baa82764c3079aea4e60c80e45befbb839">TRUE</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00074">idi.c:74</a></div></div>
<div class="ttc" id="idi_8c_html_a152add15a07a391106c4f37efe492073"><div class="ttname"><a href="idi_8c.html#a152add15a07a391106c4f37efe492073">idi_cmd_spi</a></div><div class="ttdeci">static struct command_line idi_cmd_spi[]</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02994">idi.c:2994</a></div></div>
<div class="ttc" id="idi_8c_html_aeb7b3b3e3ebcfb239c044d8107497cf6"><div class="ttname"><a href="idi_8c.html#aeb7b3b3e3ebcfb239c044d8107497cf6">definitions</a></div><div class="ttdeci">static const struct reg_definition definitions[]</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00433">idi.c:433</a></div></div>
<div class="ttc" id="idi_8c_html_aef976bb6ba5348e01e604c1165de7842"><div class="ttname"><a href="idi_8c.html#aef976bb6ba5348e01e604c1165de7842">SPI_Data_Write_Read</a></div><div class="ttdeci">int SPI_Data_Write_Read(size_t size, size_t tx_count, const void *tx_buffer, size_t rx_size, const void *rx_buffer)</div><div class="ttdoc">This function will write/read virtually any kind of data with almost any kind of chips select wrappin...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01856">idi.c:1856</a></div></div>
<div class="ttc" id="idi_8c_html_a1f8d0d21d4d226982f2ad9a4916a0f3d"><div class="ttname"><a href="idi_8c.html#a1f8d0d21d4d226982f2ad9a4916a0f3d">REG_LOCATION_BANK_GET</a></div><div class="ttdeci">#define REG_LOCATION_BANK_GET(location)</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00287">idi.c:287</a></div></div>
<div class="ttc" id="idi_8c_html_ad96039e3c434110fc30781b9e82f735f"><div class="ttname"><a href="idi_8c.html#ad96039e3c434110fc30781b9e82f735f">IDI_DIN_Group_Get</a></div><div class="ttdeci">static int IDI_DIN_Group_Get(size_t group, uint8_t *value)</div><div class="ttdoc">Reads the selected digital input port (8-bits). </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01018">idi.c:1018</a></div></div>
<div class="ttc" id="idi_8c_html_ad59aa9edce531ded7d34e236216d0c3c"><div class="ttname"><a href="idi_8c.html#ad59aa9edce531ded7d34e236216d0c3c">IDI_CMD__DIN_All</a></div><div class="ttdeci">static int IDI_CMD__DIN_All(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03284">idi.c:3284</a></div></div>
<div class="ttc" id="idi_8c_html_a1a51d688850609ce7bdd228893d5ce77ac9315aee24112e4f7e83204f839094ea"><div class="ttname"><a href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77ac9315aee24112e4f7e83204f839094ea">IDI_BANK_4</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00197">idi.c:197</a></div></div>
<div class="ttc" id="idi_8c_html_a4715fd103e903bf93238963a9623101dac825304c7d28288091e65b0e0bfeb440"><div class="ttname"><a href="idi_8c.html#a4715fd103e903bf93238963a9623101dac825304c7d28288091e65b0e0bfeb440">IDI_CSB_UINT16</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00320">idi.c:320</a></div></div>
<div class="ttc" id="idi_8c_html_a1a51d688850609ce7bdd228893d5ce77a8cce6fe14bba46446b1cde9350cd83d4"><div class="ttname"><a href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a8cce6fe14bba46446b1cde9350cd83d4">IDI_BANK_0</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00193">idi.c:193</a></div></div>
<div class="ttc" id="idi_8c_html_af76545581dcf26dc754c173d871c8ae3"><div class="ttname"><a href="idi_8c.html#af76545581dcf26dc754c173d871c8ae3">REG_EXTRACT_ENUM</a></div><div class="ttdeci">#define REG_EXTRACT_ENUM(symbol, index, offset, register_bytes, aperture_bytes, read_write, name, bank)</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00291">idi.c:291</a></div></div>
<div class="ttc" id="structec__human__readable_html_a254bf0858da09c96a48daf64404eb4f8"><div class="ttname"><a href="structec__human__readable.html#a254bf0858da09c96a48daf64404eb4f8">ec_human_readable::message</a></div><div class="ttdeci">const char * message</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00175">idi.c:175</a></div></div>
<div class="ttc" id="idi_8c_html_a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa"><div class="ttname"><a href="idi_8c.html#a99fb83031ce9923c84392b4e92f956b5a15590147f3d0e4ac1621e33b95beeeaa">SPI_FIFO_SIZE</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00324">idi.c:324</a></div></div>
<div class="ttc" id="idi_8c_html_ac49acbd90fd55e5b6bfa1b9306c25efd"><div class="ttname"><a href="idi_8c.html#ac49acbd90fd55e5b6bfa1b9306c25efd">IDI_CMD__DIN_Group</a></div><div class="ttdeci">static int IDI_CMD__DIN_Group(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03368">idi.c:3368</a></div></div>
<div class="ttc" id="structspi__cfg_html_a010045ad60dc510daa368259399de229"><div class="ttname"><a href="structspi__cfg.html#a010045ad60dc510daa368259399de229">spi_cfg::sdi_polarity</a></div><div class="ttdeci">BOOL sdi_polarity</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00331">idi.c:331</a></div></div>
<div class="ttc" id="idi_8c_html_a8130129973acaff19c9b1cfd5955d12d"><div class="ttname"><a href="idi_8c.html#a8130129973acaff19c9b1cfd5955d12d">SPI_Calculate_Half_Clock_Interval_Sec</a></div><div class="ttdeci">double SPI_Calculate_Half_Clock_Interval_Sec(uint16_t half_clock_interval)</div><div class="ttdoc">Computes the half clock interval in seconds given the value from the half clock interval register...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01158">idi.c:1158</a></div></div>
<div class="ttc" id="idi_8c_html_a59b98a79cf5c0821e12ab088d76f355f"><div class="ttname"><a href="idi_8c.html#a59b98a79cf5c0821e12ab088d76f355f">SPI_Configuration_Get</a></div><div class="ttdeci">int SPI_Configuration_Get(struct spi_cfg *cfg)</div><div class="ttdoc">Obtains the SPI configuration from the hardware. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01309">idi.c:1309</a></div></div>
<div class="ttc" id="idi_8c_html_adc29c2ff13d900c2f185ee95427fb06cab1ed491f47f766d02b4c8d5e8de3339b"><div class="ttname"><a href="idi_8c.html#adc29c2ff13d900c2f185ee95427fb06cab1ed491f47f766d02b4c8d5e8de3339b">FRAM_DENSITY_BYTES</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02059">idi.c:2059</a></div></div>
<div class="ttc" id="idi_8c_html_a1e853e6dd18470682ece747ece78f6cf"><div class="ttname"><a href="idi_8c.html#a1e853e6dd18470682ece747ece78f6cf">IDI_CMD__FRAM_Dump</a></div><div class="ttdeci">static int IDI_CMD__FRAM_Dump(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03054">idi.c:3054</a></div></div>
<div class="ttc" id="idi_8c_html_a50de516119a8ca534f4aada4f825d443"><div class="ttname"><a href="idi_8c.html#a50de516119a8ca534f4aada4f825d443">IDI_CMD__SPI_Config_SDO_Polarity</a></div><div class="ttdeci">static int IDI_CMD__SPI_Config_SDO_Polarity(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02657">idi.c:2657</a></div></div>
<div class="ttc" id="idi_8c_html_afe81fee380d83ce9efc1bca190b7d2ba"><div class="ttname"><a href="idi_8c.html#afe81fee380d83ce9efc1bca190b7d2ba">Hex_Dump_Line</a></div><div class="ttdeci">int Hex_Dump_Line(uint16_t address, size_t count, uint8_t *buffer, FILE *out)</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00572">idi.c:572</a></div></div>
<div class="ttc" id="idi_8c_html_a46af412eb7225c2d98d4816555cd3da6"><div class="ttname"><a href="idi_8c.html#a46af412eb7225c2d98d4816555cd3da6">IDI_MESSAGE_SIZE</a></div><div class="ttdeci">#define IDI_MESSAGE_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00373">idi.c:373</a></div></div>
<div class="ttc" id="idi_8c_html_a48b3568347bc557b3c8d24064ce40880"><div class="ttname"><a href="idi_8c.html#a48b3568347bc557b3c8d24064ce40880">IDI_REGISTER_SET_DEFINITION</a></div><div class="ttdeci">#define IDI_REGISTER_SET_DEFINITION(_)</div><div class="ttdoc">Organized list of registers and associate attributes of each of the registers. This macro does not co...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00222">idi.c:222</a></div></div>
<div class="ttc" id="idi_8c_html_a4715fd103e903bf93238963a9623101da473588067cbc33d34ebe1f6815dcdd4f"><div class="ttname"><a href="idi_8c.html#a4715fd103e903bf93238963a9623101da473588067cbc33d34ebe1f6815dcdd4f">IDI_CSB_SOFTWARE</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00317">idi.c:317</a></div></div>
<div class="ttc" id="idi_8c_html_a8ed95935ad595c4e5dde98ffa26a4689"><div class="ttname"><a href="idi_8c.html#a8ed95935ad595c4e5dde98ffa26a4689">SPI_Status_Write_FIFO_Is_Not_Empty</a></div><div class="ttdeci">BOOL SPI_Status_Write_FIFO_Is_Not_Empty(void)</div><div class="ttdoc">Returns the transmit/write FIFO empty status flag. This function is typically used to wait for the tr...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01572">idi.c:1572</a></div></div>
<div class="ttc" id="idi_8c_html_aae5ed8bffd35508eca131f4d030f8516"><div class="ttname"><a href="idi_8c.html#aae5ed8bffd35508eca131f4d030f8516">EC_EXTRACT_HUMAN_READABLE</a></div><div class="ttdeci">#define EC_EXTRACT_HUMAN_READABLE(symbol, code, message)</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00161">idi.c:161</a></div></div>
<div class="ttc" id="idi_8c_html_a2b82f3c0a4c5c1a46da4c23f43fe1832"><div class="ttname"><a href="idi_8c.html#a2b82f3c0a4c5c1a46da4c23f43fe1832">SPI_BLOCK_SIZE</a></div><div class="ttdeci">#define SPI_BLOCK_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00374">idi.c:374</a></div></div>
<div class="ttc" id="structec__human__readable_html"><div class="ttname"><a href="structec__human__readable.html">ec_human_readable</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00172">idi.c:172</a></div></div>
<div class="ttc" id="idi_8c_html_a5369340b886768c5898ee924ac8c4a7e"><div class="ttname"><a href="idi_8c.html#a5369340b886768c5898ee924ac8c4a7e">IO_Write_U16_Address_Increment</a></div><div class="ttdeci">void IO_Write_U16_Address_Increment(IDI_REG_ENUM location, uint16_t value)</div><div class="ttdoc">Writes uint16_t to I/O ports in a uint8_t succession incrementing the offset address. Macros are used to guide the target implementation. In this case, bus width (which we typcially refer to the port width, which is different than register width) is assumed to be byte (uint8_t) wide. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00866">idi.c:866</a></div></div>
<div class="ttc" id="idi_8c_html_a11970f9c47b6ab73a9b61c5fddc97ffc"><div class="ttname"><a href="idi_8c.html#a11970f9c47b6ab73a9b61c5fddc97ffc">IDI_CMD__FRAM_Save</a></div><div class="ttdeci">static int IDI_CMD__FRAM_Save(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03076">idi.c:3076</a></div></div>
<div class="ttc" id="idi_8c_html_adf764cbdea00d65edcd07bb9953ad2b7a9d8ebe0a43a1971e6e3d738d0877f066"><div class="ttname"><a href="idi_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a9d8ebe0a43a1971e6e3d738d0877f066">ID_DIN</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00116">idi.c:116</a></div></div>
<div class="ttc" id="idi_8c_html_a26d9db16a301c85b1fc35dbb1bba9997"><div class="ttname"><a href="idi_8c.html#a26d9db16a301c85b1fc35dbb1bba9997">SPI_Status_Write</a></div><div class="ttdeci">int SPI_Status_Write(struct spi_status *status)</div><div class="ttdoc">Builds a detailed status data structure of the transmit/write outgoing SPI data FIFO. Reports the quantity of bytes currently in the transmit FIFO, full flag, empty flag, the total size of the FIFO in bytes, and sets tx_status to true indicating that this is status specific to the transmit FIFO. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01449">idi.c:1449</a></div></div>
<div class="ttc" id="idi_8c_html_a75115c9cbc48b9ccd8c73dc4d69128cd"><div class="ttname"><a href="idi_8c.html#a75115c9cbc48b9ccd8c73dc4d69128cd">IO_Read_U16_Address_Increment</a></div><div class="ttdeci">void IO_Read_U16_Address_Increment(IDI_REG_ENUM location, uint16_t *value)</div><div class="ttdoc">Reads uint16_t from I/O ports in a uint8_t succession incrementing the offset address. Macros are used to guide the target implementation. In this case, bus width (which we typcially refer to the port width, which is different than register width) is assumed to be byte (uint8_t) wide. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00887">idi.c:887</a></div></div>
<div class="ttc" id="idi_8c_html_adf764cbdea00d65edcd07bb9953ad2b7ade57b137e54adb85a4eedad470a8a87d"><div class="ttname"><a href="idi_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ade57b137e54adb85a4eedad470a8a87d">ID_SPI</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00117">idi.c:117</a></div></div>
<div class="ttc" id="structcommand__line_html_a5ac083a645d964373f022d03df4849c8"><div class="ttname"><a href="structcommand__line.html#a5ac083a645d964373f022d03df4849c8">command_line::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02443">idi.c:2443</a></div></div>
<div class="ttc" id="structreg__definition_html"><div class="ttname"><a href="structreg__definition.html">reg_definition</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00302">idi.c:302</a></div></div>
<div class="ttc" id="idi_8c_html_aff30ce3e78536dd65f538be3989eb9ea"><div class="ttname"><a href="idi_8c.html#aff30ce3e78536dd65f538be3989eb9ea">idi_svn_revision_string</a></div><div class="ttdeci">static const char idi_svn_revision_string[]</div><div class="ttdoc">Global variables. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00408">idi.c:408</a></div></div>
<div class="ttc" id="idi_8c_html_a82f93449bb944b1e52db87e360bb620c"><div class="ttname"><a href="idi_8c.html#a82f93449bb944b1e52db87e360bb620c">FRAM__Write_Disable</a></div><div class="ttdeci">int FRAM__Write_Disable(void)</div><div class="ttdoc">FRAM Write Latch disable (or clear) command (WRDI). </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02083">idi.c:2083</a></div></div>
<div class="ttc" id="idi_8c_html_a1a51d688850609ce7bdd228893d5ce77a481a4f0500697fe87aaa02bb843ce052"><div class="ttname"><a href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a481a4f0500697fe87aaa02bb843ce052">IDI_BANK_UNDEFINED</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00202">idi.c:202</a></div></div>
<div class="ttc" id="idi_8c_html_a5a1a4138a3312745363773553003149d"><div class="ttname"><a href="idi_8c.html#a5a1a4138a3312745363773553003149d">SPI_Calculate_Half_Clock</a></div><div class="ttdeci">int SPI_Calculate_Half_Clock(double half_clock_request_sec, double *half_clock_actual_sec, double *error, uint16_t *hci)</div><div class="ttdoc">Computes the half clock register value given a requested time interval. It will also produce a &#39;repor...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01084">idi.c:1084</a></div></div>
<div class="ttc" id="idi_8c_html_a9f519b04b7593c82d4037ead8f0e6623"><div class="ttname"><a href="idi_8c.html#a9f519b04b7593c82d4037ead8f0e6623">SPI_Report_Configuration_Text</a></div><div class="ttdeci">int SPI_Report_Configuration_Text(struct spi_cfg *cfg, FILE *out)</div><div class="ttdoc">Creates a human readable report of the SPI configuration data structure. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01346">idi.c:1346</a></div></div>
<div class="ttc" id="idi_8c_html_a09d78e0d3846eef0f05a56ac361bbfeb"><div class="ttname"><a href="idi_8c.html#a09d78e0d3846eef0f05a56ac361bbfeb">SPI_Configuration_Chip_Select_Behavior_Set</a></div><div class="ttdeci">int SPI_Configuration_Chip_Select_Behavior_Set(SPI_CSB_ENUM chip_select_behavior)</div><div class="ttdoc">Sets the chip select behavior to the SPI configuration register. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01231">idi.c:1231</a></div></div>
<div class="ttc" id="idi_8c_html_a2a635742326b18bb61d409dfdb7f294b"><div class="ttname"><a href="idi_8c.html#a2a635742326b18bb61d409dfdb7f294b">CLOCK_PERIOD_SEC</a></div><div class="ttdeci">#define CLOCK_PERIOD_SEC</div><div class="ttdoc">Board clock period as defined by the on-board oscillator which is 50MHz. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00081">idi.c:81</a></div></div>
<div class="ttc" id="idi_8c_html_a7e1e8c7428f97d95c1048515aa248ab0"><div class="ttname"><a href="idi_8c.html#a7e1e8c7428f97d95c1048515aa248ab0">SPI_Data_Write</a></div><div class="ttdeci">int SPI_Data_Write(const void *tx_buffer, size_t size, size_t tx_count, FILE *fd_log)</div><div class="ttdoc">Special case of Write/Read that has a function signature same as fread() or fwrite(). </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01987">idi.c:1987</a></div></div>
<div class="ttc" id="idi_8c_html_a4aff859f461c01bde31699b10f2d602d"><div class="ttname"><a href="idi_8c.html#a4aff859f461c01bde31699b10f2d602d">IDI_CMD__Main_IO_Behavior</a></div><div class="ttdeci">static int IDI_CMD__Main_IO_Behavior(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03543">idi.c:3543</a></div></div>
<div class="ttc" id="structspi__cfg_html_aede15f437dcd3a33a5605c71b3bf3801"><div class="ttname"><a href="structspi__cfg.html#aede15f437dcd3a33a5605c71b3bf3801">spi_cfg::chip_select_behavior</a></div><div class="ttdeci">SPI_CSB_ENUM chip_select_behavior</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00334">idi.c:334</a></div></div>
<div class="ttc" id="idi_8c_html_a4715fd103e903bf93238963a9623101dab45e8afa970f342353f60ca217b37253"><div class="ttname"><a href="idi_8c.html#a4715fd103e903bf93238963a9623101dab45e8afa970f342353f60ca217b37253">IDI_CSB_BUFFER</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00318">idi.c:318</a></div></div>
<div class="ttc" id="idi_8c_html_a4715fd103e903bf93238963a9623101d"><div class="ttname"><a href="idi_8c.html#a4715fd103e903bf93238963a9623101d">SPI_CSB_ENUM</a></div><div class="ttdeci">SPI_CSB_ENUM</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00315">idi.c:315</a></div></div>
<div class="ttc" id="idi_8c_html_a9a96a5eb6fa78887e8b52982f2e33cc2"><div class="ttname"><a href="idi_8c.html#a9a96a5eb6fa78887e8b52982f2e33cc2">idi_cmd_fram</a></div><div class="ttdeci">static struct command_line idi_cmd_fram[]</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03213">idi.c:3213</a></div></div>
<div class="ttc" id="structspi__cfg_html_a2613a037b4632a6d74e89aeb62d12344"><div class="ttname"><a href="structspi__cfg.html#a2613a037b4632a6d74e89aeb62d12344">spi_cfg::sclk_phase</a></div><div class="ttdeci">BOOL sclk_phase</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00332">idi.c:332</a></div></div>
<div class="ttc" id="idi_8c_html_a554231d8a65ca3073edc2aaabf347d54"><div class="ttname"><a href="idi_8c.html#a554231d8a65ca3073edc2aaabf347d54">IO_Read_U8</a></div><div class="ttdeci">int IO_Read_U8(IDI_REG_ENUM location, uint8_t *value)</div><div class="ttdoc">Reads uint8_t from I/O port. Macros are used to guide the target implementation. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00802">idi.c:802</a></div></div>
<div class="ttc" id="idi_8c_html_a050c65e107f0c828f856a231f4b4e788"><div class="ttname"><a href="idi_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a></div><div class="ttdeci">int BOOL</div><div class="ttdoc">The C89 compiler is typically void of these definitions, so we include them here. Defines specific da...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00071">idi.c:71</a></div></div>
<div class="ttc" id="idi_8c_html_a3e3475d2cc10efb49b125c2abb27ca09"><div class="ttname"><a href="idi_8c.html#a3e3475d2cc10efb49b125c2abb27ca09">SPI_Configuration_Initialize</a></div><div class="ttdeci">int SPI_Configuration_Initialize(struct spi_cfg *cfg)</div><div class="ttdoc">Initializes the SPI configuration data structure. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01408">idi.c:1408</a></div></div>
<div class="ttc" id="idi_8c_html_abea0d9db987eaf2b5f6a6696bbed5993"><div class="ttname"><a href="idi_8c.html#abea0d9db987eaf2b5f6a6696bbed5993">FRAM_Report</a></div><div class="ttdeci">int FRAM_Report(uint16_t address, size_t length, FILE *out)</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02329">idi.c:2329</a></div></div>
<div class="ttc" id="idi_8c_html_adaff99746c6b7de99d49bf298156b6f5a4fed3284189cb712e0edee0c9f08446b"><div class="ttname"><a href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5a4fed3284189cb712e0edee0c9f08446b">REG_DIR_WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00209">idi.c:209</a></div></div>
<div class="ttc" id="idi_8c_html_adaff99746c6b7de99d49bf298156b6f5af1ec2b1dd9bbade4c573f07aec924113"><div class="ttname"><a href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5af1ec2b1dd9bbade4c573f07aec924113">REG_DIR_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00208">idi.c:208</a></div></div>
<div class="ttc" id="idi_8c_html_ad86d10585f6c367cfc4490a5366f1d25"><div class="ttname"><a href="idi_8c.html#ad86d10585f6c367cfc4490a5366f1d25">SPI_Calculate_Clock</a></div><div class="ttdeci">int SPI_Calculate_Clock(double clock_request_hz, double *clock_actual_hz, double *error, uint16_t *hci)</div><div class="ttdoc">Computes the SPI clock half clock register value given a requested SPI clock frequency. It will also produce a &#39;report&#39; indicating the actual value (due to integer resolution) as well as a computed error between requested and actual. The eror can be used to determine whether timing constraints are met. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01121">idi.c:1121</a></div></div>
<div class="ttc" id="idi_8c_html_acc51bf8337741aa0f73036c6707efc84"><div class="ttname"><a href="idi_8c.html#acc51bf8337741aa0f73036c6707efc84">SPI_FIFO_Read</a></div><div class="ttdeci">int SPI_FIFO_Read(const void *buffer, size_t size, size_t count, FILE *fd_log)</div><div class="ttdoc">Reads from the SPI receive/read data FIFO. It does not attempt to correlate the number of transmit by...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01677">idi.c:1677</a></div></div>
<div class="ttc" id="idi_8c_html_a4f457883748297218a1a747a01671790"><div class="ttname"><a href="idi_8c.html#a4f457883748297218a1a747a01671790">SPI_Status_Read_FIFO_Status</a></div><div class="ttdeci">void SPI_Status_Read_FIFO_Status(BOOL *empty, size_t *bytes_available)</div><div class="ttdoc">Returns the complete read/receive FIFO status. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01524">idi.c:1524</a></div></div>
<div class="ttc" id="idi_8c_html_ae5af3fdd5b69319183d08077dbf622f4"><div class="ttname"><a href="idi_8c.html#ae5af3fdd5b69319183d08077dbf622f4">FRAM__Read_Status_Register</a></div><div class="ttdeci">int FRAM__Read_Status_Register(uint8_t *status)</div><div class="ttdoc">Read the FRAM status register and output the value. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02098">idi.c:2098</a></div></div>
<div class="ttc" id="idi_8c_html_a68ed5a64a223c6c9c2ef8114ca1b8140"><div class="ttname"><a href="idi_8c.html#a68ed5a64a223c6c9c2ef8114ca1b8140">idi_bank_symbol_names</a></div><div class="ttdeci">static const char * idi_bank_symbol_names[]</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00418">idi.c:418</a></div></div>
<div class="ttc" id="structidi__dataset_html_a90f8e8aa30448abeaead3953145c5ce6"><div class="ttname"><a href="structidi__dataset.html#a90f8e8aa30448abeaead3953145c5ce6">idi_dataset::message</a></div><div class="ttdeci">char * message[IDI_MESSAGE_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00394">idi.c:394</a></div></div>
<div class="ttc" id="idi_8c_html_a1b725a3b4e3895892e9cb3e41abc9218"><div class="ttname"><a href="idi_8c.html#a1b725a3b4e3895892e9cb3e41abc9218">IO_Write_U16_Address_Fixed</a></div><div class="ttdeci">void IO_Write_U16_Address_Fixed(IDI_REG_ENUM location, uint16_t value)</div><div class="ttdoc">Writes uint16_t to I/O ports in a uint8_t succession to the same address location. Macros are used to guide the target implementation. In this case, bus width (which we typcially refer to the port width, which is different than register width) is assumed to be byte (uint8_t) wide. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00910">idi.c:910</a></div></div>
<div class="ttc" id="idi_8c_html_abc6126af1d45847bc59afa0aa3216b04a61beeb8caa7eef5ea8ccec0c05cd142e"><div class="ttname"><a href="idi_8c.html#abc6126af1d45847bc59afa0aa3216b04a61beeb8caa7eef5ea8ccec0c05cd142e">HEX_DUMP_BYTES_PER_LINE</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00570">idi.c:570</a></div></div>
<div class="ttc" id="idi_8c_html_a8cf2cdb8e3ac9dd8cdbefa57b91b487d"><div class="ttname"><a href="idi_8c.html#a8cf2cdb8e3ac9dd8cdbefa57b91b487d">FRAM__Memory_Write</a></div><div class="ttdeci">int FRAM__Memory_Write(uint16_t address, size_t count, uint8_t *buffer)</div><div class="ttdoc">Writes data from buffer to FRAM memory. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02187">idi.c:2187</a></div></div>
<div class="ttc" id="idi_8c_html_aaefc0ba72d5e1d1a732a55dd7b52c4e1"><div class="ttname"><a href="idi_8c.html#aaefc0ba72d5e1d1a732a55dd7b52c4e1">IDI_Command_Line_FRAM</a></div><div class="ttdeci">int IDI_Command_Line_FRAM(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03232">idi.c:3232</a></div></div>
<div class="ttc" id="idi_8c_html_aa2f4bfa13ac3db30467e75cd0f287e26"><div class="ttname"><a href="idi_8c.html#aa2f4bfa13ac3db30467e75cd0f287e26">IDI_CMD__FRAM_WRDI</a></div><div class="ttdeci">static int IDI_CMD__FRAM_WRDI(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03157">idi.c:3157</a></div></div>
<div class="ttc" id="idi_8c_html_a8e322fdc87a9fc7da0cebe8d074693e2"><div class="ttname"><a href="idi_8c.html#a8e322fdc87a9fc7da0cebe8d074693e2">IDI_CMD__SPI_Config_End_Cycle_Delay_Sec</a></div><div class="ttdeci">static int IDI_CMD__SPI_Config_End_Cycle_Delay_Sec(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02536">idi.c:2536</a></div></div>
<div class="ttc" id="structspi__cfg_html_a0b6f06a341aa4e9fbbbb33b417b5f722"><div class="ttname"><a href="structspi__cfg.html#a0b6f06a341aa4e9fbbbb33b417b5f722">spi_cfg::end_cycle_delay</a></div><div class="ttdeci">uint8_t end_cycle_delay</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00335">idi.c:335</a></div></div>
<div class="ttc" id="idi_8c_html_a674bbccb1f788936c394607cd75c59f7"><div class="ttname"><a href="idi_8c.html#a674bbccb1f788936c394607cd75c59f7">SPI_FIFO_Write</a></div><div class="ttdeci">int SPI_FIFO_Write(const void *buffer, size_t size, size_t count, FILE *fd_log)</div><div class="ttdoc">Writes specifically to the SPI transmit/write data FIFO. It does not attempt to correlate the number ...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01628">idi.c:1628</a></div></div>
<div class="ttc" id="idi_8c_html_a668e4784c156d76f27de8e047391007e"><div class="ttname"><a href="idi_8c.html#a668e4784c156d76f27de8e047391007e">IDI_CMD__SPI_ID</a></div><div class="ttdeci">static int IDI_CMD__SPI_ID(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02461">idi.c:2461</a></div></div>
<div class="ttc" id="idi_8c_html_a4715fd103e903bf93238963a9623101da72c215ca12871c8b04f9a1324f80cb2e"><div class="ttname"><a href="idi_8c.html#a4715fd103e903bf93238963a9623101da72c215ca12871c8b04f9a1324f80cb2e">IDI_CSB_UINT8</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00319">idi.c:319</a></div></div>
<div class="ttc" id="idi_8c_html_a1a51d688850609ce7bdd228893d5ce77a742cd72c00ec6a6eff09eda64e6636a8"><div class="ttname"><a href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a742cd72c00ec6a6eff09eda64e6636a8">IDI_BANK_6</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00199">idi.c:199</a></div></div>
<div class="ttc" id="idi_8c_html_a898d8519b441ee16e816759982951490"><div class="ttname"><a href="idi_8c.html#a898d8519b441ee16e816759982951490">EC_Code_To_Human_Readable</a></div><div class="ttdeci">const char * EC_Code_To_Human_Readable(EC_ENUM error_code)</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00626">idi.c:626</a></div></div>
<div class="ttc" id="idi_8c_html_a5c3569de8003fff3301140897d842d79"><div class="ttname"><a href="idi_8c.html#a5c3569de8003fff3301140897d842d79">IDI_CMD__SPI_FIFO</a></div><div class="ttdeci">static int IDI_CMD__SPI_FIFO(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02865">idi.c:2865</a></div></div>
<div class="ttc" id="structidi__dataset_html_a4efa21fb4be298d529ae04ed2ca3466e"><div class="ttname"><a href="structidi__dataset.html#a4efa21fb4be298d529ae04ed2ca3466e">idi_dataset::fram_block</a></div><div class="ttdeci">uint8_t fram_block[FRAM_BLOCK_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00388">idi.c:388</a></div></div>
<div class="ttc" id="idi_8c_html_a07717d410edbdf91e98db3fdb526a0cc"><div class="ttname"><a href="idi_8c.html#a07717d410edbdf91e98db3fdb526a0cc">IDI_Register_Report_CSV</a></div><div class="ttdeci">int IDI_Register_Report_CSV(const struct reg_definition *table, FILE *out)</div><div class="ttdoc">Outputs a human readable CSV to the desired output file or stdout. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00485">idi.c:485</a></div></div>
<div class="ttc" id="idi_8c_html_a1a51d688850609ce7bdd228893d5ce77abda1f233f58a0a0e1833d61214b1b4dc"><div class="ttname"><a href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77abda1f233f58a0a0e1833d61214b1b4dc">IDI_BANK_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00201">idi.c:201</a></div></div>
<div class="ttc" id="idi_8c_html_a1a51d688850609ce7bdd228893d5ce77"><div class="ttname"><a href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77">IDI_BANK_ENUM</a></div><div class="ttdeci">IDI_BANK_ENUM</div><div class="ttdoc">The bank register mapping. This mapping is upwardly compatible with the legacy hardware banking regis...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00191">idi.c:191</a></div></div>
<div class="ttc" id="structspi__status_html_a771649fbbbbf3161bbddd4d49db51552"><div class="ttname"><a href="structspi__status.html#a771649fbbbbf3161bbddd4d49db51552">spi_status::fifo_size</a></div><div class="ttdeci">int fifo_size</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00347">idi.c:347</a></div></div>
<div class="ttc" id="idi_8c_html_a148e18c77ccddbcf64525e077490f25a"><div class="ttname"><a href="idi_8c.html#a148e18c77ccddbcf64525e077490f25a">IDI_CMD__FRAM_Init</a></div><div class="ttdeci">static int IDI_CMD__FRAM_Init(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03119">idi.c:3119</a></div></div>
<div class="ttc" id="idi_8c_html_a9f8f3754c67705b230c1f04d390a5900"><div class="ttname"><a href="idi_8c.html#a9f8f3754c67705b230c1f04d390a5900">SPI_Status_Read_FIFO_Is_Not_Empty</a></div><div class="ttdeci">BOOL SPI_Status_Read_FIFO_Is_Not_Empty(void)</div><div class="ttdoc">Returns the receive/read FIFO empty status flag. This function is typically used to determine if the ...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01587">idi.c:1587</a></div></div>
<div class="ttc" id="idi_8c_html_a9486d70eec81c27defc04c1e0ebbcf71"><div class="ttname"><a href="idi_8c.html#a9486d70eec81c27defc04c1e0ebbcf71">FRAM_Set</a></div><div class="ttdeci">int FRAM_Set(size_t count, uint8_t *buffer)</div><div class="ttdoc">This function will be used when creating a memory pool so that as blocks are allocated one can determ...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02273">idi.c:2273</a></div></div>
<div class="ttc" id="idi_8c_html_a0dc0c4180557014ec4c687dcc8d326e7"><div class="ttname"><a href="idi_8c.html#a0dc0c4180557014ec4c687dcc8d326e7">SPI_Data_Read</a></div><div class="ttdeci">int SPI_Data_Read(const void *rx_buffer, size_t size, size_t rx_size, FILE *fd_log)</div><div class="ttdoc">Special case of Write/Read that has a function signature same as fread() or fwrite(). </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02023">idi.c:2023</a></div></div>
<div class="ttc" id="idi_8c_html_a99f6186befa8e74608716454a91c44bd"><div class="ttname"><a href="idi_8c.html#a99f6186befa8e74608716454a91c44bd">IDI_CMD__SPI_Config_Clock_Hz</a></div><div class="ttdeci">static int IDI_CMD__SPI_Config_Clock_Hz(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02499">idi.c:2499</a></div></div>
<div class="ttc" id="idi_8c_html_a2db447f8544aaf996c1f9526db749d54"><div class="ttname"><a href="idi_8c.html#a2db447f8544aaf996c1f9526db749d54">IDI_Command_Line_Main</a></div><div class="ttdeci">int IDI_Command_Line_Main(int argc, char *argv[])</div><div class="ttdoc">Processes and dispatches the top level of the command and passes the remaining string list onto speci...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03651">idi.c:3651</a></div></div>
<div class="ttc" id="idi_8c_html_a0ddf1224851353fc92bfbff6f499fa97"><div class="ttname"><a href="idi_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a></div><div class="ttdeci">int main(int argc, char *argv[])</div><div class="ttdoc">Processes and dispatches the top level of the command and passes the remaining string list onto speci...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03871">idi.c:3871</a></div></div>
<div class="ttc" id="structreg__definition_html_a09e69f821de1fa6dc424798a7a3dec86"><div class="ttname"><a href="structreg__definition.html#a09e69f821de1fa6dc424798a7a3dec86">reg_definition::bank</a></div><div class="ttdeci">IDI_BANK_ENUM bank</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00306">idi.c:306</a></div></div>
<div class="ttc" id="idi_8c_html_ac0b401f4d27a710797a76887edbc77da"><div class="ttname"><a href="idi_8c.html#ac0b401f4d27a710797a76887edbc77da">IDI_DIN_QTY</a></div><div class="ttdeci">#define IDI_DIN_QTY</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00356">idi.c:356</a></div></div>
<div class="ttc" id="structidi__dataset_html_a524ca5c3ea3d76688ccecb7f299f31f4"><div class="ttname"><a href="structidi__dataset.html#a524ca5c3ea3d76688ccecb7f299f31f4">idi_dataset::spi_cfg</a></div><div class="ttdeci">struct spi_cfg spi_cfg</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00379">idi.c:379</a></div></div>
<div class="ttc" id="idi_8c_html_a5321c7cef8321867817b5c9008c27a1a"><div class="ttname"><a href="idi_8c.html#a5321c7cef8321867817b5c9008c27a1a">ec_unknown</a></div><div class="ttdeci">static const char ec_unknown[]</div><div class="ttdoc">Translates an error code into a human readable message. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00624">idi.c:624</a></div></div>
<div class="ttc" id="idi_8c_html_aed68a86ac0a1465fe0d35a3ab48079dd"><div class="ttname"><a href="idi_8c.html#aed68a86ac0a1465fe0d35a3ab48079dd">IDI_CMD__Main_Base</a></div><div class="ttdeci">static int IDI_CMD__Main_Base(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03583">idi.c:3583</a></div></div>
<div class="ttc" id="idi_8c_html_a547a51422c2fdfe3201983874dfa1a38"><div class="ttname"><a href="idi_8c.html#a547a51422c2fdfe3201983874dfa1a38">SPI_Status_Write_FIFO_Status</a></div><div class="ttdeci">void SPI_Status_Write_FIFO_Status(BOOL *full, BOOL *empty, size_t *bytes_in_fifo)</div><div class="ttdoc">Returns the complete write/transmit FIFO status. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01480">idi.c:1480</a></div></div>
<div class="ttc" id="idi_8c_html_a356455eaafd272310dac8a96d94b179d"><div class="ttname"><a href="idi_8c.html#a356455eaafd272310dac8a96d94b179d">IDI_CMD__SPI_Config_Mode</a></div><div class="ttdeci">static int IDI_CMD__SPI_Config_Mode(int argc, char *argv[])</div><div class="ttdoc">CPOL CPHA MODE 0 0 0 1 0 1 2 1 0 3 1 1. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02586">idi.c:2586</a></div></div>
<div class="ttc" id="idi_8c_html_a1a51d688850609ce7bdd228893d5ce77a1fc2d3667bde9f8fbfbbb4d1322eaa46"><div class="ttname"><a href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a1fc2d3667bde9f8fbfbbb4d1322eaa46">IDI_BANK_7</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00200">idi.c:200</a></div></div>
<div class="ttc" id="idi_8c_html_a59716a10cd7a8c42425e1ceaefd50dc4"><div class="ttname"><a href="idi_8c.html#a59716a10cd7a8c42425e1ceaefd50dc4">IDI_Command_Line_Register_Transaction</a></div><div class="ttdeci">int IDI_Command_Line_Register_Transaction(int argc, char *argv[])</div><div class="ttdoc">Either reads or writes a register using the form: idi <register acronym>=""> []. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03488">idi.c:3488</a></div></div>
<div class="ttc" id="structreg__definition_html_a2a2bd3185ded23ec5bf2964bac848b7f"><div class="ttname"><a href="structreg__definition.html#a2a2bd3185ded23ec5bf2964bac848b7f">reg_definition::acronym</a></div><div class="ttdeci">char * acronym</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00309">idi.c:309</a></div></div>
<div class="ttc" id="idi_8c_html_a9708b509decc6f844ce474a85af2484b"><div class="ttname"><a href="idi_8c.html#a9708b509decc6f844ce474a85af2484b">IO_Get_Symbol_Name</a></div><div class="ttdeci">static char * IO_Get_Symbol_Name(IDI_REG_ENUM location)</div><div class="ttdoc">Translates a register enumerated symbol into a string that is the same as the enumerated symbol used ...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00692">idi.c:692</a></div></div>
<div class="ttc" id="idi_8c_html_a64361bd44229521030aaf0c373dbfaa3"><div class="ttname"><a href="idi_8c.html#a64361bd44229521030aaf0c373dbfaa3">FRAM__Memory_Read</a></div><div class="ttdeci">int FRAM__Memory_Read(uint16_t address, size_t count, uint8_t *buffer)</div><div class="ttdoc">Reads data from FRAM memory to the output buffer. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02142">idi.c:2142</a></div></div>
<div class="ttc" id="idi_8c_html_a89241c518880078575d736e7171ab068"><div class="ttname"><a href="idi_8c.html#a89241c518880078575d736e7171ab068">IDI_Initialization</a></div><div class="ttdeci">int IDI_Initialization(void)</div><div class="ttdoc">Runs upon application startup. It restores the idi_dataset data structure or if the file cannot be fo...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03836">idi.c:3836</a></div></div>
<div class="ttc" id="idi_8c_html_a550c9fd5faeabbeb5e6b0ae9e6b2557a"><div class="ttname"><a href="idi_8c.html#a550c9fd5faeabbeb5e6b0ae9e6b2557a">IDI_CMD__FRAM_RDSR</a></div><div class="ttdeci">static int IDI_CMD__FRAM_RDSR(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03169">idi.c:3169</a></div></div>
<div class="ttc" id="structspi__cfg_html_adc10d917ca7551b41164711a54684a51"><div class="ttname"><a href="structspi__cfg.html#adc10d917ca7551b41164711a54684a51">spi_cfg::end_delay_ns</a></div><div class="ttdeci">double end_delay_ns</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00339">idi.c:339</a></div></div>
<div class="ttc" id="idi_8c_html_ab3d8b6fa8b84e23203bb0f2ee9b7654c"><div class="ttname"><a href="idi_8c.html#ab3d8b6fa8b84e23203bb0f2ee9b7654c">IDI_Command_Line_SPI</a></div><div class="ttdeci">int IDI_Command_Line_SPI(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03017">idi.c:3017</a></div></div>
<div class="ttc" id="structspi__cfg_html_aaed71f77ad7200a8f4bf0f1cdd0fb328"><div class="ttname"><a href="structspi__cfg.html#aaed71f77ad7200a8f4bf0f1cdd0fb328">spi_cfg::clock_hz</a></div><div class="ttdeci">double clock_hz</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00338">idi.c:338</a></div></div>
<div class="ttc" id="structspi__status_html"><div class="ttname"><a href="structspi__status.html">spi_status</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00342">idi.c:342</a></div></div>
<div class="ttc" id="idi_8c_html_a5dfe12489f8e7e96a20e3dbe6810e90f"><div class="ttname"><a href="idi_8c.html#a5dfe12489f8e7e96a20e3dbe6810e90f">IDI_Command_Line_Set</a></div><div class="ttdeci">int IDI_Command_Line_Set(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03616">idi.c:3616</a></div></div>
<div class="ttc" id="idi_8c_html_a3bbc3691f100386d03819418bd7f7a59"><div class="ttname"><a href="idi_8c.html#a3bbc3691f100386d03819418bd7f7a59">SPI_Data_Write_Read_Helper</a></div><div class="ttdeci">static int SPI_Data_Write_Read_Helper(size_t size, size_t tx_count, const void *tx_buffer, size_t rx_size, const void *rx_buffer, BOOL active_tx, BOOL active_rx, SPI_CSB_ENUM csb)</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01716">idi.c:1716</a></div></div>
<div class="ttc" id="idi_8c_html_aa1120a9ab4e78d6c65dc4fd2a5445d2f"><div class="ttname"><a href="idi_8c.html#aa1120a9ab4e78d6c65dc4fd2a5445d2f">IDI_CMD__FRAM_WREN</a></div><div class="ttdeci">static int IDI_CMD__FRAM_WREN(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03145">idi.c:3145</a></div></div>
<div class="ttc" id="idi_8c_html_aeca81fe3de2af7764b438c3914b01b18"><div class="ttname"><a href="idi_8c.html#aeca81fe3de2af7764b438c3914b01b18">IDI_CMD__SPI_Data</a></div><div class="ttdeci">static int IDI_CMD__SPI_Data(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02813">idi.c:2813</a></div></div>
<div class="ttc" id="structreg__definition_html_a7e9d3f82b1d2ab1009d4df11f1ba7db6"><div class="ttname"><a href="structreg__definition.html#a7e9d3f82b1d2ab1009d4df11f1ba7db6">reg_definition::symbol_name</a></div><div class="ttdeci">char * symbol_name</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00308">idi.c:308</a></div></div>
<div class="ttc" id="structdin__cfg_html"><div class="ttname"><a href="structdin__cfg.html">din_cfg</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00359">idi.c:359</a></div></div>
<div class="ttc" id="idi_8c_html_ace0b0cdb3b5ab2c5c7bcf9a02b8a4f33"><div class="ttname"><a href="idi_8c.html#ace0b0cdb3b5ab2c5c7bcf9a02b8a4f33">IDI_Symbol_Name_Bank</a></div><div class="ttdeci">static const char * IDI_Symbol_Name_Bank(IDI_BANK_ENUM bank)</div><div class="ttdoc">Outputs a human readable CSV to the desired output file or stdout. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00456">idi.c:456</a></div></div>
<div class="ttc" id="idi_8c_html_ae0b87251c6439330b9287fc12cc306dd"><div class="ttname"><a href="idi_8c.html#ae0b87251c6439330b9287fc12cc306dd">FRAM_Memory_To_File</a></div><div class="ttdeci">int FRAM_Memory_To_File(uint16_t address, size_t length, FILE *binary)</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02362">idi.c:2362</a></div></div>
<div class="ttc" id="structidi__dataset_html_a27de55c6cee77e53ec9631f1f489a97a"><div class="ttname"><a href="structidi__dataset.html#a27de55c6cee77e53ec9631f1f489a97a">idi_dataset::base_address</a></div><div class="ttdeci">uint16_t base_address</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00381">idi.c:381</a></div></div>
<div class="ttc" id="structidi__dataset_html_a17f90bb8bd6a75c9d05d2df69b5e6ba3"><div class="ttname"><a href="structidi__dataset.html#a17f90bb8bd6a75c9d05d2df69b5e6ba3">idi_dataset::spi_id</a></div><div class="ttdeci">uint16_t spi_id</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00382">idi.c:382</a></div></div>
<div class="ttc" id="idi_8c_html_a16689154c729ce352ec6d746b8ab663e"><div class="ttname"><a href="idi_8c.html#a16689154c729ce352ec6d746b8ab663e">EC_ENUM</a></div><div class="ttdeci">EC_ENUM</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00167">idi.c:167</a></div></div>
<div class="ttc" id="idi_8c_html_aa1471598d3657b31cd7ef4f354011212"><div class="ttname"><a href="idi_8c.html#aa1471598d3657b31cd7ef4f354011212">SPI_Status_Write_FIFO_Is_Full</a></div><div class="ttdeci">BOOL SPI_Status_Write_FIFO_Is_Full(void)</div><div class="ttdoc">Returns the transmit/write FIFO full status flag. It is preferable to use the SPI_Status_Write() or S...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01501">idi.c:1501</a></div></div>
<div class="ttc" id="structidi__dataset_html_a6513343c81785c28903fc3c4d1d50206"><div class="ttname"><a href="structidi__dataset.html#a6513343c81785c28903fc3c4d1d50206">idi_dataset::io_simulate</a></div><div class="ttdeci">BOOL io_simulate</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00383">idi.c:383</a></div></div>
<div class="ttc" id="idi_8c_html_a49429b2baa0cec368650dc945b1f77c7"><div class="ttname"><a href="idi_8c.html#a49429b2baa0cec368650dc945b1f77c7">IDI_DIN_GROUP_QTY</a></div><div class="ttdeci">#define IDI_DIN_GROUP_QTY</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00355">idi.c:355</a></div></div>
<div class="ttc" id="idi_8c_html_abbe4aec5ed66dae530dd2a8c8c6c1c92"><div class="ttname"><a href="idi_8c.html#abbe4aec5ed66dae530dd2a8c8c6c1c92">IDI_DIN_Channel_Get</a></div><div class="ttdeci">static int IDI_DIN_Channel_Get(size_t channel, BOOL *value)</div><div class="ttdoc">Obtains and reports a single digital input channel. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00992">idi.c:992</a></div></div>
<div class="ttc" id="structidi__dataset_html_ad5d4eafc81d2a1f443f9a5a09b56efe0"><div class="ttname"><a href="structidi__dataset.html#ad5d4eafc81d2a1f443f9a5a09b56efe0">idi_dataset::io_report</a></div><div class="ttdeci">BOOL io_report</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00384">idi.c:384</a></div></div>
<div class="ttc" id="idi_8c_html_a34fb89e26c5f0f9ae01c0d1c779397bf"><div class="ttname"><a href="idi_8c.html#a34fb89e26c5f0f9ae01c0d1c779397bf">IO_Read_U16_Address_Fixed</a></div><div class="ttdeci">void IO_Read_U16_Address_Fixed(IDI_REG_ENUM location, uint16_t *value)</div><div class="ttdoc">Reads uint16_t from I/O ports in a uint8_t succession to the same address location. Macros are used to guide the target implementation. In this case, bus width (which we typcially refer to the port width, which is different than register width) is assumed to be byte (uint8_t) wide. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00931">idi.c:931</a></div></div>
<div class="ttc" id="idi_8c_html_a5817326fd7bd59487a4fefc89ecbc4d3"><div class="ttname"><a href="idi_8c.html#a5817326fd7bd59487a4fefc89ecbc4d3">SPI_Configuration_Set</a></div><div class="ttdeci">int SPI_Configuration_Set(struct spi_cfg *cfg)</div><div class="ttdoc">Commits the configuration data structure to the hardware. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01254">idi.c:1254</a></div></div>
<div class="ttc" id="idi_8c_html_a606ff80c6af794676d2609d022254961"><div class="ttname"><a href="idi_8c.html#a606ff80c6af794676d2609d022254961">IDI_CMD__DIN_ID</a></div><div class="ttdeci">static int IDI_CMD__DIN_ID(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03269">idi.c:3269</a></div></div>
<div class="ttc" id="idi_8c_html_a7e74342366750cf212bced8dcccb433d"><div class="ttname"><a href="idi_8c.html#a7e74342366750cf212bced8dcccb433d">FRAM__Read_ID</a></div><div class="ttdeci">int FRAM__Read_ID(uint32_t *id)</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02228">idi.c:2228</a></div></div>
<div class="ttc" id="structdin__cfg_html_af2843635bd1b2022a5e6dcaec702d780"><div class="ttname"><a href="structdin__cfg.html#af2843635bd1b2022a5e6dcaec702d780">din_cfg::interrupt_enable</a></div><div class="ttdeci">BOOL interrupt_enable</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00364">idi.c:364</a></div></div>
<div class="ttc" id="structidi__dataset_html"><div class="ttname"><a href="structidi__dataset.html">idi_dataset</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00376">idi.c:376</a></div></div>
<div class="ttc" id="idi_8c_html_af783ed809568388ad1d1e0b990458811"><div class="ttname"><a href="idi_8c.html#af783ed809568388ad1d1e0b990458811">SPI_Report_Status_Text</a></div><div class="ttdeci">int SPI_Report_Status_Text(struct spi_status *status, FILE *out)</div><div class="ttdoc">Produces a human readable report of the SPI status data structure. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01384">idi.c:1384</a></div></div>
<div class="ttc" id="idi_8c_html_ac9892490c6b2d5ee1f3490323aa00965"><div class="ttname"><a href="idi_8c.html#ac9892490c6b2d5ee1f3490323aa00965">SPI_IsNotPresent</a></div><div class="ttdeci">int SPI_IsNotPresent(void)</div><div class="ttdoc">Reports if the SPI component is available within the register space by matching a known ID...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01062">idi.c:1062</a></div></div>
<div class="ttc" id="idi_8c_html_a1a51d688850609ce7bdd228893d5ce77a8dc321bd5fd3c430335173151324376d"><div class="ttname"><a href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a8dc321bd5fd3c430335173151324376d">IDI_BANK_1</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00194">idi.c:194</a></div></div>
<div class="ttc" id="idi_8c_html_a9a0f7ac60fdc2ff32c1cf9cfb7bfdad3"><div class="ttname"><a href="idi_8c.html#a9a0f7ac60fdc2ff32c1cf9cfb7bfdad3">FRAM__Write_Status_Register</a></div><div class="ttdeci">int FRAM__Write_Status_Register(uint8_t status)</div><div class="ttdoc">Write to the FRAM status register. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02119">idi.c:2119</a></div></div>
<div class="ttc" id="idi_8c_html_a50b862cbcc29146e70e7543208ca7e81"><div class="ttname"><a href="idi_8c.html#a50b862cbcc29146e70e7543208ca7e81">SPI_Calculate_End_Cycle_Delay</a></div><div class="ttdeci">int SPI_Calculate_End_Cycle_Delay(double spi_half_clock_interval_sec, double delay_request_sec, double *delay_actual_sec, double *error, uint8_t *ecd)</div><div class="ttdoc">Computes the time delay at the end of each byte transmitted. It will only output the parameters whose...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01178">idi.c:1178</a></div></div>
<div class="ttc" id="structidi__dataset_html_a02b7232561c6ed9540ce106d328eedf8"><div class="ttname"><a href="structidi__dataset.html#a02b7232561c6ed9540ce106d328eedf8">idi_dataset::svn_revision_string</a></div><div class="ttdeci">const char * svn_revision_string</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00385">idi.c:385</a></div></div>
<div class="ttc" id="idi_8c_html_a7a7a8212bf3a00a8a97ac4fd9d8b0f29"><div class="ttname"><a href="idi_8c.html#a7a7a8212bf3a00a8a97ac4fd9d8b0f29">FRAM_BLOCK_SIZE</a></div><div class="ttdeci">#define FRAM_BLOCK_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00372">idi.c:372</a></div></div>
<div class="ttc" id="idi_8c_html_acf1a32c487efc5306d57219a57d57b60"><div class="ttname"><a href="idi_8c.html#acf1a32c487efc5306d57219a57d57b60">strcmpi</a></div><div class="ttdeci">#define strcmpi</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00036">idi.c:36</a></div></div>
<div class="ttc" id="idi_8c_html_ae8a4c4d867aba3d602dc4e74226b7587"><div class="ttname"><a href="idi_8c.html#ae8a4c4d867aba3d602dc4e74226b7587">IDI_CMD__SPI_Config_Chip_Select_Behavior</a></div><div class="ttdeci">static int IDI_CMD__SPI_Config_Chip_Select_Behavior(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02717">idi.c:2717</a></div></div>
<div class="ttc" id="idi_8c_html_ad7a5bbb7485eb1a88ee66ff36d7c3d61"><div class="ttname"><a href="idi_8c.html#ad7a5bbb7485eb1a88ee66ff36d7c3d61">IDI_CMD__FRAM_WRSR</a></div><div class="ttdeci">static int IDI_CMD__FRAM_WRSR(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03185">idi.c:3185</a></div></div>
<div class="ttc" id="idi_8c_html_a8c2b4e5773d4dd8e0ea0623c2f27e02d"><div class="ttname"><a href="idi_8c.html#a8c2b4e5773d4dd8e0ea0623c2f27e02d">idi_cmd_din</a></div><div class="ttdeci">static struct command_line idi_cmd_din[]</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03411">idi.c:3411</a></div></div>
<div class="ttc" id="structdin__cfg_html_a2ffbf2409b32f9aeccf526a775fb5a61"><div class="ttname"><a href="structdin__cfg.html#a2ffbf2409b32f9aeccf526a775fb5a61">din_cfg::falling_edge</a></div><div class="ttdeci">BOOL falling_edge</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00363">idi.c:363</a></div></div>
<div class="ttc" id="idi_8c_html_adaff99746c6b7de99d49bf298156b6f5a74f81f4c5a0aed3f67492123def70753"><div class="ttname"><a href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5a74f81f4c5a0aed3f67492123def70753">REG_DIR_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00207">idi.c:207</a></div></div>
<div class="ttc" id="structspi__cfg_html_abbceffb19dd814b30b890c4c3710a229"><div class="ttname"><a href="structspi__cfg.html#abbceffb19dd814b30b890c4c3710a229">spi_cfg::sdo_polarity</a></div><div class="ttdeci">BOOL sdo_polarity</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00330">idi.c:330</a></div></div>
<div class="ttc" id="idi_8c_html_a9b645d8637fdc45f72c0109fbd730209"><div class="ttname"><a href="idi_8c.html#a9b645d8637fdc45f72c0109fbd730209">IDI_Termination</a></div><div class="ttdeci">int IDI_Termination(void)</div><div class="ttdoc">Runs upon application exit. It saves the idi_dataset data structure. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03809">idi.c:3809</a></div></div>
<div class="ttc" id="structec__human__readable_html_a557bf51119126ad88e40be2219c3fdb5"><div class="ttname"><a href="structec__human__readable.html#a557bf51119126ad88e40be2219c3fdb5">ec_human_readable::error_code</a></div><div class="ttdeci">EC_ENUM error_code</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00174">idi.c:174</a></div></div>
<div class="ttc" id="idi_8c_html_a9a67f3933310bd9859d7e25eca8020bb"><div class="ttname"><a href="idi_8c.html#a9a67f3933310bd9859d7e25eca8020bb">idi_cmd_main</a></div><div class="ttdeci">static struct command_line idi_cmd_main[]</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l03604">idi.c:3604</a></div></div>
<div class="ttc" id="idi_8c_html_aad52cf9d5215e8c1e3387967b91c02fd"><div class="ttname"><a href="idi_8c.html#aad52cf9d5215e8c1e3387967b91c02fd">IDI_DIN_IsNotPresent</a></div><div class="ttdeci">BOOL IDI_DIN_IsNotPresent(void)</div><div class="ttdoc">Determines if the DIN component and/or board is present. Returns true if not present (i...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00975">idi.c:975</a></div></div>
<div class="ttc" id="idi_8c_html_a0d405a6006a6ef14c53c330e618bc1df"><div class="ttname"><a href="idi_8c.html#a0d405a6006a6ef14c53c330e618bc1df">SPI_Status_Read</a></div><div class="ttdeci">int SPI_Status_Read(struct spi_status *status)</div><div class="ttdoc">Builds a detailed status data structure of the receive/read incoming SPI data FIFO. Reports the quantity of bytes currently in the receive FIFO, full flag, empty flag, the total size of the FIFO in bytes, and sets tx_status to false indicating that this is status specific to the receive FIFO. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01550">idi.c:1550</a></div></div>
<div class="ttc" id="structreg__definition_html_ad01d09ace616a7eef1498e2c04ad6e6d"><div class="ttname"><a href="structreg__definition.html#ad01d09ace616a7eef1498e2c04ad6e6d">reg_definition::physical_offset</a></div><div class="ttdeci">uint16_t physical_offset</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00307">idi.c:307</a></div></div>
<div class="ttc" id="idi_8c_html_aca7b959740043bcdc341579d1de3b587"><div class="ttname"><a href="idi_8c.html#aca7b959740043bcdc341579d1de3b587">EC_HUMAN_READABLE_TERMINATE</a></div><div class="ttdeci">#define EC_HUMAN_READABLE_TERMINATE</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00162">idi.c:162</a></div></div>
<div class="ttc" id="idi_8c_html_ae02625dd3f93cc87fdab4b6e2c15ed6c"><div class="ttname"><a href="idi_8c.html#ae02625dd3f93cc87fdab4b6e2c15ed6c">Character_Get</a></div><div class="ttdeci">BOOL Character_Get(int *character)</div><div class="ttdoc">Obtains a key from the keyboard in a non-blocking way. This is exerpetted from AES Universal Library/...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00652">idi.c:652</a></div></div>
<div class="ttc" id="idi_8c_html_a1672fbebd0a87ba0ad4abbaaf4d7cb56"><div class="ttname"><a href="idi_8c.html#a1672fbebd0a87ba0ad4abbaaf4d7cb56">IDI_DIN_SHIFT_RIGHT</a></div><div class="ttdeci">#define IDI_DIN_SHIFT_RIGHT</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00354">idi.c:354</a></div></div>
<div class="ttc" id="idi_8c_html_a1a51d688850609ce7bdd228893d5ce77a1dfbcff1752c653cb399ae9419397b19"><div class="ttname"><a href="idi_8c.html#a1a51d688850609ce7bdd228893d5ce77a1dfbcff1752c653cb399ae9419397b19">IDI_BANK_5</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00198">idi.c:198</a></div></div>
<div class="ttc" id="structspi__cfg_html_a08a45f7aec9d8b6e59e91a56dc889384"><div class="ttname"><a href="structspi__cfg.html#a08a45f7aec9d8b6e59e91a56dc889384">spi_cfg::sclk_polarity</a></div><div class="ttdeci">BOOL sclk_polarity</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00333">idi.c:333</a></div></div>
<div class="ttc" id="idi_8c_html_ac3529e3914f0c1f8e335a3843bed9744"><div class="ttname"><a href="idi_8c.html#ac3529e3914f0c1f8e335a3843bed9744">IDI_CMD__SPI_Config_SDIO_Wrap</a></div><div class="ttdeci">static int IDI_CMD__SPI_Config_SDIO_Wrap(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02687">idi.c:2687</a></div></div>
<div class="ttc" id="structspi__status_html_a1515bdf17aa69c23285df7f9637ca30e"><div class="ttname"><a href="structspi__status.html#a1515bdf17aa69c23285df7f9637ca30e">spi_status::fifo_count</a></div><div class="ttdeci">int fifo_count</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00348">idi.c:348</a></div></div>
<div class="ttc" id="idi_8c_html_adaff99746c6b7de99d49bf298156b6f5adb0d7022466918b7b7481154bbce753a"><div class="ttname"><a href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5adb0d7022466918b7b7481154bbce753a">REG_DIR_READ_WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00210">idi.c:210</a></div></div>
<div class="ttc" id="idi_8c_html_adaff99746c6b7de99d49bf298156b6f5"><div class="ttname"><a href="idi_8c.html#adaff99746c6b7de99d49bf298156b6f5">REG_DIR_ENUM</a></div><div class="ttdeci">REG_DIR_ENUM</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00205">idi.c:205</a></div></div>
<div class="ttc" id="idi_8c_html_af8816b167342609f62dea85684c8668b"><div class="ttname"><a href="idi_8c.html#af8816b167342609f62dea85684c8668b">IDI_CMD__SPI_Config_Get</a></div><div class="ttdeci">static int IDI_CMD__SPI_Config_Get(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02477">idi.c:2477</a></div></div>
<div class="ttc" id="structreg__definition_html_a51dc88ef979cd6db270b6d5dda52e0b6"><div class="ttname"><a href="structreg__definition.html#a51dc88ef979cd6db270b6d5dda52e0b6">reg_definition::symbol</a></div><div class="ttdeci">IDI_REG_ENUM symbol</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00304">idi.c:304</a></div></div>
<div class="ttc" id="idi_8c_html_a478c7200a60ec93c9195e44fc2b294f7"><div class="ttname"><a href="idi_8c.html#a478c7200a60ec93c9195e44fc2b294f7">FRAM__Write_Enable_Latch_Set</a></div><div class="ttdeci">int FRAM__Write_Enable_Latch_Set(void)</div><div class="ttdoc">FRAM Write Enable Latch Set command (WREN) </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l02069">idi.c:2069</a></div></div>
<div class="ttc" id="structspi__cfg_html_a7cd0897d273b604ea90aaf525ca5d318"><div class="ttname"><a href="structspi__cfg.html#a7cd0897d273b604ea90aaf525ca5d318">spi_cfg::sdio_wrap</a></div><div class="ttdeci">BOOL sdio_wrap</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00329">idi.c:329</a></div></div>
<div class="ttc" id="idi_8c_html_a95fbfdb665e1aa54eb081d7d5c7af6a8"><div class="ttname"><a href="idi_8c.html#a95fbfdb665e1aa54eb081d7d5c7af6a8">String_To_Bool</a></div><div class="ttdeci">BOOL String_To_Bool(const char *str)</div><div class="ttdoc">General function used to convert a string into a boolean equivalent value. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00541">idi.c:541</a></div></div>
<div class="ttc" id="structspi__status_html_a68f61f8d0fb7e552cf463bb4926b5f1d"><div class="ttname"><a href="structspi__status.html#a68f61f8d0fb7e552cf463bb4926b5f1d">spi_status::empty</a></div><div class="ttdeci">BOOL empty</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00346">idi.c:346</a></div></div>
<div class="ttc" id="structdin__cfg_html_aa99e288cbad00f916f13ada13d41d05d"><div class="ttname"><a href="structdin__cfg.html#aa99e288cbad00f916f13ada13d41d05d">din_cfg::chan</a></div><div class="ttdeci">struct din_cfg::@5 chan[IDI_DIN_QTY]</div></div>
<div class="ttc" id="structspi__status_html_a3b60b3c5cbe0736af58dccbde4e3161d"><div class="ttname"><a href="structspi__status.html#a3b60b3c5cbe0736af58dccbde4e3161d">spi_status::full</a></div><div class="ttdeci">BOOL full</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00345">idi.c:345</a></div></div>
<div class="ttc" id="structidi__dataset_html_aae9e92994011c0d276bdd28589d9aa71"><div class="ttname"><a href="structidi__dataset.html#aae9e92994011c0d276bdd28589d9aa71">idi_dataset::bank_previous</a></div><div class="ttdeci">uint8_t bank_previous</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00380">idi.c:380</a></div></div>
<div class="ttc" id="idi_8c_html_a7fcdc0355d1d9273d7ac18bd6e8a6763"><div class="ttname"><a href="idi_8c.html#a7fcdc0355d1d9273d7ac18bd6e8a6763">SPI_Configuration_Chip_Select_Behavior_Get</a></div><div class="ttdeci">int SPI_Configuration_Chip_Select_Behavior_Get(SPI_CSB_ENUM *chip_select_behavior)</div><div class="ttdoc">Extracts the chip select behavior from the SPI configuration register. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l01211">idi.c:1211</a></div></div>
<div class="ttc" id="idi_8c_html_a3bd0ce53eda9237f7ec1a515f89e907b"><div class="ttname"><a href="idi_8c.html#a3bd0ce53eda9237f7ec1a515f89e907b">IDI_REG_ENUM</a></div><div class="ttdeci">IDI_REG_ENUM</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00296">idi.c:296</a></div></div>
<div class="ttc" id="idi_8c_html_aa2a17a1eaf6d0b512863fffd9f03c571"><div class="ttname"><a href="idi_8c.html#aa2a17a1eaf6d0b512863fffd9f03c571">IO_Direction_IsNotValid</a></div><div class="ttdeci">static BOOL IO_Direction_IsNotValid(IDI_REG_ENUM location, REG_DIR_ENUM direction)</div><div class="ttdoc">Looks up in the register definitions list for the ports possible read/write directions. </div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00718">idi.c:718</a></div></div>
<div class="ttc" id="idi_8c_html_ac80cd7b02810a77973bd938d9c2871ad"><div class="ttname"><a href="idi_8c.html#ac80cd7b02810a77973bd938d9c2871ad">IDI_REV</a></div><div class="ttdeci">#define IDI_REV</div><div class="ttdoc">The Subversion (SVN) time/date marker which is updated during commit of the source file to the reposi...</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00048">idi.c:48</a></div></div>
<div class="ttc" id="idi_8c_html_a3176ade75a5108d4b5e4f61ca2c1e842"><div class="ttname"><a href="idi_8c.html#a3176ade75a5108d4b5e4f61ca2c1e842">IDI_DIN_GROUP_SIZE</a></div><div class="ttdeci">#define IDI_DIN_GROUP_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="idi_8c_source.html#l00353">idi.c:353</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="idi_8c.html">idi.c</a></li>
    <li class="footer">Generated on Thu Mar 5 2015 10:15:11 for Isolated Digital Input Test Utility by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
